{
    "sourceFile": "src/components/pdf.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 173,
            "patches": [
                {
                    "date": 1743669397426,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1743669558187,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n import React, { useRef } from \"react\";\r\n-import { PDFExport } from \"@progress/kendo-react-pdf\";\r\n+\r\n import { Button, Card, CardContent, Typography, Divider } from \"@mui/material\";\r\n \r\n const PatientPDF = ({ form }) => {\r\n   const pdfExportComponent = useRef(null);\r\n"
                },
                {
                    "date": 1743669565752,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n         style={{ marginBottom: \"10px\" }}\r\n       >\r\n         Download PDF\r\n       </Button>\r\n-      <PDFExport ref={pdfExportComponent} paperSize=\"A4\">\r\n+      <pdfExportComponent ref={pdfExportComponent} paperSize=\"A4\">\r\n         <Card style={{ padding: \"20px\", maxWidth: \"800px\", margin: \"auto\" }}>\r\n           <CardContent>\r\n             <Typography variant=\"h5\" gutterBottom>\r\n               Patient Report\r\n"
                },
                {
                    "date": 1743669573270,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n         style={{ marginBottom: \"10px\" }}\r\n       >\r\n         Download PDF\r\n       </Button>\r\n-      <pdfExportComponent ref={pdfExportComponent} paperSize=\"A4\">\r\n+      <PDFExport ref={pdfExportComponent} paperSize=\"A4\">\r\n         <Card style={{ padding: \"20px\", maxWidth: \"800px\", margin: \"auto\" }}>\r\n           <CardContent>\r\n             <Typography variant=\"h5\" gutterBottom>\r\n               Patient Report\r\n"
                },
                {
                    "date": 1743669886199,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n import React, { useRef } from \"react\";\r\n-\r\n+import { PDFExport } from \"@progress/kendo-react-pdf\";\r\n import { Button, Card, CardContent, Typography, Divider } from \"@mui/material\";\r\n \r\n const PatientPDF = ({ form }) => {\r\n   const pdfExportComponent = useRef(null);\r\n"
                },
                {
                    "date": 1743669943595,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,75 +29,75 @@\n             </Typography>\r\n             \r\n             <Divider />\r\n             <Typography variant=\"h6\">Patient Information</Typography>\r\n-            <Typography>Name: {form.first_name} {form.last_name}</Typography>\r\n-            <Typography>DOB: {new Date(form.dob).toLocaleDateString()}</Typography>\r\n-            <Typography>Address: {form.address}</Typography>\r\n-            <Typography>Post Code: {form.post_code}</Typography>\r\n-            <Typography>Phone: {form.phone}</Typography>\r\n-            <Typography>Email: {form.email}</Typography>\r\n-            <Typography>Notes: {form.notes}</Typography>\r\n+            <Typography>Name: {form?.first_name} {form?.last_name}</Typography>\r\n+            <Typography>DOB: {new Date(form?.dob).toLocaleDateString()}</Typography>\r\n+            <Typography>Address: {form?.address}</Typography>\r\n+            <Typography>Post Code: {form?.post_code}</Typography>\r\n+            <Typography>Phone: {form?.phone}</Typography>\r\n+            <Typography>Email: {form?.email}</Typography>\r\n+            <Typography>Notes: {form?.notes}</Typography>\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Next of Kin</Typography>\r\n-            <Typography>Name: {form.kin_details.name}</Typography>\r\n-            <Typography>Address: {form.kin_details.address}</Typography>\r\n-            <Typography>Phone: {form.kin_details.phone}</Typography>\r\n-            <Typography>Email: {form.kin_details.email}</Typography>\r\n+            <Typography>Name: {form?.kin_details.name}</Typography>\r\n+            <Typography>Address: {form?.kin_details.address}</Typography>\r\n+            <Typography>Phone: {form?.kin_details.phone}</Typography>\r\n+            <Typography>Email: {form?.kin_details.email}</Typography>\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">General Practitioner</Typography>\r\n-            <Typography>Name: {form.general_practitioner.name}</Typography>\r\n-            <Typography>Address: {form.general_practitioner.address}</Typography>\r\n-            <Typography>Phone: {form.general_practitioner.phone}</Typography>\r\n-            <Typography>Email: {form.general_practitioner.email}</Typography>\r\n+            <Typography>Name: {form?.general_practitioner.name}</Typography>\r\n+            <Typography>Address: {form?.general_practitioner.address}</Typography>\r\n+            <Typography>Phone: {form?.general_practitioner.phone}</Typography>\r\n+            <Typography>Email: {form?.general_practitioner.email}</Typography>\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Treatment Plan</Typography>\r\n-            <Typography>Concerns: {form.treatment_plan.patient_concerns}</Typography>\r\n-            <Typography>Goals: {form.treatment_plan.patient_goals}</Typography>\r\n-            <Typography>Plan: {form.treatment_plan.advised_plan}</Typography>\r\n-            <Typography>Expected Result: {form.treatment_plan.expected_result}</Typography>\r\n+            <Typography>Concerns: {form?.treatment_plan.patient_concerns}</Typography>\r\n+            <Typography>Goals: {form?.treatment_plan.patient_goals}</Typography>\r\n+            <Typography>Plan: {form?.treatment_plan.advised_plan}</Typography>\r\n+            <Typography>Expected Result: {form?.treatment_plan.expected_result}</Typography>\r\n             <Typography>\r\n-              Treatment Date: {new Date(form.treatment_plan.date).toLocaleDateString()}\r\n+              Treatment Date: {new Date(form?.treatment_plan.date).toLocaleDateString()}\r\n             </Typography>\r\n-            <img src={form.treatment_plan.patient_sign} alt=\"Patient Signature\" style={{ width: \"100px\", marginTop: \"10px\" }} />\r\n+            <img src={form?.treatment_plan.patient_sign} alt=\"Patient Signature\" style={{ width: \"100px\", marginTop: \"10px\" }} />\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Treatment Records</Typography>\r\n-            {form.treatment_record.map((record) => (\r\n+            {form?.treatment_record.map((record) => (\r\n               <Typography key={record._id}>{record.description} - ${record.amount}</Typography>\r\n             ))}\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Images</Typography>\r\n             <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\" }}>\r\n-              {form.before_images.map((img, index) => (\r\n+              {form?.before_images.map((img, index) => (\r\n                 <img key={index} src={img} alt=\"Before\" style={{ width: \"80px\" }} />\r\n               ))}\r\n-              {form.after_images.map((img, index) => (\r\n+              {form?.after_images.map((img, index) => (\r\n                 <img key={index} src={img} alt=\"After\" style={{ width: \"80px\" }} />\r\n               ))}\r\n             </div>\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Further Treatment</Typography>\r\n-            {form.further_treatment.map((treatment, index) => (\r\n+            {form?.further_treatment.map((treatment, index) => (\r\n               <img key={index} src={treatment.sign} alt=\"Further Treatment Signature\" style={{ width: \"100px\" }} />\r\n             ))}\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Patient Consent</Typography>\r\n-            <img src={form.patient_consent.sign} alt=\"Patient Consent Signature\" style={{ width: \"100px\" }} />\r\n+            <img src={form?.patient_consent.sign} alt=\"Patient Consent Signature\" style={{ width: \"100px\" }} />\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Side Effects</Typography>\r\n-            <Typography>Details: {form.side_effect.details || \"N/A\"}</Typography>\r\n+            <Typography>Details: {form?.side_effect.details || \"N/A\"}</Typography>\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Extra Notes</Typography>\r\n-            <Typography>{form.extra_notes || \"N/A\"}</Typography>\r\n+            <Typography>{form?.extra_notes || \"N/A\"}</Typography>\r\n           </CardContent>\r\n         </Card>\r\n       </PDFExport>\r\n     </div>\r\n"
                },
                {
                    "date": 1743669971979,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n import React, { useRef } from \"react\";\r\n import { PDFExport } from \"@progress/kendo-react-pdf\";\r\n import { Button, Card, CardContent, Typography, Divider } from \"@mui/material\";\r\n \r\n-const PatientPDF = ({ form }) => {\r\n+const PatientPDF = (form) => {\r\n   const pdfExportComponent = useRef(null);\r\n \r\n   const handleExportWithComponent = () => {\r\n     if (pdfExportComponent.current) {\r\n"
                },
                {
                    "date": 1743670033071,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,10 @@\n import { PDFExport } from \"@progress/kendo-react-pdf\";\r\n import { Button, Card, CardContent, Typography, Divider } from \"@mui/material\";\r\n \r\n const PatientPDF = (form) => {\r\n+    console.log(form);\r\n+    \r\n   const pdfExportComponent = useRef(null);\r\n \r\n   const handleExportWithComponent = () => {\r\n     if (pdfExportComponent.current) {\r\n@@ -39,12 +41,12 @@\n             <Typography>Notes: {form?.notes}</Typography>\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Next of Kin</Typography>\r\n-            <Typography>Name: {form?.kin_details.name}</Typography>\r\n-            <Typography>Address: {form?.kin_details.address}</Typography>\r\n-            <Typography>Phone: {form?.kin_details.phone}</Typography>\r\n-            <Typography>Email: {form?.kin_details.email}</Typography>\r\n+            <Typography>Name: {form?.kin_details?..name}</Typography>\r\n+            <Typography>Address: {form?.kin_details?..address}</Typography>\r\n+            <Typography>Phone: {form?.kin_details?..phone}</Typography>\r\n+            <Typography>Email: {form?.kin_details?..email}</Typography>\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">General Practitioner</Typography>\r\n             <Typography>Name: {form?.general_practitioner.name}</Typography>\r\n"
                },
                {
                    "date": 1743670047419,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,19 +41,19 @@\n             <Typography>Notes: {form?.notes}</Typography>\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Next of Kin</Typography>\r\n-            <Typography>Name: {form?.kin_details?..name}</Typography>\r\n-            <Typography>Address: {form?.kin_details?..address}</Typography>\r\n-            <Typography>Phone: {form?.kin_details?..phone}</Typography>\r\n-            <Typography>Email: {form?.kin_details?..email}</Typography>\r\n+            <Typography>Name: {form?.kin_details?.name}</Typography>\r\n+            <Typography>Address: {form?.kin_details?.address}</Typography>\r\n+            <Typography>Phone: {form?.kin_details?.phone}</Typography>\r\n+            <Typography>Email: {form?.kin_details?.email}</Typography>\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">General Practitioner</Typography>\r\n-            <Typography>Name: {form?.general_practitioner.name}</Typography>\r\n-            <Typography>Address: {form?.general_practitioner.address}</Typography>\r\n-            <Typography>Phone: {form?.general_practitioner.phone}</Typography>\r\n-            <Typography>Email: {form?.general_practitioner.email}</Typography>\r\n+            <Typography>Name: {form?.general_practitioner?.name}</Typography>\r\n+            <Typography>Address: {form?.general_practitioner?.address}</Typography>\r\n+            <Typography>Phone: {form?.general_practitioner?.phone}</Typography>\r\n+            <Typography>Email: {form?.general_practitioner?.email}</Typography>\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Treatment Plan</Typography>\r\n             <Typography>Concerns: {form?.treatment_plan.patient_concerns}</Typography>\r\n"
                },
                {
                    "date": 1743670083127,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,16 +55,16 @@\n             <Typography>Email: {form?.general_practitioner?.email}</Typography>\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Treatment Plan</Typography>\r\n-            <Typography>Concerns: {form?.treatment_plan.patient_concerns}</Typography>\r\n-            <Typography>Goals: {form?.treatment_plan.patient_goals}</Typography>\r\n-            <Typography>Plan: {form?.treatment_plan.advised_plan}</Typography>\r\n-            <Typography>Expected Result: {form?.treatment_plan.expected_result}</Typography>\r\n+            <Typography>Concerns: {form?.treatment_plan?.patient_concerns}</Typography>\r\n+            <Typography>Goals: {form?.treatment_plan?.patient_goals}</Typography>\r\n+            <Typography>Plan: {form?.treatment_plan?.advised_plan}</Typography>\r\n+            <Typography>Expected Result: {form?.treatment_plan?.expected_result}</Typography>\r\n             <Typography>\r\n-              Treatment Date: {new Date(form?.treatment_plan.date).toLocaleDateString()}\r\n+              Treatment Date: {new Date(form?.treatment_plan?.date).toLocaleDateString()}\r\n             </Typography>\r\n-            <img src={form?.treatment_plan.patient_sign} alt=\"Patient Signature\" style={{ width: \"100px\", marginTop: \"10px\" }} />\r\n+            <img src={form?.treatment_plan?.patient_sign} alt=\"Patient Signature\" style={{ width: \"100px\", marginTop: \"10px\" }} />\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Treatment Records</Typography>\r\n             {form?.treatment_record.map((record) => (\r\n"
                },
                {
                    "date": 1743670118137,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -66,26 +66,26 @@\n             <img src={form?.treatment_plan?.patient_sign} alt=\"Patient Signature\" style={{ width: \"100px\", marginTop: \"10px\" }} />\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Treatment Records</Typography>\r\n-            {form?.treatment_record.map((record) => (\r\n+            {form?.treatment_record?.map((record) => (\r\n               <Typography key={record._id}>{record.description} - ${record.amount}</Typography>\r\n             ))}\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Images</Typography>\r\n             <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\" }}>\r\n-              {form?.before_images.map((img, index) => (\r\n+              {form?.before_images?.map((img, index) => (\r\n                 <img key={index} src={img} alt=\"Before\" style={{ width: \"80px\" }} />\r\n               ))}\r\n-              {form?.after_images.map((img, index) => (\r\n+              {form?.after_images?.map((img, index) => (\r\n                 <img key={index} src={img} alt=\"After\" style={{ width: \"80px\" }} />\r\n               ))}\r\n             </div>\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Further Treatment</Typography>\r\n-            {form?.further_treatment.map((treatment, index) => (\r\n+            {form?.further_treatment?.map((treatment, index) => (\r\n               <img key={index} src={treatment.sign} alt=\"Further Treatment Signature\" style={{ width: \"100px\" }} />\r\n             ))}\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n"
                },
                {
                    "date": 1743670370305,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -89,9 +89,9 @@\n             ))}\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Patient Consent</Typography>\r\n-            <img src={form?.patient_consent.sign} alt=\"Patient Consent Signature\" style={{ width: \"100px\" }} />\r\n+            <img src={form?.patient_consent?.sign} alt=\"Patient Consent Signature\" style={{ width: \"100px\" }} />\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Side Effects</Typography>\r\n             <Typography>Details: {form?.side_effect.details || \"N/A\"}</Typography>\r\n"
                },
                {
                    "date": 1743670441124,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -93,9 +93,9 @@\n             <img src={form?.patient_consent?.sign} alt=\"Patient Consent Signature\" style={{ width: \"100px\" }} />\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Side Effects</Typography>\r\n-            <Typography>Details: {form?.side_effect.details || \"N/A\"}</Typography>\r\n+            <Typography>Details: {form?.side_effect?.details || \"N/A\"}</Typography>\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Extra Notes</Typography>\r\n             <Typography>{form?.extra_notes || \"N/A\"}</Typography>\r\n"
                },
                {
                    "date": 1743670509325,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n import React, { useRef } from \"react\";\r\n import { PDFExport } from \"@progress/kendo-react-pdf\";\r\n import { Button, Card, CardContent, Typography, Divider } from \"@mui/material\";\r\n \r\n-const PatientPDF = (form) => {\r\n+const PatientPDF = ({form}) => {\r\n     console.log(form);\r\n     \r\n   const pdfExportComponent = useRef(null);\r\n \r\n"
                },
                {
                    "date": 1743670651260,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,11 +1,9 @@\n import React, { useRef } from \"react\";\r\n import { PDFExport } from \"@progress/kendo-react-pdf\";\r\n-import { Button, Card, CardContent, Typography, Divider } from \"@mui/material\";\r\n+import { Button, Card, CardContent, Typography, Divider, Box } from \"@mui/material\";\r\n \r\n-const PatientPDF = ({form}) => {\r\n-    console.log(form);\r\n-    \r\n+const PatientPDF = ({ form }) => {\r\n   const pdfExportComponent = useRef(null);\r\n \r\n   const handleExportWithComponent = () => {\r\n     if (pdfExportComponent.current) {\r\n@@ -13,92 +11,80 @@\n     }\r\n   };\r\n \r\n   return (\r\n-    <div>\r\n+    <div style={{ textAlign: \"center\", padding: \"20px\" }}>\r\n       <Button\r\n         variant=\"contained\"\r\n-        color=\"primary\"\r\n+        sx={{\r\n+          backgroundColor: \"#1976D2\",\r\n+          color: \"#fff\",\r\n+          fontSize: \"16px\",\r\n+          padding: \"10px 20px\",\r\n+          borderRadius: \"8px\",\r\n+          textTransform: \"none\",\r\n+          \"&:hover\": { backgroundColor: \"#145DA0\" },\r\n+        }}\r\n         onClick={handleExportWithComponent}\r\n-        style={{ marginBottom: \"10px\" }}\r\n       >\r\n         Download PDF\r\n       </Button>\r\n+\r\n       <PDFExport ref={pdfExportComponent} paperSize=\"A4\">\r\n-        <Card style={{ padding: \"20px\", maxWidth: \"800px\", margin: \"auto\" }}>\r\n+        <Card sx={{ padding: \"30px\", maxWidth: \"800px\", margin: \"auto\", mt: 3, boxShadow: 3 }}>\r\n           <CardContent>\r\n-            <Typography variant=\"h5\" gutterBottom>\r\n-              Patient Report\r\n+            <Typography variant=\"h4\" color=\"primary\" gutterBottom>\r\n+              🏥 Patient Report\r\n             </Typography>\r\n-            \r\n-            <Divider />\r\n-            <Typography variant=\"h6\">Patient Information</Typography>\r\n-            <Typography>Name: {form?.first_name} {form?.last_name}</Typography>\r\n-            <Typography>DOB: {new Date(form?.dob).toLocaleDateString()}</Typography>\r\n-            <Typography>Address: {form?.address}</Typography>\r\n-            <Typography>Post Code: {form?.post_code}</Typography>\r\n-            <Typography>Phone: {form?.phone}</Typography>\r\n-            <Typography>Email: {form?.email}</Typography>\r\n-            <Typography>Notes: {form?.notes}</Typography>\r\n-            \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">Next of Kin</Typography>\r\n-            <Typography>Name: {form?.kin_details?.name}</Typography>\r\n-            <Typography>Address: {form?.kin_details?.address}</Typography>\r\n-            <Typography>Phone: {form?.kin_details?.phone}</Typography>\r\n-            <Typography>Email: {form?.kin_details?.email}</Typography>\r\n-            \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">General Practitioner</Typography>\r\n-            <Typography>Name: {form?.general_practitioner?.name}</Typography>\r\n-            <Typography>Address: {form?.general_practitioner?.address}</Typography>\r\n-            <Typography>Phone: {form?.general_practitioner?.phone}</Typography>\r\n-            <Typography>Email: {form?.general_practitioner?.email}</Typography>\r\n-            \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">Treatment Plan</Typography>\r\n-            <Typography>Concerns: {form?.treatment_plan?.patient_concerns}</Typography>\r\n-            <Typography>Goals: {form?.treatment_plan?.patient_goals}</Typography>\r\n-            <Typography>Plan: {form?.treatment_plan?.advised_plan}</Typography>\r\n-            <Typography>Expected Result: {form?.treatment_plan?.expected_result}</Typography>\r\n-            <Typography>\r\n-              Treatment Date: {new Date(form?.treatment_plan?.date).toLocaleDateString()}\r\n+\r\n+            <Divider sx={{ mb: 2 }} />\r\n+\r\n+            <Typography variant=\"h5\" color=\"secondary\">\r\n+              Patient Information\r\n             </Typography>\r\n-            <img src={form?.treatment_plan?.patient_sign} alt=\"Patient Signature\" style={{ width: \"100px\", marginTop: \"10px\" }} />\r\n-            \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">Treatment Records</Typography>\r\n-            {form?.treatment_record?.map((record) => (\r\n-              <Typography key={record._id}>{record.description} - ${record.amount}</Typography>\r\n-            ))}\r\n-            \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">Images</Typography>\r\n-            <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\" }}>\r\n+            <Typography><strong>Name:</strong> {form?.first_name} {form?.last_name}</Typography>\r\n+            <Typography><strong>DOB:</strong> {new Date(form?.dob).toLocaleDateString()}</Typography>\r\n+            <Typography><strong>Address:</strong> {form?.address}</Typography>\r\n+            <Typography><strong>Post Code:</strong> {form?.post_code}</Typography>\r\n+            <Typography><strong>Phone:</strong> {form?.phone}</Typography>\r\n+            <Typography><strong>Email:</strong> {form?.email}</Typography>\r\n+            <Typography><strong>Notes:</strong> {form?.notes}</Typography>\r\n+\r\n+            <Divider sx={{ my: 2 }} />\r\n+\r\n+            <Typography variant=\"h5\" color=\"secondary\">Next of Kin</Typography>\r\n+            <Typography><strong>Name:</strong> {form?.kin_details?.name}</Typography>\r\n+            <Typography><strong>Phone:</strong> {form?.kin_details?.phone}</Typography>\r\n+\r\n+            <Divider sx={{ my: 2 }} />\r\n+\r\n+            <Typography variant=\"h5\" color=\"secondary\">Treatment Plan</Typography>\r\n+            <Typography><strong>Concerns:</strong> {form?.treatment_plan?.patient_concerns}</Typography>\r\n+            <Typography><strong>Plan:</strong> {form?.treatment_plan?.advised_plan}</Typography>\r\n+\r\n+            <Box sx={{ mt: 2, display: \"flex\", justifyContent: \"center\" }}>\r\n+              <img \r\n+                src={form?.treatment_plan?.patient_sign} \r\n+                alt=\"Patient Signature\" \r\n+                style={{ width: \"120px\", borderRadius: \"5px\", border: \"1px solid #ccc\" }} \r\n+              />\r\n+            </Box>\r\n+\r\n+            <Divider sx={{ my: 2 }} />\r\n+\r\n+            <Typography variant=\"h5\" color=\"secondary\">Images</Typography>\r\n+            <Box sx={{ display: \"flex\", gap: \"10px\", justifyContent: \"center\", flexWrap: \"wrap\", mt: 1 }}>\r\n               {form?.before_images?.map((img, index) => (\r\n-                <img key={index} src={img} alt=\"Before\" style={{ width: \"80px\" }} />\r\n+                <img key={index} src={img} alt=\"Before\" style={{ width: \"100px\", borderRadius: \"5px\", border: \"1px solid #ddd\" }} />\r\n               ))}\r\n               {form?.after_images?.map((img, index) => (\r\n-                <img key={index} src={img} alt=\"After\" style={{ width: \"80px\" }} />\r\n+                <img key={index} src={img} alt=\"After\" style={{ width: \"100px\", borderRadius: \"5px\", border: \"1px solid #ddd\" }} />\r\n               ))}\r\n-            </div>\r\n-            \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">Further Treatment</Typography>\r\n-            {form?.further_treatment?.map((treatment, index) => (\r\n-              <img key={index} src={treatment.sign} alt=\"Further Treatment Signature\" style={{ width: \"100px\" }} />\r\n-            ))}\r\n-            \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">Patient Consent</Typography>\r\n-            <img src={form?.patient_consent?.sign} alt=\"Patient Consent Signature\" style={{ width: \"100px\" }} />\r\n-            \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">Side Effects</Typography>\r\n-            <Typography>Details: {form?.side_effect?.details || \"N/A\"}</Typography>\r\n-            \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">Extra Notes</Typography>\r\n+            </Box>\r\n+\r\n+            <Divider sx={{ my: 2 }} />\r\n+\r\n+            <Typography variant=\"h5\" color=\"secondary\">Extra Notes</Typography>\r\n             <Typography>{form?.extra_notes || \"N/A\"}</Typography>\r\n           </CardContent>\r\n         </Card>\r\n       </PDFExport>\r\n"
                },
                {
                    "date": 1743670698843,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,11 @@\n import React, { useRef } from \"react\";\r\n import { PDFExport } from \"@progress/kendo-react-pdf\";\r\n-import { Button, Card, CardContent, Typography, Divider, Box } from \"@mui/material\";\r\n+import { Button, Card, CardContent, Typography, Divider } from \"@mui/material\";\r\n \r\n-const PatientPDF = ({ form }) => {\r\n+const PatientPDF = ({form}) => {\r\n+    console.log(form);\r\n+    \r\n   const pdfExportComponent = useRef(null);\r\n \r\n   const handleExportWithComponent = () => {\r\n     if (pdfExportComponent.current) {\r\n@@ -11,80 +13,92 @@\n     }\r\n   };\r\n \r\n   return (\r\n-    <div style={{ textAlign: \"center\", padding: \"20px\" }}>\r\n+    <div>\r\n       <Button\r\n         variant=\"contained\"\r\n-        sx={{\r\n-          backgroundColor: \"#1976D2\",\r\n-          color: \"#fff\",\r\n-          fontSize: \"16px\",\r\n-          padding: \"10px 20px\",\r\n-          borderRadius: \"8px\",\r\n-          textTransform: \"none\",\r\n-          \"&:hover\": { backgroundColor: \"#145DA0\" },\r\n-        }}\r\n+        color=\"primary\"\r\n         onClick={handleExportWithComponent}\r\n+        style={{ marginBottom: \"10px\" }}\r\n       >\r\n         Download PDF\r\n       </Button>\r\n-\r\n       <PDFExport ref={pdfExportComponent} paperSize=\"A4\">\r\n-        <Card sx={{ padding: \"30px\", maxWidth: \"800px\", margin: \"auto\", mt: 3, boxShadow: 3 }}>\r\n+        <Card style={{ padding: \"20px\", maxWidth: \"800px\", margin: \"auto\" }}>\r\n           <CardContent>\r\n-            <Typography variant=\"h4\" color=\"primary\" gutterBottom>\r\n-              🏥 Patient Report\r\n+            <Typography variant=\"h5\" gutterBottom>\r\n+              Patient Report\r\n             </Typography>\r\n-\r\n-            <Divider sx={{ mb: 2 }} />\r\n-\r\n-            <Typography variant=\"h5\" color=\"secondary\">\r\n-              Patient Information\r\n+            \r\n+            <Divider />\r\n+            <Typography variant=\"h6\">Patient Information</Typography>\r\n+            <Typography>Name: {form?.first_name} {form?.last_name}</Typography>\r\n+            <Typography>DOB: {new Date(form?.dob).toLocaleDateString()}</Typography>\r\n+            <Typography>Address: {form?.address}</Typography>\r\n+            <Typography>Post Code: {form?.post_code}</Typography>\r\n+            <Typography>Phone: {form?.phone}</Typography>\r\n+            <Typography>Email: {form?.email}</Typography>\r\n+            <Typography>Notes: {form?.notes}</Typography>\r\n+            \r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n+            <Typography variant=\"h6\">Next of Kin</Typography>\r\n+            <Typography>Name: {form?.kin_details?.name}</Typography>\r\n+            <Typography>Address: {form?.kin_details?.address}</Typography>\r\n+            <Typography>Phone: {form?.kin_details?.phone}</Typography>\r\n+            <Typography>Email: {form?.kin_details?.email}</Typography>\r\n+            \r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n+            <Typography variant=\"h6\">General Practitioner</Typography>\r\n+            <Typography>Name: {form?.general_practitioner?.name}</Typography>\r\n+            <Typography>Address: {form?.general_practitioner?.address}</Typography>\r\n+            <Typography>Phone: {form?.general_practitioner?.phone}</Typography>\r\n+            <Typography>Email: {form?.general_practitioner?.email}</Typography>\r\n+            \r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n+            <Typography variant=\"h6\">Treatment Plan</Typography>\r\n+            <Typography>Concerns: {form?.treatment_plan?.patient_concerns}</Typography>\r\n+            <Typography>Goals: {form?.treatment_plan?.patient_goals}</Typography>\r\n+            <Typography>Plan: {form?.treatment_plan?.advised_plan}</Typography>\r\n+            <Typography>Expected Result: {form?.treatment_plan?.expected_result}</Typography>\r\n+            <Typography>\r\n+              Treatment Date: {new Date(form?.treatment_plan?.date).toLocaleDateString()}\r\n             </Typography>\r\n-            <Typography><strong>Name:</strong> {form?.first_name} {form?.last_name}</Typography>\r\n-            <Typography><strong>DOB:</strong> {new Date(form?.dob).toLocaleDateString()}</Typography>\r\n-            <Typography><strong>Address:</strong> {form?.address}</Typography>\r\n-            <Typography><strong>Post Code:</strong> {form?.post_code}</Typography>\r\n-            <Typography><strong>Phone:</strong> {form?.phone}</Typography>\r\n-            <Typography><strong>Email:</strong> {form?.email}</Typography>\r\n-            <Typography><strong>Notes:</strong> {form?.notes}</Typography>\r\n-\r\n-            <Divider sx={{ my: 2 }} />\r\n-\r\n-            <Typography variant=\"h5\" color=\"secondary\">Next of Kin</Typography>\r\n-            <Typography><strong>Name:</strong> {form?.kin_details?.name}</Typography>\r\n-            <Typography><strong>Phone:</strong> {form?.kin_details?.phone}</Typography>\r\n-\r\n-            <Divider sx={{ my: 2 }} />\r\n-\r\n-            <Typography variant=\"h5\" color=\"secondary\">Treatment Plan</Typography>\r\n-            <Typography><strong>Concerns:</strong> {form?.treatment_plan?.patient_concerns}</Typography>\r\n-            <Typography><strong>Plan:</strong> {form?.treatment_plan?.advised_plan}</Typography>\r\n-\r\n-            <Box sx={{ mt: 2, display: \"flex\", justifyContent: \"center\" }}>\r\n-              <img \r\n-                src={form?.treatment_plan?.patient_sign} \r\n-                alt=\"Patient Signature\" \r\n-                style={{ width: \"120px\", borderRadius: \"5px\", border: \"1px solid #ccc\" }} \r\n-              />\r\n-            </Box>\r\n-\r\n-            <Divider sx={{ my: 2 }} />\r\n-\r\n-            <Typography variant=\"h5\" color=\"secondary\">Images</Typography>\r\n-            <Box sx={{ display: \"flex\", gap: \"10px\", justifyContent: \"center\", flexWrap: \"wrap\", mt: 1 }}>\r\n+            <img src={form?.treatment_plan?.patient_sign} alt=\"Patient Signature\" style={{ width: \"100px\", marginTop: \"10px\" }} />\r\n+            \r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n+            <Typography variant=\"h6\">Treatment Records</Typography>\r\n+            {form?.treatment_record?.map((record) => (\r\n+              <Typography key={record._id}>{record.description} - ${record.amount}</Typography>\r\n+            ))}\r\n+            \r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n+            <Typography variant=\"h6\">Images</Typography>\r\n+            <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\" }}>\r\n               {form?.before_images?.map((img, index) => (\r\n-                <img key={index} src={img} alt=\"Before\" style={{ width: \"100px\", borderRadius: \"5px\", border: \"1px solid #ddd\" }} />\r\n+                <img key={index} src={img} alt=\"Before\" style={{ width: \"80px\" }} />\r\n               ))}\r\n               {form?.after_images?.map((img, index) => (\r\n-                <img key={index} src={img} alt=\"After\" style={{ width: \"100px\", borderRadius: \"5px\", border: \"1px solid #ddd\" }} />\r\n+                <img key={index} src={img} alt=\"After\" style={{ width: \"80px\" }} />\r\n               ))}\r\n-            </Box>\r\n-\r\n-            <Divider sx={{ my: 2 }} />\r\n-\r\n-            <Typography variant=\"h5\" color=\"secondary\">Extra Notes</Typography>\r\n+            </div>\r\n+            \r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n+            <Typography variant=\"h6\">Further Treatment</Typography>\r\n+            {form?.further_treatment?.map((treatment, index) => (\r\n+              <img key={index} src={treatment.sign} alt=\"Further Treatment Signature\" style={{ width: \"100px\" }} />\r\n+            ))}\r\n+            \r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n+            <Typography variant=\"h6\">Patient Consent</Typography>\r\n+            <img src={form?.patient_consent?.sign} alt=\"Patient Consent Signature\" style={{ width: \"100px\" }} />\r\n+            \r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n+            <Typography variant=\"h6\">Side Effects</Typography>\r\n+            <Typography>Details: {form?.side_effect?.details || \"N/A\"}</Typography>\r\n+            \r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n+            <Typography variant=\"h6\">Extra Notes</Typography>\r\n             <Typography>{form?.extra_notes || \"N/A\"}</Typography>\r\n           </CardContent>\r\n         </Card>\r\n       </PDFExport>\r\n"
                },
                {
                    "date": 1743670749284,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,11 +1,11 @@\n import React, { useRef } from \"react\";\r\n import { PDFExport } from \"@progress/kendo-react-pdf\";\r\n-import { Button, Card, CardContent, Typography, Divider } from \"@mui/material\";\r\n+import { Button, Card, CardContent, Typography, Divider, Grid } from \"@mui/material\";\r\n \r\n-const PatientPDF = ({form}) => {\r\n-    console.log(form);\r\n-    \r\n+const PatientPDF = ({ form }) => {\r\n+  console.log(form);\r\n+\r\n   const pdfExportComponent = useRef(null);\r\n \r\n   const handleExportWithComponent = () => {\r\n     if (pdfExportComponent.current) {\r\n@@ -28,33 +28,38 @@\n           <CardContent>\r\n             <Typography variant=\"h5\" gutterBottom>\r\n               Patient Report\r\n             </Typography>\r\n-            \r\n             <Divider />\r\n+\r\n             <Typography variant=\"h6\">Patient Information</Typography>\r\n-            <Typography>Name: {form?.first_name} {form?.last_name}</Typography>\r\n-            <Typography>DOB: {new Date(form?.dob).toLocaleDateString()}</Typography>\r\n-            <Typography>Address: {form?.address}</Typography>\r\n-            <Typography>Post Code: {form?.post_code}</Typography>\r\n-            <Typography>Phone: {form?.phone}</Typography>\r\n-            <Typography>Email: {form?.email}</Typography>\r\n-            <Typography>Notes: {form?.notes}</Typography>\r\n+            <Grid container spacing={2}>\r\n+              <Grid item xs={4}><Typography>Name: {form?.first_name} {form?.last_name}</Typography></Grid>\r\n+              <Grid item xs={4}><Typography>DOB: {new Date(form?.dob).toLocaleDateString()}</Typography></Grid>\r\n+              <Grid item xs={4}><Typography>Phone: {form?.phone}</Typography></Grid>\r\n+              <Grid item xs={4}><Typography>Address: {form?.address}</Typography></Grid>\r\n+              <Grid item xs={4}><Typography>Post Code: {form?.post_code}</Typography></Grid>\r\n+              <Grid item xs={4}><Typography>Email: {form?.email}</Typography></Grid>\r\n+            </Grid>\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Next of Kin</Typography>\r\n-            <Typography>Name: {form?.kin_details?.name}</Typography>\r\n-            <Typography>Address: {form?.kin_details?.address}</Typography>\r\n-            <Typography>Phone: {form?.kin_details?.phone}</Typography>\r\n-            <Typography>Email: {form?.kin_details?.email}</Typography>\r\n-            \r\n+            <Grid container spacing={2}>\r\n+              <Grid item xs={4}><Typography>Name: {form?.kin_details?.name}</Typography></Grid>\r\n+              <Grid item xs={4}><Typography>Address: {form?.kin_details?.address}</Typography></Grid>\r\n+              <Grid item xs={4}><Typography>Phone: {form?.kin_details?.phone}</Typography></Grid>\r\n+              <Grid item xs={4}><Typography>Email: {form?.kin_details?.email}</Typography></Grid>\r\n+            </Grid>\r\n+\r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">General Practitioner</Typography>\r\n-            <Typography>Name: {form?.general_practitioner?.name}</Typography>\r\n-            <Typography>Address: {form?.general_practitioner?.address}</Typography>\r\n-            <Typography>Phone: {form?.general_practitioner?.phone}</Typography>\r\n-            <Typography>Email: {form?.general_practitioner?.email}</Typography>\r\n-            \r\n+            <Grid container spacing={2}>\r\n+              <Grid item xs={4}><Typography>Name: {form?.general_practitioner?.name}</Typography></Grid>\r\n+              <Grid item xs={4}><Typography>Address: {form?.general_practitioner?.address}</Typography></Grid>\r\n+              <Grid item xs={4}><Typography>Phone: {form?.general_practitioner?.phone}</Typography></Grid>\r\n+              <Grid item xs={4}><Typography>Email: {form?.general_practitioner?.email}</Typography></Grid>\r\n+            </Grid>\r\n+\r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Treatment Plan</Typography>\r\n             <Typography>Concerns: {form?.treatment_plan?.patient_concerns}</Typography>\r\n             <Typography>Goals: {form?.treatment_plan?.patient_goals}</Typography>\r\n@@ -63,47 +68,12 @@\n             <Typography>\r\n               Treatment Date: {new Date(form?.treatment_plan?.date).toLocaleDateString()}\r\n             </Typography>\r\n             <img src={form?.treatment_plan?.patient_sign} alt=\"Patient Signature\" style={{ width: \"100px\", marginTop: \"10px\" }} />\r\n-            \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">Treatment Records</Typography>\r\n-            {form?.treatment_record?.map((record) => (\r\n-              <Typography key={record._id}>{record.description} - ${record.amount}</Typography>\r\n-            ))}\r\n-            \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">Images</Typography>\r\n-            <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\" }}>\r\n-              {form?.before_images?.map((img, index) => (\r\n-                <img key={index} src={img} alt=\"Before\" style={{ width: \"80px\" }} />\r\n-              ))}\r\n-              {form?.after_images?.map((img, index) => (\r\n-                <img key={index} src={img} alt=\"After\" style={{ width: \"80px\" }} />\r\n-              ))}\r\n-            </div>\r\n-            \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">Further Treatment</Typography>\r\n-            {form?.further_treatment?.map((treatment, index) => (\r\n-              <img key={index} src={treatment.sign} alt=\"Further Treatment Signature\" style={{ width: \"100px\" }} />\r\n-            ))}\r\n-            \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">Patient Consent</Typography>\r\n-            <img src={form?.patient_consent?.sign} alt=\"Patient Consent Signature\" style={{ width: \"100px\" }} />\r\n-            \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">Side Effects</Typography>\r\n-            <Typography>Details: {form?.side_effect?.details || \"N/A\"}</Typography>\r\n-            \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">Extra Notes</Typography>\r\n-            <Typography>{form?.extra_notes || \"N/A\"}</Typography>\r\n           </CardContent>\r\n         </Card>\r\n       </PDFExport>\r\n     </div>\r\n   );\r\n };\r\n \r\n-export default PatientPDF;\r\n+export default PatientPDF;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1743670810385,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,8 +38,9 @@\n               <Grid item xs={4}><Typography>Phone: {form?.phone}</Typography></Grid>\r\n               <Grid item xs={4}><Typography>Address: {form?.address}</Typography></Grid>\r\n               <Grid item xs={4}><Typography>Post Code: {form?.post_code}</Typography></Grid>\r\n               <Grid item xs={4}><Typography>Email: {form?.email}</Typography></Grid>\r\n+              <Grid item xs={12}><Typography>Notes: {form?.notes}</Typography></Grid>\r\n             </Grid>\r\n             \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Next of Kin</Typography>\r\n@@ -68,12 +69,47 @@\n             <Typography>\r\n               Treatment Date: {new Date(form?.treatment_plan?.date).toLocaleDateString()}\r\n             </Typography>\r\n             <img src={form?.treatment_plan?.patient_sign} alt=\"Patient Signature\" style={{ width: \"100px\", marginTop: \"10px\" }} />\r\n+\r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n+            <Typography variant=\"h6\">Treatment Records</Typography>\r\n+            {form?.treatment_record?.map((record) => (\r\n+              <Typography key={record._id}>{record.description} - ${record.amount}</Typography>\r\n+            ))}\r\n+            \r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n\\ No newline at end of file\n+            <Typography variant=\"h6\">Images</Typography>\r\n+            <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\" }}>\r\n+              {form?.before_images?.map((img, index) => (\r\n+                <img key={index} src={img} alt=\"Before\" style={{ width: \"80px\" }} />\r\n+              ))}\r\n+              {form?.after_images?.map((img, index) => (\r\n+                <img key={index} src={img} alt=\"After\" style={{ width: \"80px\" }} />\r\n+              ))}\r\n+            </div>\r\n+\r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n+            <Typography variant=\"h6\">Further Treatment</Typography>\r\n+            {form?.further_treatment?.map((treatment, index) => (\r\n+              <img key={index} src={treatment.sign} alt=\"Further Treatment Signature\" style={{ width: \"100px\" }} />\r\n+            ))}\r\n+            \r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n+            <Typography variant=\"h6\">Patient Consent</Typography>\r\n+            <img src={form?.patient_consent?.sign} alt=\"Patient Consent Signature\" style={{ width: \"100px\" }} />\r\n+            \r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n+            <Typography variant=\"h6\">Side Effects</Typography>\r\n+            <Typography>Details: {form?.side_effect?.details || \"N/A\"}</Typography>\r\n+            \r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n+            <Typography variant=\"h6\">Extra Notes</Typography>\r\n+            <Typography>{form?.extra_notes || \"N/A\"}</Typography>\r\n           </CardContent>\r\n         </Card>\r\n       </PDFExport>\r\n     </div>\r\n   );\r\n };\r\n \r\n-export default PatientPDF;\n+export default PatientPDF;\r\n"
                },
                {
                    "date": 1743670948823,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,30 +60,23 @@\n               <Grid item xs={4}><Typography>Email: {form?.general_practitioner?.email}</Typography></Grid>\r\n             </Grid>\r\n \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">Treatment Plan</Typography>\r\n-            <Typography>Concerns: {form?.treatment_plan?.patient_concerns}</Typography>\r\n-            <Typography>Goals: {form?.treatment_plan?.patient_goals}</Typography>\r\n-            <Typography>Plan: {form?.treatment_plan?.advised_plan}</Typography>\r\n-            <Typography>Expected Result: {form?.treatment_plan?.expected_result}</Typography>\r\n-            <Typography>\r\n-              Treatment Date: {new Date(form?.treatment_plan?.date).toLocaleDateString()}\r\n-            </Typography>\r\n-            <img src={form?.treatment_plan?.patient_sign} alt=\"Patient Signature\" style={{ width: \"100px\", marginTop: \"10px\" }} />\r\n-\r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">Treatment Records</Typography>\r\n-            {form?.treatment_record?.map((record) => (\r\n-              <Typography key={record._id}>{record.description} - ${record.amount}</Typography>\r\n-            ))}\r\n-            \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Images</Typography>\r\n-            <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\" }}>\r\n+            <Typography variant=\"subtitle1\">Batch Images</Typography>\r\n+            <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n+              {form?.batch_images?.map((img, index) => (\r\n+                <img key={index} src={img} alt=\"Batch\" style={{ width: \"80px\" }} />\r\n+              ))}\r\n+            </div>\r\n+            <Typography variant=\"subtitle1\">Before Images</Typography>\r\n+            <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n               {form?.before_images?.map((img, index) => (\r\n                 <img key={index} src={img} alt=\"Before\" style={{ width: \"80px\" }} />\r\n               ))}\r\n+            </div>\r\n+            <Typography variant=\"subtitle1\">After Images</Typography>\r\n+            <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n               {form?.after_images?.map((img, index) => (\r\n                 <img key={index} src={img} alt=\"After\" style={{ width: \"80px\" }} />\r\n               ))}\r\n             </div>\r\n@@ -92,24 +85,18 @@\n             <Typography variant=\"h6\">Further Treatment</Typography>\r\n             {form?.further_treatment?.map((treatment, index) => (\r\n               <img key={index} src={treatment.sign} alt=\"Further Treatment Signature\" style={{ width: \"100px\" }} />\r\n             ))}\r\n-            \r\n+\r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">Patient Consent</Typography>\r\n-            <img src={form?.patient_consent?.sign} alt=\"Patient Consent Signature\" style={{ width: \"100px\" }} />\r\n-            \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">Side Effects</Typography>\r\n-            <Typography>Details: {form?.side_effect?.details || \"N/A\"}</Typography>\r\n-            \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">Extra Notes</Typography>\r\n-            <Typography>{form?.extra_notes || \"N/A\"}</Typography>\r\n+            <Typography variant=\"h6\">Treatment Records</Typography>\r\n+            {form?.treatment_record?.map((record) => (\r\n+              <Typography key={record._id}>{record.description} - ${record.amount}</Typography>\r\n+            ))}\r\n           </CardContent>\r\n         </Card>\r\n       </PDFExport>\r\n\\ No newline at end of file\n     </div>\r\n   );\r\n };\r\n \r\n-export default PatientPDF;\n+export default PatientPDF;\r\n"
                },
                {
                    "date": 1743671041087,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,7 @@\n import React, { useRef } from \"react\";\r\n import { PDFExport } from \"@progress/kendo-react-pdf\";\r\n-import { Button, Card, CardContent, Typography, Divider, Grid } from \"@mui/material\";\r\n+import { Button, Card, CardContent, Typography, Divider, Grid, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from \"@mui/material\";\r\n \r\n const PatientPDF = ({ form }) => {\r\n   console.log(form);\r\n \r\n@@ -81,22 +81,33 @@\n               ))}\r\n             </div>\r\n \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n-            <Typography variant=\"h6\">Further Treatment</Typography>\r\n-            {form?.further_treatment?.map((treatment, index) => (\r\n-              <img key={index} src={treatment.sign} alt=\"Further Treatment Signature\" style={{ width: \"100px\" }} />\r\n-            ))}\r\n-\r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n             <Typography variant=\"h6\">Treatment Records</Typography>\r\n-            {form?.treatment_record?.map((record) => (\r\n-              <Typography key={record._id}>{record.description} - ${record.amount}</Typography>\r\n-            ))}\r\n+            <TableContainer>\r\n+              <Table>\r\n+                <TableHead>\r\n+                  <TableRow>\r\n+                    <TableCell>Date</TableCell>\r\n+                    <TableCell>Description</TableCell>\r\n+                    <TableCell>Amount</TableCell>\r\n+                  </TableRow>\r\n\\ No newline at end of file\n+                </TableHead>\r\n+                <TableBody>\r\n+                  {form?.treatment_record?.map((record, index) => (\r\n+                    <TableRow key={index}>\r\n+                      <TableCell>{new Date(record.date).toLocaleDateString()}</TableCell>\r\n+                      <TableCell>{record.description}</TableCell>\r\n+                      <TableCell>${record.amount}</TableCell>\r\n+                    </TableRow>\r\n+                  ))}\r\n+                </TableBody>\r\n+              </Table>\r\n+            </TableContainer>\r\n           </CardContent>\r\n         </Card>\r\n       </PDFExport>\r\n     </div>\r\n   );\r\n };\r\n \r\n-export default PatientPDF;\n+export default PatientPDF;\r\n"
                },
                {
                    "date": 1743671057696,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -95,10 +95,11 @@\n                 <TableBody>\r\n                   {form?.treatment_record?.map((record, index) => (\r\n                     <TableRow key={index}>\r\n                       <TableCell>{new Date(record.date).toLocaleDateString()}</TableCell>\r\n+                      <TableCell>${record.amount}</TableCell>\r\n                       <TableCell>{record.description}</TableCell>\r\n-                      <TableCell>${record.amount}</TableCell>\r\n+                    \r\n                     </TableRow>\r\n                   ))}\r\n                 </TableBody>\r\n               </Table>\r\n@@ -109,5 +110,5 @@\n     </div>\r\n   );\r\n };\r\n \r\n-export default PatientPDF;\n\\ No newline at end of file\n+export default PatientPDF;\r\n"
                },
                {
                    "date": 1743671064328,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,10 +87,11 @@\n               <Table>\r\n                 <TableHead>\r\n                   <TableRow>\r\n                     <TableCell>Date</TableCell>\r\n+                    <TableCell>Amount</TableCell>\r\n                     <TableCell>Description</TableCell>\r\n-                    <TableCell>Amount</TableCell>\r\n+                   \r\n                   </TableRow>\r\n                 </TableHead>\r\n                 <TableBody>\r\n                   {form?.treatment_record?.map((record, index) => (\r\n"
                },
                {
                    "date": 1743671221656,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,10 +2,8 @@\n import { PDFExport } from \"@progress/kendo-react-pdf\";\r\n import { Button, Card, CardContent, Typography, Divider, Grid, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from \"@mui/material\";\r\n \r\n const PatientPDF = ({ form }) => {\r\n-  console.log(form);\r\n-\r\n   const pdfExportComponent = useRef(null);\r\n \r\n   const handleExportWithComponent = () => {\r\n     if (pdfExportComponent.current) {\r\n@@ -30,38 +28,57 @@\n               Patient Report\r\n             </Typography>\r\n             <Divider />\r\n \r\n+            {/* Patient Information Section */}\r\n             <Typography variant=\"h6\">Patient Information</Typography>\r\n             <Grid container spacing={2}>\r\n-              <Grid item xs={4}><Typography>Name: {form?.first_name} {form?.last_name}</Typography></Grid>\r\n-              <Grid item xs={4}><Typography>DOB: {new Date(form?.dob).toLocaleDateString()}</Typography></Grid>\r\n-              <Grid item xs={4}><Typography>Phone: {form?.phone}</Typography></Grid>\r\n-              <Grid item xs={4}><Typography>Address: {form?.address}</Typography></Grid>\r\n-              <Grid item xs={4}><Typography>Post Code: {form?.post_code}</Typography></Grid>\r\n-              <Grid item xs={4}><Typography>Email: {form?.email}</Typography></Grid>\r\n+              <Grid item xs={6}><Typography>Name: {form?.first_name} {form?.last_name}</Typography></Grid>\r\n+              <Grid item xs={6}><Typography>DOB: {new Date(form?.dob).toLocaleDateString()}</Typography></Grid>\r\n+              <Grid item xs={6}><Typography>Phone: {form?.phone}</Typography></Grid>\r\n+              <Grid item xs={6}><Typography>Email: {form?.email}</Typography></Grid>\r\n+              <Grid item xs={12}><Typography>Address: {form?.address}, {form?.post_code}</Typography></Grid>\r\n               <Grid item xs={12}><Typography>Notes: {form?.notes}</Typography></Grid>\r\n             </Grid>\r\n-            \r\n+\r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n+\r\n+            {/* Next of Kin Information */}\r\n             <Typography variant=\"h6\">Next of Kin</Typography>\r\n             <Grid container spacing={2}>\r\n-              <Grid item xs={4}><Typography>Name: {form?.kin_details?.name}</Typography></Grid>\r\n-              <Grid item xs={4}><Typography>Address: {form?.kin_details?.address}</Typography></Grid>\r\n-              <Grid item xs={4}><Typography>Phone: {form?.kin_details?.phone}</Typography></Grid>\r\n-              <Grid item xs={4}><Typography>Email: {form?.kin_details?.email}</Typography></Grid>\r\n+              <Grid item xs={6}><Typography>Name: {form?.kin_details?.name}</Typography></Grid>\r\n+              <Grid item xs={6}><Typography>Phone: {form?.kin_details?.phone}</Typography></Grid>\r\n+              <Grid item xs={12}><Typography>Address: {form?.kin_details?.address}</Typography></Grid>\r\n+              <Grid item xs={12}><Typography>Email: {form?.kin_details?.email}</Typography></Grid>\r\n             </Grid>\r\n \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n+\r\n+            {/* General Practitioner Information */}\r\n             <Typography variant=\"h6\">General Practitioner</Typography>\r\n             <Grid container spacing={2}>\r\n-              <Grid item xs={4}><Typography>Name: {form?.general_practitioner?.name}</Typography></Grid>\r\n-              <Grid item xs={4}><Typography>Address: {form?.general_practitioner?.address}</Typography></Grid>\r\n-              <Grid item xs={4}><Typography>Phone: {form?.general_practitioner?.phone}</Typography></Grid>\r\n-              <Grid item xs={4}><Typography>Email: {form?.general_practitioner?.email}</Typography></Grid>\r\n+              <Grid item xs={6}><Typography>Name: {form?.general_practitioner?.name}</Typography></Grid>\r\n+              <Grid item xs={6}><Typography>Phone: {form?.general_practitioner?.phone}</Typography></Grid>\r\n+              <Grid item xs={12}><Typography>Address: {form?.general_practitioner?.address}</Typography></Grid>\r\n+              <Grid item xs={12}><Typography>Email: {form?.general_practitioner?.email}</Typography></Grid>\r\n             </Grid>\r\n \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n+\r\n+            {/* Treatment Plan */}\r\n+            <Typography variant=\"h6\">Treatment Plan</Typography>\r\n+            <Grid container spacing={2}>\r\n+              <Grid item xs={12}><Typography>Concerns: {form?.treatment_plan?.patient_concerns}</Typography></Grid>\r\n+              <Grid item xs={12}><Typography>Goals: {form?.treatment_plan?.patient_goals}</Typography></Grid>\r\n+              <Grid item xs={12}><Typography>Advised Plan: {form?.treatment_plan?.advised_plan}</Typography></Grid>\r\n+              <Grid item xs={12}><Typography>Expected Result: {form?.treatment_plan?.expected_result}</Typography></Grid>\r\n+              <Grid item xs={12}><Typography>Date: {new Date(form?.treatment_plan?.date).toLocaleDateString()}</Typography></Grid>\r\n+              <Grid item xs={12}><img src={form?.treatment_plan?.patient_sign} alt=\"Treatment Plan Sign\" style={{ width: \"200px\" }} /></Grid>\r\n+            </Grid>\r\n+\r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n+\r\n+            {/* Images Section */}\r\n             <Typography variant=\"h6\">Images</Typography>\r\n             <Typography variant=\"subtitle1\">Batch Images</Typography>\r\n             <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n               {form?.batch_images?.map((img, index) => (\r\n@@ -81,31 +98,68 @@\n               ))}\r\n             </div>\r\n \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n+\r\n+            {/* Treatment Records Table */}\r\n             <Typography variant=\"h6\">Treatment Records</Typography>\r\n             <TableContainer>\r\n               <Table>\r\n                 <TableHead>\r\n                   <TableRow>\r\n                     <TableCell>Date</TableCell>\r\n+                    <TableCell>Description</TableCell>\r\n                     <TableCell>Amount</TableCell>\r\n-                    <TableCell>Description</TableCell>\r\n-                   \r\n                   </TableRow>\r\n                 </TableHead>\r\n                 <TableBody>\r\n                   {form?.treatment_record?.map((record, index) => (\r\n                     <TableRow key={index}>\r\n-                      <TableCell>{new Date(record.date).toLocaleDateString()}</TableCell>\r\n+                      <TableCell>{new Date(record.treatment_date).toLocaleDateString()}</TableCell>\r\n+                      <TableCell>{record.description}</TableCell>\r\n                       <TableCell>${record.amount}</TableCell>\r\n-                      <TableCell>{record.description}</TableCell>\r\n-                    \r\n                     </TableRow>\r\n                   ))}\r\n                 </TableBody>\r\n               </Table>\r\n             </TableContainer>\r\n+\r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n+\r\n+            {/* Further Treatment Section */}\r\n+            <Typography variant=\"h6\">Further Treatment</Typography>\r\n+            <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n+              {form?.further_treatment?.map((treatment, index) => (\r\n+                <img key={index} src={treatment?.sign} alt=\"Further Treatment Sign\" style={{ width: \"200px\" }} />\r\n+              ))}\r\n+            </div>\r\n+\r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n+\r\n+            {/* Patient Consent */}\r\n+            <Typography variant=\"h6\">Patient Consent</Typography>\r\n+            <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n+              <img src={form?.patient_consent?.sign} alt=\"Patient Consent Sign\" style={{ width: \"200px\" }} />\r\n+            </div>\r\n+\r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n+\r\n+            {/* Side Effect Details */}\r\n+            <Typography variant=\"h6\">Side Effects</Typography>\r\n+            <Typography>{form?.side_effect?.details || \"No side effects reported\"}</Typography>\r\n+\r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n+\r\n+            {/* Extra Notes */}\r\n+            <Typography variant=\"h6\">Extra Notes</Typography>\r\n+            <Typography>{form?.extra_notes || \"No extra notes available.\"}</Typography>\r\n+\r\n+            <Divider style={{ margin: \"10px 0\" }} />\r\n+\r\n+            {/* Completion Status */}\r\n+            <Typography variant=\"h6\">Completion Status</Typography>\r\n+            <Typography>{form?.is_completed ? \"Completed\" : \"Not Completed\"}</Typography>\r\n+            <Typography>{form?.completed_at ? `Completed At: ${new Date(form?.completed_at).toLocaleString()}` : \"Not yet completed\"}</Typography>\r\n           </CardContent>\r\n         </Card>\r\n       </PDFExport>\r\n     </div>\r\n"
                },
                {
                    "date": 1743675333385,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,11 +1,56 @@\n-import React, { useRef } from \"react\";\r\n+import React, { useRef, useState, useEffect } from \"react\";\r\n import { PDFExport } from \"@progress/kendo-react-pdf\";\r\n import { Button, Card, CardContent, Typography, Divider, Grid, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from \"@mui/material\";\r\n \r\n+// Function to convert image URL to Base64\r\n+const toBase64 = (url) => {\r\n+  return new Promise((resolve, reject) => {\r\n+    const img = new Image();\r\n+    img.crossOrigin = \"Anonymous\"; // Allow cross-origin requests\r\n+    img.onload = () => {\r\n+      const canvas = document.createElement(\"canvas\");\r\n+      canvas.width = img.width;\r\n+      canvas.height = img.height;\r\n+      const ctx = canvas.getContext(\"2d\");\r\n+      ctx.drawImage(img, 0, 0);\r\n+      resolve(canvas.toDataURL());\r\n+    };\r\n+    img.onerror = reject;\r\n+    img.src = url;\r\n+  });\r\n+};\r\n+\r\n const PatientPDF = ({ form }) => {\r\n   const pdfExportComponent = useRef(null);\r\n+  const [batchImagesBase64, setBatchImagesBase64] = useState([]);\r\n+  const [beforeImagesBase64, setBeforeImagesBase64] = useState([]);\r\n+  const [afterImagesBase64, setAfterImagesBase64] = useState([]);\r\n+  const [furtherTreatmentBase64, setFurtherTreatmentBase64] = useState([]);\r\n+  const [patientConsentBase64, setPatientConsentBase64] = useState([]);\r\n \r\n+  useEffect(() => {\r\n+    const fetchImagesAsBase64 = async () => {\r\n+      try {\r\n+        const batchImages = await Promise.all(form?.batch_images?.map(toBase64) || []);\r\n+        const beforeImages = await Promise.all(form?.before_images?.map(toBase64) || []);\r\n+        const afterImages = await Promise.all(form?.after_images?.map(toBase64) || []);\r\n+        const furtherTreatment = await Promise.all(form?.further_treatment?.map(treatment => toBase64(treatment?.sign)) || []);\r\n+        const patientConsent = await toBase64(form?.patient_consent?.sign);\r\n+\r\n+        setBatchImagesBase64(batchImages);\r\n+        setBeforeImagesBase64(beforeImages);\r\n+        setAfterImagesBase64(afterImages);\r\n+        setFurtherTreatmentBase64(furtherTreatment);\r\n+        setPatientConsentBase64(patientConsent);\r\n+      } catch (error) {\r\n+        console.error(\"Error converting images to base64:\", error);\r\n+      }\r\n+    };\r\n+\r\n+    fetchImagesAsBase64();\r\n+  }, [form]);\r\n+\r\n   const handleExportWithComponent = () => {\r\n     if (pdfExportComponent.current) {\r\n       pdfExportComponent.current.save();\r\n     }\r\n@@ -80,21 +125,21 @@\n             {/* Images Section */}\r\n             <Typography variant=\"h6\">Images</Typography>\r\n             <Typography variant=\"subtitle1\">Batch Images</Typography>\r\n             <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-              {form?.batch_images?.map((img, index) => (\r\n+              {batchImagesBase64?.map((img, index) => (\r\n                 <img key={index} src={img} alt=\"Batch\" style={{ width: \"80px\" }} />\r\n               ))}\r\n             </div>\r\n             <Typography variant=\"subtitle1\">Before Images</Typography>\r\n             <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-              {form?.before_images?.map((img, index) => (\r\n+              {beforeImagesBase64?.map((img, index) => (\r\n                 <img key={index} src={img} alt=\"Before\" style={{ width: \"80px\" }} />\r\n               ))}\r\n             </div>\r\n             <Typography variant=\"subtitle1\">After Images</Typography>\r\n             <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-              {form?.after_images?.map((img, index) => (\r\n+              {afterImagesBase64?.map((img, index) => (\r\n                 <img key={index} src={img} alt=\"After\" style={{ width: \"80px\" }} />\r\n               ))}\r\n             </div>\r\n \r\n@@ -127,19 +172,19 @@\n \r\n             {/* Further Treatment Section */}\r\n             <Typography variant=\"h6\">Further Treatment</Typography>\r\n             <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-              {form?.further_treatment?.map((treatment, index) => (\r\n-                <img key={index} src={treatment?.sign} alt=\"Further Treatment Sign\" style={{ width: \"200px\" }} />\r\n+              {furtherTreatmentBase64?.map((treatment, index) => (\r\n+                <img key={index} src={treatment} alt=\"Further Treatment Sign\" style={{ width: \"200px\" }} />\r\n               ))}\r\n             </div>\r\n \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n \r\n             {/* Patient Consent */}\r\n             <Typography variant=\"h6\">Patient Consent</Typography>\r\n             <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-              <img src={form?.patient_consent?.sign} alt=\"Patient Consent Sign\" style={{ width: \"200px\" }} />\r\n+              <img src={patientConsentBase64} alt=\"Patient Consent Sign\" style={{ width: \"200px\" }} />\r\n             </div>\r\n \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n \r\n"
                },
                {
                    "date": 1743675475211,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,9 +25,9 @@\n   const [batchImagesBase64, setBatchImagesBase64] = useState([]);\r\n   const [beforeImagesBase64, setBeforeImagesBase64] = useState([]);\r\n   const [afterImagesBase64, setAfterImagesBase64] = useState([]);\r\n   const [furtherTreatmentBase64, setFurtherTreatmentBase64] = useState([]);\r\n-  const [patientConsentBase64, setPatientConsentBase64] = useState([]);\r\n+  const [patientConsentBase64, setPatientConsentBase64] = useState();\r\n \r\n   useEffect(() => {\r\n     const fetchImagesAsBase64 = async () => {\r\n       try {\r\n"
                },
                {
                    "date": 1743675612948,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-import React, { useRef, useState, useEffect } from \"react\";\r\n+import React, { useRef, useEffect, useState } from \"react\";\r\n import { PDFExport } from \"@progress/kendo-react-pdf\";\r\n import { Button, Card, CardContent, Typography, Divider, Grid, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from \"@mui/material\";\r\n \r\n // Function to convert image URL to Base64\r\n@@ -21,28 +21,32 @@\n };\r\n \r\n const PatientPDF = ({ form }) => {\r\n   const pdfExportComponent = useRef(null);\r\n-  const [batchImagesBase64, setBatchImagesBase64] = useState([]);\r\n-  const [beforeImagesBase64, setBeforeImagesBase64] = useState([]);\r\n-  const [afterImagesBase64, setAfterImagesBase64] = useState([]);\r\n-  const [furtherTreatmentBase64, setFurtherTreatmentBase64] = useState([]);\r\n-  const [patientConsentBase64, setPatientConsentBase64] = useState();\r\n+  const [imagesBase64, setImagesBase64] = useState({});\r\n \r\n   useEffect(() => {\r\n     const fetchImagesAsBase64 = async () => {\r\n       try {\r\n-        const batchImages = await Promise.all(form?.batch_images?.map(toBase64) || []);\r\n-        const beforeImages = await Promise.all(form?.before_images?.map(toBase64) || []);\r\n-        const afterImages = await Promise.all(form?.after_images?.map(toBase64) || []);\r\n-        const furtherTreatment = await Promise.all(form?.further_treatment?.map(treatment => toBase64(treatment?.sign)) || []);\r\n-        const patientConsent = await toBase64(form?.patient_consent?.sign);\r\n+        const imageUrls = {\r\n+          batch: form?.batch_images || [],\r\n+          before: form?.before_images || [],\r\n+          after: form?.after_images || [],\r\n+          furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n+          patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n+        };\r\n \r\n-        setBatchImagesBase64(batchImages);\r\n-        setBeforeImagesBase64(beforeImages);\r\n-        setAfterImagesBase64(afterImages);\r\n-        setFurtherTreatmentBase64(furtherTreatment);\r\n-        setPatientConsentBase64(patientConsent);\r\n+        // Convert each image URL to Base64\r\n+        const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n+          const urls = imageUrls[key];\r\n+          const base64Images = await Promise.all(urls.map(url => toBase64(url)));\r\n+          return { [key]: base64Images };\r\n+        });\r\n+\r\n+        // Set all images as Base64 in the state\r\n+        const base64Data = await Promise.all(imagePromises);\r\n+        const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n+        setImagesBase64(allImages);\r\n       } catch (error) {\r\n         console.error(\"Error converting images to base64:\", error);\r\n       }\r\n     };\r\n@@ -125,21 +129,21 @@\n             {/* Images Section */}\r\n             <Typography variant=\"h6\">Images</Typography>\r\n             <Typography variant=\"subtitle1\">Batch Images</Typography>\r\n             <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-              {batchImagesBase64?.map((img, index) => (\r\n+              {imagesBase64?.batch?.map((img, index) => (\r\n                 <img key={index} src={img} alt=\"Batch\" style={{ width: \"80px\" }} />\r\n               ))}\r\n             </div>\r\n             <Typography variant=\"subtitle1\">Before Images</Typography>\r\n             <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-              {beforeImagesBase64?.map((img, index) => (\r\n+              {imagesBase64?.before?.map((img, index) => (\r\n                 <img key={index} src={img} alt=\"Before\" style={{ width: \"80px\" }} />\r\n               ))}\r\n             </div>\r\n             <Typography variant=\"subtitle1\">After Images</Typography>\r\n             <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-              {afterImagesBase64?.map((img, index) => (\r\n+              {imagesBase64?.after?.map((img, index) => (\r\n                 <img key={index} src={img} alt=\"After\" style={{ width: \"80px\" }} />\r\n               ))}\r\n             </div>\r\n \r\n@@ -172,9 +176,9 @@\n \r\n             {/* Further Treatment Section */}\r\n             <Typography variant=\"h6\">Further Treatment</Typography>\r\n             <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-              {furtherTreatmentBase64?.map((treatment, index) => (\r\n+              {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n                 <img key={index} src={treatment} alt=\"Further Treatment Sign\" style={{ width: \"200px\" }} />\r\n               ))}\r\n             </div>\r\n \r\n@@ -182,9 +186,9 @@\n \r\n             {/* Patient Consent */}\r\n             <Typography variant=\"h6\">Patient Consent</Typography>\r\n             <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-              <img src={patientConsentBase64} alt=\"Patient Consent Sign\" style={{ width: \"200px\" }} />\r\n+              <img src={imagesBase64?.patientConsent?.[0]} alt=\"Patient Consent Sign\" style={{ width: \"200px\" }} />\r\n             </div>\r\n \r\n             <Divider style={{ margin: \"10px 0\" }} />\r\n \r\n"
                },
                {
                    "date": 1743675696656,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,8 +33,9 @@\n           after: form?.after_images || [],\r\n           furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n           patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n         };\r\n+console.log(imageUrls,'imageUrls');\r\n \r\n         // Convert each image URL to Base64\r\n         const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n           const urls = imageUrls[key];\r\n"
                },
                {
                    "date": 1743675969796,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,217 +3,221 @@\n import { Button, Card, CardContent, Typography, Divider, Grid, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from \"@mui/material\";\r\n \r\n // Function to convert image URL to Base64\r\n const toBase64 = (url) => {\r\n-  return new Promise((resolve, reject) => {\r\n-    const img = new Image();\r\n-    img.crossOrigin = \"Anonymous\"; // Allow cross-origin requests\r\n-    img.onload = () => {\r\n-      const canvas = document.createElement(\"canvas\");\r\n-      canvas.width = img.width;\r\n-      canvas.height = img.height;\r\n-      const ctx = canvas.getContext(\"2d\");\r\n-      ctx.drawImage(img, 0, 0);\r\n-      resolve(canvas.toDataURL());\r\n-    };\r\n-    img.onerror = reject;\r\n-    img.src = url;\r\n-  });\r\n+    return new Promise((resolve, reject) => {\r\n+        const proxyUrl = \"https://corsproxy.io/?url=\"; // Using the provided CORS proxy\r\n+        const imgUrl = proxyUrl + encodeURIComponent(url); // Encode the URL to pass as a query parameter\r\n+\r\n+        const img = new Image();\r\n+        img.crossOrigin = \"Anonymous\"; // Allow cross-origin requests\r\n+        img.onload = () => {\r\n+            const canvas = document.createElement(\"canvas\");\r\n+            canvas.width = img.width;\r\n+            canvas.height = img.height;\r\n+            const ctx = canvas.getContext(\"2d\");\r\n+            ctx.drawImage(img, 0, 0);\r\n+            resolve(canvas.toDataURL());\r\n+        };\r\n+        img.onerror = reject;\r\n+        img.src = imgUrl; // Use the proxy URL + original image URL\r\n+    });\r\n };\r\n \r\n+\r\n const PatientPDF = ({ form }) => {\r\n-  const pdfExportComponent = useRef(null);\r\n-  const [imagesBase64, setImagesBase64] = useState({});\r\n+    const pdfExportComponent = useRef(null);\r\n+    const [imagesBase64, setImagesBase64] = useState({});\r\n \r\n-  useEffect(() => {\r\n-    const fetchImagesAsBase64 = async () => {\r\n-      try {\r\n-        const imageUrls = {\r\n-          batch: form?.batch_images || [],\r\n-          before: form?.before_images || [],\r\n-          after: form?.after_images || [],\r\n-          furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n-          patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n+    useEffect(() => {\r\n+        const fetchImagesAsBase64 = async () => {\r\n+            try {\r\n+                const imageUrls = {\r\n+                    batch: form?.batch_images || [],\r\n+                    before: form?.before_images || [],\r\n+                    after: form?.after_images || [],\r\n+                    furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n+                    patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n+                };\r\n+                console.log(imageUrls, 'imageUrls');\r\n+\r\n+                // Convert each image URL to Base64\r\n+                const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n+                    const urls = imageUrls[key];\r\n+                    const base64Images = await Promise.all(urls.map(url => toBase64(url)));\r\n+                    return { [key]: base64Images };\r\n+                });\r\n+\r\n+                // Set all images as Base64 in the state\r\n+                const base64Data = await Promise.all(imagePromises);\r\n+                const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n+                setImagesBase64(allImages);\r\n+            } catch (error) {\r\n+                console.error(\"Error converting images to base64:\", error);\r\n+            }\r\n         };\r\n-console.log(imageUrls,'imageUrls');\r\n \r\n-        // Convert each image URL to Base64\r\n-        const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n-          const urls = imageUrls[key];\r\n-          const base64Images = await Promise.all(urls.map(url => toBase64(url)));\r\n-          return { [key]: base64Images };\r\n-        });\r\n+        fetchImagesAsBase64();\r\n+    }, [form]);\r\n \r\n-        // Set all images as Base64 in the state\r\n-        const base64Data = await Promise.all(imagePromises);\r\n-        const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n-        setImagesBase64(allImages);\r\n-      } catch (error) {\r\n-        console.error(\"Error converting images to base64:\", error);\r\n-      }\r\n+    const handleExportWithComponent = () => {\r\n+        if (pdfExportComponent.current) {\r\n+            pdfExportComponent.current.save();\r\n+        }\r\n     };\r\n \r\n-    fetchImagesAsBase64();\r\n-  }, [form]);\r\n+    return (\r\n+        <div>\r\n+            <Button\r\n+                variant=\"contained\"\r\n+                color=\"primary\"\r\n+                onClick={handleExportWithComponent}\r\n+                style={{ marginBottom: \"10px\" }}\r\n+            >\r\n+                Download PDF\r\n+            </Button>\r\n+            <PDFExport ref={pdfExportComponent} paperSize=\"A4\">\r\n+                <Card style={{ padding: \"20px\", maxWidth: \"800px\", margin: \"auto\" }}>\r\n+                    <CardContent>\r\n+                        <Typography variant=\"h5\" gutterBottom>\r\n+                            Patient Report\r\n+                        </Typography>\r\n+                        <Divider />\r\n \r\n-  const handleExportWithComponent = () => {\r\n-    if (pdfExportComponent.current) {\r\n-      pdfExportComponent.current.save();\r\n-    }\r\n-  };\r\n+                        {/* Patient Information Section */}\r\n+                        <Typography variant=\"h6\">Patient Information</Typography>\r\n+                        <Grid container spacing={2}>\r\n+                            <Grid item xs={6}><Typography>Name: {form?.first_name} {form?.last_name}</Typography></Grid>\r\n+                            <Grid item xs={6}><Typography>DOB: {new Date(form?.dob).toLocaleDateString()}</Typography></Grid>\r\n+                            <Grid item xs={6}><Typography>Phone: {form?.phone}</Typography></Grid>\r\n+                            <Grid item xs={6}><Typography>Email: {form?.email}</Typography></Grid>\r\n+                            <Grid item xs={12}><Typography>Address: {form?.address}, {form?.post_code}</Typography></Grid>\r\n+                            <Grid item xs={12}><Typography>Notes: {form?.notes}</Typography></Grid>\r\n+                        </Grid>\r\n \r\n-  return (\r\n-    <div>\r\n-      <Button\r\n-        variant=\"contained\"\r\n-        color=\"primary\"\r\n-        onClick={handleExportWithComponent}\r\n-        style={{ marginBottom: \"10px\" }}\r\n-      >\r\n-        Download PDF\r\n-      </Button>\r\n-      <PDFExport ref={pdfExportComponent} paperSize=\"A4\">\r\n-        <Card style={{ padding: \"20px\", maxWidth: \"800px\", margin: \"auto\" }}>\r\n-          <CardContent>\r\n-            <Typography variant=\"h5\" gutterBottom>\r\n-              Patient Report\r\n-            </Typography>\r\n-            <Divider />\r\n+                        <Divider style={{ margin: \"10px 0\" }} />\r\n \r\n-            {/* Patient Information Section */}\r\n-            <Typography variant=\"h6\">Patient Information</Typography>\r\n-            <Grid container spacing={2}>\r\n-              <Grid item xs={6}><Typography>Name: {form?.first_name} {form?.last_name}</Typography></Grid>\r\n-              <Grid item xs={6}><Typography>DOB: {new Date(form?.dob).toLocaleDateString()}</Typography></Grid>\r\n-              <Grid item xs={6}><Typography>Phone: {form?.phone}</Typography></Grid>\r\n-              <Grid item xs={6}><Typography>Email: {form?.email}</Typography></Grid>\r\n-              <Grid item xs={12}><Typography>Address: {form?.address}, {form?.post_code}</Typography></Grid>\r\n-              <Grid item xs={12}><Typography>Notes: {form?.notes}</Typography></Grid>\r\n-            </Grid>\r\n+                        {/* Next of Kin Information */}\r\n+                        <Typography variant=\"h6\">Next of Kin</Typography>\r\n+                        <Grid container spacing={2}>\r\n+                            <Grid item xs={6}><Typography>Name: {form?.kin_details?.name}</Typography></Grid>\r\n+                            <Grid item xs={6}><Typography>Phone: {form?.kin_details?.phone}</Typography></Grid>\r\n+                            <Grid item xs={12}><Typography>Address: {form?.kin_details?.address}</Typography></Grid>\r\n+                            <Grid item xs={12}><Typography>Email: {form?.kin_details?.email}</Typography></Grid>\r\n+                        </Grid>\r\n \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n+                        <Divider style={{ margin: \"10px 0\" }} />\r\n \r\n-            {/* Next of Kin Information */}\r\n-            <Typography variant=\"h6\">Next of Kin</Typography>\r\n-            <Grid container spacing={2}>\r\n-              <Grid item xs={6}><Typography>Name: {form?.kin_details?.name}</Typography></Grid>\r\n-              <Grid item xs={6}><Typography>Phone: {form?.kin_details?.phone}</Typography></Grid>\r\n-              <Grid item xs={12}><Typography>Address: {form?.kin_details?.address}</Typography></Grid>\r\n-              <Grid item xs={12}><Typography>Email: {form?.kin_details?.email}</Typography></Grid>\r\n-            </Grid>\r\n+                        {/* General Practitioner Information */}\r\n+                        <Typography variant=\"h6\">General Practitioner</Typography>\r\n+                        <Grid container spacing={2}>\r\n+                            <Grid item xs={6}><Typography>Name: {form?.general_practitioner?.name}</Typography></Grid>\r\n+                            <Grid item xs={6}><Typography>Phone: {form?.general_practitioner?.phone}</Typography></Grid>\r\n+                            <Grid item xs={12}><Typography>Address: {form?.general_practitioner?.address}</Typography></Grid>\r\n+                            <Grid item xs={12}><Typography>Email: {form?.general_practitioner?.email}</Typography></Grid>\r\n+                        </Grid>\r\n \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n+                        <Divider style={{ margin: \"10px 0\" }} />\r\n \r\n-            {/* General Practitioner Information */}\r\n-            <Typography variant=\"h6\">General Practitioner</Typography>\r\n-            <Grid container spacing={2}>\r\n-              <Grid item xs={6}><Typography>Name: {form?.general_practitioner?.name}</Typography></Grid>\r\n-              <Grid item xs={6}><Typography>Phone: {form?.general_practitioner?.phone}</Typography></Grid>\r\n-              <Grid item xs={12}><Typography>Address: {form?.general_practitioner?.address}</Typography></Grid>\r\n-              <Grid item xs={12}><Typography>Email: {form?.general_practitioner?.email}</Typography></Grid>\r\n-            </Grid>\r\n+                        {/* Treatment Plan */}\r\n+                        <Typography variant=\"h6\">Treatment Plan</Typography>\r\n+                        <Grid container spacing={2}>\r\n+                            <Grid item xs={12}><Typography>Concerns: {form?.treatment_plan?.patient_concerns}</Typography></Grid>\r\n+                            <Grid item xs={12}><Typography>Goals: {form?.treatment_plan?.patient_goals}</Typography></Grid>\r\n+                            <Grid item xs={12}><Typography>Advised Plan: {form?.treatment_plan?.advised_plan}</Typography></Grid>\r\n+                            <Grid item xs={12}><Typography>Expected Result: {form?.treatment_plan?.expected_result}</Typography></Grid>\r\n+                            <Grid item xs={12}><Typography>Date: {new Date(form?.treatment_plan?.date).toLocaleDateString()}</Typography></Grid>\r\n+                            <Grid item xs={12}><img src={form?.treatment_plan?.patient_sign} alt=\"Treatment Plan Sign\" style={{ width: \"200px\" }} /></Grid>\r\n+                        </Grid>\r\n \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n+                        <Divider style={{ margin: \"10px 0\" }} />\r\n \r\n-            {/* Treatment Plan */}\r\n-            <Typography variant=\"h6\">Treatment Plan</Typography>\r\n-            <Grid container spacing={2}>\r\n-              <Grid item xs={12}><Typography>Concerns: {form?.treatment_plan?.patient_concerns}</Typography></Grid>\r\n-              <Grid item xs={12}><Typography>Goals: {form?.treatment_plan?.patient_goals}</Typography></Grid>\r\n-              <Grid item xs={12}><Typography>Advised Plan: {form?.treatment_plan?.advised_plan}</Typography></Grid>\r\n-              <Grid item xs={12}><Typography>Expected Result: {form?.treatment_plan?.expected_result}</Typography></Grid>\r\n-              <Grid item xs={12}><Typography>Date: {new Date(form?.treatment_plan?.date).toLocaleDateString()}</Typography></Grid>\r\n-              <Grid item xs={12}><img src={form?.treatment_plan?.patient_sign} alt=\"Treatment Plan Sign\" style={{ width: \"200px\" }} /></Grid>\r\n-            </Grid>\r\n+                        {/* Images Section */}\r\n+                        <Typography variant=\"h6\">Images</Typography>\r\n+                        <Typography variant=\"subtitle1\">Batch Images</Typography>\r\n+                        <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n+                            {imagesBase64?.batch?.map((img, index) => (\r\n+                                <img key={index} src={img} alt=\"Batch\" style={{ width: \"80px\" }} />\r\n+                            ))}\r\n+                        </div>\r\n+                        <Typography variant=\"subtitle1\">Before Images</Typography>\r\n+                        <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n+                            {imagesBase64?.before?.map((img, index) => (\r\n+                                <img key={index} src={img} alt=\"Before\" style={{ width: \"80px\" }} />\r\n+                            ))}\r\n+                        </div>\r\n+                        <Typography variant=\"subtitle1\">After Images</Typography>\r\n+                        <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n+                            {imagesBase64?.after?.map((img, index) => (\r\n+                                <img key={index} src={img} alt=\"After\" style={{ width: \"80px\" }} />\r\n+                            ))}\r\n+                        </div>\r\n \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n+                        <Divider style={{ margin: \"10px 0\" }} />\r\n \r\n-            {/* Images Section */}\r\n-            <Typography variant=\"h6\">Images</Typography>\r\n-            <Typography variant=\"subtitle1\">Batch Images</Typography>\r\n-            <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-              {imagesBase64?.batch?.map((img, index) => (\r\n-                <img key={index} src={img} alt=\"Batch\" style={{ width: \"80px\" }} />\r\n-              ))}\r\n-            </div>\r\n-            <Typography variant=\"subtitle1\">Before Images</Typography>\r\n-            <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-              {imagesBase64?.before?.map((img, index) => (\r\n-                <img key={index} src={img} alt=\"Before\" style={{ width: \"80px\" }} />\r\n-              ))}\r\n-            </div>\r\n-            <Typography variant=\"subtitle1\">After Images</Typography>\r\n-            <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-              {imagesBase64?.after?.map((img, index) => (\r\n-                <img key={index} src={img} alt=\"After\" style={{ width: \"80px\" }} />\r\n-              ))}\r\n-            </div>\r\n+                        {/* Treatment Records Table */}\r\n+                        <Typography variant=\"h6\">Treatment Records</Typography>\r\n+                        <TableContainer>\r\n+                            <Table>\r\n+                                <TableHead>\r\n+                                    <TableRow>\r\n+                                        <TableCell>Date</TableCell>\r\n+                                        <TableCell>Description</TableCell>\r\n+                                        <TableCell>Amount</TableCell>\r\n+                                    </TableRow>\r\n+                                </TableHead>\r\n+                                <TableBody>\r\n+                                    {form?.treatment_record?.map((record, index) => (\r\n+                                        <TableRow key={index}>\r\n+                                            <TableCell>{new Date(record.treatment_date).toLocaleDateString()}</TableCell>\r\n+                                            <TableCell>{record.description}</TableCell>\r\n+                                            <TableCell>${record.amount}</TableCell>\r\n+                                        </TableRow>\r\n+                                    ))}\r\n+                                </TableBody>\r\n+                            </Table>\r\n+                        </TableContainer>\r\n \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n+                        <Divider style={{ margin: \"10px 0\" }} />\r\n \r\n-            {/* Treatment Records Table */}\r\n-            <Typography variant=\"h6\">Treatment Records</Typography>\r\n-            <TableContainer>\r\n-              <Table>\r\n-                <TableHead>\r\n-                  <TableRow>\r\n-                    <TableCell>Date</TableCell>\r\n-                    <TableCell>Description</TableCell>\r\n-                    <TableCell>Amount</TableCell>\r\n-                  </TableRow>\r\n-                </TableHead>\r\n-                <TableBody>\r\n-                  {form?.treatment_record?.map((record, index) => (\r\n-                    <TableRow key={index}>\r\n-                      <TableCell>{new Date(record.treatment_date).toLocaleDateString()}</TableCell>\r\n-                      <TableCell>{record.description}</TableCell>\r\n-                      <TableCell>${record.amount}</TableCell>\r\n-                    </TableRow>\r\n-                  ))}\r\n-                </TableBody>\r\n-              </Table>\r\n-            </TableContainer>\r\n+                        {/* Further Treatment Section */}\r\n+                        <Typography variant=\"h6\">Further Treatment</Typography>\r\n+                        <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n+                            {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n+                                <img key={index} src={treatment} alt=\"Further Treatment Sign\" style={{ width: \"200px\" }} />\r\n+                            ))}\r\n+                        </div>\r\n \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n+                        <Divider style={{ margin: \"10px 0\" }} />\r\n \r\n-            {/* Further Treatment Section */}\r\n-            <Typography variant=\"h6\">Further Treatment</Typography>\r\n-            <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-              {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                <img key={index} src={treatment} alt=\"Further Treatment Sign\" style={{ width: \"200px\" }} />\r\n-              ))}\r\n-            </div>\r\n+                        {/* Patient Consent */}\r\n+                        <Typography variant=\"h6\">Patient Consent</Typography>\r\n+                        <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n+                            <img src={imagesBase64?.patientConsent?.[0]} alt=\"Patient Consent Sign\" style={{ width: \"200px\" }} />\r\n+                        </div>\r\n \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n+                        <Divider style={{ margin: \"10px 0\" }} />\r\n \r\n-            {/* Patient Consent */}\r\n-            <Typography variant=\"h6\">Patient Consent</Typography>\r\n-            <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-              <img src={imagesBase64?.patientConsent?.[0]} alt=\"Patient Consent Sign\" style={{ width: \"200px\" }} />\r\n-            </div>\r\n+                        {/* Side Effect Details */}\r\n+                        <Typography variant=\"h6\">Side Effects</Typography>\r\n+                        <Typography>{form?.side_effect?.details || \"No side effects reported\"}</Typography>\r\n \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n+                        <Divider style={{ margin: \"10px 0\" }} />\r\n \r\n-            {/* Side Effect Details */}\r\n-            <Typography variant=\"h6\">Side Effects</Typography>\r\n-            <Typography>{form?.side_effect?.details || \"No side effects reported\"}</Typography>\r\n+                        {/* Extra Notes */}\r\n+                        <Typography variant=\"h6\">Extra Notes</Typography>\r\n+                        <Typography>{form?.extra_notes || \"No extra notes available.\"}</Typography>\r\n \r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n+                        <Divider style={{ margin: \"10px 0\" }} />\r\n \r\n-            {/* Extra Notes */}\r\n-            <Typography variant=\"h6\">Extra Notes</Typography>\r\n-            <Typography>{form?.extra_notes || \"No extra notes available.\"}</Typography>\r\n-\r\n-            <Divider style={{ margin: \"10px 0\" }} />\r\n-\r\n-            {/* Completion Status */}\r\n-            <Typography variant=\"h6\">Completion Status</Typography>\r\n-            <Typography>{form?.is_completed ? \"Completed\" : \"Not Completed\"}</Typography>\r\n-            <Typography>{form?.completed_at ? `Completed At: ${new Date(form?.completed_at).toLocaleString()}` : \"Not yet completed\"}</Typography>\r\n-          </CardContent>\r\n-        </Card>\r\n-      </PDFExport>\r\n-    </div>\r\n-  );\r\n+                        {/* Completion Status */}\r\n+                        <Typography variant=\"h6\">Completion Status</Typography>\r\n+                        <Typography>{form?.is_completed ? \"Completed\" : \"Not Completed\"}</Typography>\r\n+                        <Typography>{form?.completed_at ? `Completed At: ${new Date(form?.completed_at).toLocaleString()}` : \"Not yet completed\"}</Typography>\r\n+                    </CardContent>\r\n+                </Card>\r\n+            </PDFExport>\r\n+        </div>\r\n+    );\r\n };\r\n \r\n export default PatientPDF;\r\n"
                },
                {
                    "date": 1743676155030,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,9 +22,8 @@\n         img.src = imgUrl; // Use the proxy URL + original image URL\r\n     });\r\n };\r\n \r\n-\r\n const PatientPDF = ({ form }) => {\r\n     const pdfExportComponent = useRef(null);\r\n     const [imagesBase64, setImagesBase64] = useState({});\r\n \r\n@@ -70,93 +69,82 @@\n             <Button\r\n                 variant=\"contained\"\r\n                 color=\"primary\"\r\n                 onClick={handleExportWithComponent}\r\n-                style={{ marginBottom: \"10px\" }}\r\n+                style={{ marginBottom: \"20px\", padding: \"10px 20px\", fontSize: \"16px\", fontWeight: \"bold\" }}\r\n             >\r\n                 Download PDF\r\n             </Button>\r\n             <PDFExport ref={pdfExportComponent} paperSize=\"A4\">\r\n-                <Card style={{ padding: \"20px\", maxWidth: \"800px\", margin: \"auto\" }}>\r\n+                <Card style={{ padding: \"20px\", maxWidth: \"800px\", margin: \"auto\", backgroundColor: \"#f9f9f9\", borderRadius: \"8px\" }}>\r\n                     <CardContent>\r\n-                        <Typography variant=\"h5\" gutterBottom>\r\n+                        <Typography variant=\"h5\" gutterBottom style={{ textAlign: \"center\", color: \"#333\" }}>\r\n                             Patient Report\r\n                         </Typography>\r\n-                        <Divider />\r\n+                        <Divider style={{ margin: \"15px 0\" }} />\r\n \r\n                         {/* Patient Information Section */}\r\n-                        <Typography variant=\"h6\">Patient Information</Typography>\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Information</Typography>\r\n                         <Grid container spacing={2}>\r\n-                            <Grid item xs={6}><Typography>Name: {form?.first_name} {form?.last_name}</Typography></Grid>\r\n-                            <Grid item xs={6}><Typography>DOB: {new Date(form?.dob).toLocaleDateString()}</Typography></Grid>\r\n-                            <Grid item xs={6}><Typography>Phone: {form?.phone}</Typography></Grid>\r\n-                            <Grid item xs={6}><Typography>Email: {form?.email}</Typography></Grid>\r\n-                            <Grid item xs={12}><Typography>Address: {form?.address}, {form?.post_code}</Typography></Grid>\r\n-                            <Grid item xs={12}><Typography>Notes: {form?.notes}</Typography></Grid>\r\n+                            <Grid item xs={6}><Typography>Name: <strong>{form?.first_name} {form?.last_name}</strong></Typography></Grid>\r\n+                            <Grid item xs={6}><Typography>DOB: <strong>{new Date(form?.dob).toLocaleDateString()}</strong></Typography></Grid>\r\n+                            <Grid item xs={6}><Typography>Phone: <strong>{form?.phone}</strong></Typography></Grid>\r\n+                            <Grid item xs={6}><Typography>Email: <strong>{form?.email}</strong></Typography></Grid>\r\n+                            <Grid item xs={12}><Typography>Address: <strong>{form?.address}, {form?.post_code}</strong></Typography></Grid>\r\n+                            <Grid item xs={12}><Typography>Notes: <strong>{form?.notes}</strong></Typography></Grid>\r\n                         </Grid>\r\n \r\n-                        <Divider style={{ margin: \"10px 0\" }} />\r\n+                        <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Next of Kin Information */}\r\n-                        <Typography variant=\"h6\">Next of Kin</Typography>\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Next of Kin</Typography>\r\n                         <Grid container spacing={2}>\r\n-                            <Grid item xs={6}><Typography>Name: {form?.kin_details?.name}</Typography></Grid>\r\n-                            <Grid item xs={6}><Typography>Phone: {form?.kin_details?.phone}</Typography></Grid>\r\n-                            <Grid item xs={12}><Typography>Address: {form?.kin_details?.address}</Typography></Grid>\r\n-                            <Grid item xs={12}><Typography>Email: {form?.kin_details?.email}</Typography></Grid>\r\n+                            <Grid item xs={6}><Typography>Name: <strong>{form?.kin_details?.name}</strong></Typography></Grid>\r\n+                            <Grid item xs={6}><Typography>Phone: <strong>{form?.kin_details?.phone}</strong></Typography></Grid>\r\n+                            <Grid item xs={12}><Typography>Address: <strong>{form?.kin_details?.address}</strong></Typography></Grid>\r\n+                            <Grid item xs={12}><Typography>Email: <strong>{form?.kin_details?.email}</strong></Typography></Grid>\r\n                         </Grid>\r\n \r\n-                        <Divider style={{ margin: \"10px 0\" }} />\r\n+                        <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n-                        {/* General Practitioner Information */}\r\n-                        <Typography variant=\"h6\">General Practitioner</Typography>\r\n-                        <Grid container spacing={2}>\r\n-                            <Grid item xs={6}><Typography>Name: {form?.general_practitioner?.name}</Typography></Grid>\r\n-                            <Grid item xs={6}><Typography>Phone: {form?.general_practitioner?.phone}</Typography></Grid>\r\n-                            <Grid item xs={12}><Typography>Address: {form?.general_practitioner?.address}</Typography></Grid>\r\n-                            <Grid item xs={12}><Typography>Email: {form?.general_practitioner?.email}</Typography></Grid>\r\n-                        </Grid>\r\n-\r\n-                        <Divider style={{ margin: \"10px 0\" }} />\r\n-\r\n                         {/* Treatment Plan */}\r\n-                        <Typography variant=\"h6\">Treatment Plan</Typography>\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Treatment Plan</Typography>\r\n                         <Grid container spacing={2}>\r\n-                            <Grid item xs={12}><Typography>Concerns: {form?.treatment_plan?.patient_concerns}</Typography></Grid>\r\n-                            <Grid item xs={12}><Typography>Goals: {form?.treatment_plan?.patient_goals}</Typography></Grid>\r\n-                            <Grid item xs={12}><Typography>Advised Plan: {form?.treatment_plan?.advised_plan}</Typography></Grid>\r\n-                            <Grid item xs={12}><Typography>Expected Result: {form?.treatment_plan?.expected_result}</Typography></Grid>\r\n-                            <Grid item xs={12}><Typography>Date: {new Date(form?.treatment_plan?.date).toLocaleDateString()}</Typography></Grid>\r\n-                            <Grid item xs={12}><img src={form?.treatment_plan?.patient_sign} alt=\"Treatment Plan Sign\" style={{ width: \"200px\" }} /></Grid>\r\n+                            <Grid item xs={12}><Typography>Concerns: <strong>{form?.treatment_plan?.patient_concerns}</strong></Typography></Grid>\r\n+                            <Grid item xs={12}><Typography>Goals: <strong>{form?.treatment_plan?.patient_goals}</strong></Typography></Grid>\r\n+                            <Grid item xs={12}><Typography>Advised Plan: <strong>{form?.treatment_plan?.advised_plan}</strong></Typography></Grid>\r\n+                            <Grid item xs={12}><Typography>Expected Result: <strong>{form?.treatment_plan?.expected_result}</strong></Typography></Grid>\r\n+                            <Grid item xs={12}><Typography>Date: <strong>{new Date(form?.treatment_plan?.date).toLocaleDateString()}</strong></Typography></Grid>\r\n+                            <Grid item xs={12}><img src={form?.treatment_plan?.patient_sign} alt=\"Treatment Plan Sign\" style={{ width: \"200px\", borderRadius: \"8px\", marginTop: \"10px\" }} /></Grid>\r\n                         </Grid>\r\n \r\n-                        <Divider style={{ margin: \"10px 0\" }} />\r\n+                        <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Images Section */}\r\n-                        <Typography variant=\"h6\">Images</Typography>\r\n-                        <Typography variant=\"subtitle1\">Batch Images</Typography>\r\n-                        <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Images</Typography>\r\n+                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginBottom: \"5px\" }}>Batch Images</Typography>\r\n+                        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.batch?.map((img, index) => (\r\n-                                <img key={index} src={img} alt=\"Batch\" style={{ width: \"80px\" }} />\r\n+                                <img key={index} src={img} alt=\"Batch\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n                         </div>\r\n-                        <Typography variant=\"subtitle1\">Before Images</Typography>\r\n-                        <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n+                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginTop: \"20px\", marginBottom: \"5px\" }}>Before Images</Typography>\r\n+                        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.before?.map((img, index) => (\r\n-                                <img key={index} src={img} alt=\"Before\" style={{ width: \"80px\" }} />\r\n+                                <img key={index} src={img} alt=\"Before\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n                         </div>\r\n-                        <Typography variant=\"subtitle1\">After Images</Typography>\r\n-                        <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n+                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginTop: \"20px\", marginBottom: \"5px\" }}>After Images</Typography>\r\n+                        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.after?.map((img, index) => (\r\n-                                <img key={index} src={img} alt=\"After\" style={{ width: \"80px\" }} />\r\n+                                <img key={index} src={img} alt=\"After\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n                         </div>\r\n \r\n-                        <Divider style={{ margin: \"10px 0\" }} />\r\n+                        <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Treatment Records Table */}\r\n-                        <Typography variant=\"h6\">Treatment Records</Typography>\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Treatment Records</Typography>\r\n                         <TableContainer>\r\n                             <Table>\r\n                                 <TableHead>\r\n                                     <TableRow>\r\n@@ -176,44 +164,26 @@\n                                 </TableBody>\r\n                             </Table>\r\n                         </TableContainer>\r\n \r\n-                        <Divider style={{ margin: \"10px 0\" }} />\r\n+                        <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Further Treatment Section */}\r\n-                        <Typography variant=\"h6\">Further Treatment</Typography>\r\n-                        <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n+                        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                                <img key={index} src={treatment} alt=\"Further Treatment Sign\" style={{ width: \"200px\" }} />\r\n+                                <img key={index} src={treatment} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n                         </div>\r\n \r\n-                        <Divider style={{ margin: \"10px 0\" }} />\r\n+                        <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Patient Consent */}\r\n-                        <Typography variant=\"h6\">Patient Consent</Typography>\r\n-                        <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-                            <img src={imagesBase64?.patientConsent?.[0]} alt=\"Patient Consent Sign\" style={{ width: \"200px\" }} />\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n+                        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n+                            <img src={imagesBase64?.patientConsent?.[0]} alt=\"Patient Consent Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                         </div>\r\n \r\n-                        <Divider style={{ margin: \"10px 0\" }} />\r\n-\r\n-                        {/* Side Effect Details */}\r\n-                        <Typography variant=\"h6\">Side Effects</Typography>\r\n-                        <Typography>{form?.side_effect?.details || \"No side effects reported\"}</Typography>\r\n-\r\n-                        <Divider style={{ margin: \"10px 0\" }} />\r\n-\r\n-                        {/* Extra Notes */}\r\n-                        <Typography variant=\"h6\">Extra Notes</Typography>\r\n-                        <Typography>{form?.extra_notes || \"No extra notes available.\"}</Typography>\r\n-\r\n-                        <Divider style={{ margin: \"10px 0\" }} />\r\n-\r\n-                        {/* Completion Status */}\r\n-                        <Typography variant=\"h6\">Completion Status</Typography>\r\n-                        <Typography>{form?.is_completed ? \"Completed\" : \"Not Completed\"}</Typography>\r\n-                        <Typography>{form?.completed_at ? `Completed At: ${new Date(form?.completed_at).toLocaleString()}` : \"Not yet completed\"}</Typography>\r\n                     </CardContent>\r\n                 </Card>\r\n             </PDFExport>\r\n         </div>\r\n"
                },
                {
                    "date": 1743676188057,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,9 +119,9 @@\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Images Section */}\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Images</Typography>\r\n+\r\n                         <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginBottom: \"5px\" }}>Batch Images</Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.batch?.map((img, index) => (\r\n                                 <img key={index} src={img} alt=\"Batch\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n"
                },
                {
                    "date": 1743676341321,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,37 +84,37 @@\n \r\n                         {/* Patient Information Section */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Information</Typography>\r\n                         <Grid container spacing={2}>\r\n-                            <Grid item xs={6}><Typography>Name: <strong>{form?.first_name} {form?.last_name}</strong></Typography></Grid>\r\n-                            <Grid item xs={6}><Typography>DOB: <strong>{new Date(form?.dob).toLocaleDateString()}</strong></Typography></Grid>\r\n-                            <Grid item xs={6}><Typography>Phone: <strong>{form?.phone}</strong></Typography></Grid>\r\n-                            <Grid item xs={6}><Typography>Email: <strong>{form?.email}</strong></Typography></Grid>\r\n-                            <Grid item xs={12}><Typography>Address: <strong>{form?.address}, {form?.post_code}</strong></Typography></Grid>\r\n-                            <Grid item xs={12}><Typography>Notes: <strong>{form?.notes}</strong></Typography></Grid>\r\n+                            <Grid item xs={6}><Typography><strong>Name:</strong> {form?.first_name} {form?.last_name}</Typography></Grid>\r\n+                            <Grid item xs={6}><Typography><strong>DOB:</strong> {new Date(form?.dob).toLocaleDateString()}</Typography></Grid>\r\n+                            <Grid item xs={6}><Typography><strong>Phone:</strong> {form?.phone}</Typography></Grid>\r\n+                            <Grid item xs={6}><Typography><strong>Email:</strong> {form?.email}</Typography></Grid>\r\n+                            <Grid item xs={12}><Typography><strong>Address:</strong> {form?.address}, {form?.post_code}</Typography></Grid>\r\n+                            <Grid item xs={12}><Typography><strong>Notes:</strong> {form?.notes}</Typography></Grid>\r\n                         </Grid>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Next of Kin Information */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Next of Kin</Typography>\r\n                         <Grid container spacing={2}>\r\n-                            <Grid item xs={6}><Typography>Name: <strong>{form?.kin_details?.name}</strong></Typography></Grid>\r\n-                            <Grid item xs={6}><Typography>Phone: <strong>{form?.kin_details?.phone}</strong></Typography></Grid>\r\n-                            <Grid item xs={12}><Typography>Address: <strong>{form?.kin_details?.address}</strong></Typography></Grid>\r\n-                            <Grid item xs={12}><Typography>Email: <strong>{form?.kin_details?.email}</strong></Typography></Grid>\r\n+                            <Grid item xs={6}><Typography><strong>Name:</strong> {form?.kin_details?.name}</Typography></Grid>\r\n+                            <Grid item xs={6}><Typography><strong>Phone:</strong> {form?.kin_details?.phone}</Typography></Grid>\r\n+                            <Grid item xs={12}><Typography><strong>Address:</strong> {form?.kin_details?.address}</Typography></Grid>\r\n+                            <Grid item xs={12}><Typography><strong>Email:</strong> {form?.kin_details?.email}</Typography></Grid>\r\n                         </Grid>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Treatment Plan */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Treatment Plan</Typography>\r\n                         <Grid container spacing={2}>\r\n-                            <Grid item xs={12}><Typography>Concerns: <strong>{form?.treatment_plan?.patient_concerns}</strong></Typography></Grid>\r\n-                            <Grid item xs={12}><Typography>Goals: <strong>{form?.treatment_plan?.patient_goals}</strong></Typography></Grid>\r\n-                            <Grid item xs={12}><Typography>Advised Plan: <strong>{form?.treatment_plan?.advised_plan}</strong></Typography></Grid>\r\n-                            <Grid item xs={12}><Typography>Expected Result: <strong>{form?.treatment_plan?.expected_result}</strong></Typography></Grid>\r\n-                            <Grid item xs={12}><Typography>Date: <strong>{new Date(form?.treatment_plan?.date).toLocaleDateString()}</strong></Typography></Grid>\r\n+                            <Grid item xs={12}><Typography><strong>Concerns:</strong> {form?.treatment_plan?.patient_concerns}</Typography></Grid>\r\n+                            <Grid item xs={12}><Typography><strong>Goals:</strong> {form?.treatment_plan?.patient_goals}</Typography></Grid>\r\n+                            <Grid item xs={12}><Typography><strong>Advised Plan:</strong> {form?.treatment_plan?.advised_plan}</Typography></Grid>\r\n+                            <Grid item xs={12}><Typography><strong>Expected Result:</strong> {form?.treatment_plan?.expected_result}</Typography></Grid>\r\n+                            <Grid item xs={12}><Typography><strong>Date:</strong> {new Date(form?.treatment_plan?.date).toLocaleDateString()}</Typography></Grid>\r\n                             <Grid item xs={12}><img src={form?.treatment_plan?.patient_sign} alt=\"Treatment Plan Sign\" style={{ width: \"200px\", borderRadius: \"8px\", marginTop: \"10px\" }} /></Grid>\r\n                         </Grid>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n@@ -147,11 +147,11 @@\n                         <TableContainer>\r\n                             <Table>\r\n                                 <TableHead>\r\n                                     <TableRow>\r\n-                                        <TableCell>Date</TableCell>\r\n-                                        <TableCell>Description</TableCell>\r\n-                                        <TableCell>Amount</TableCell>\r\n+                                        <TableCell><strong>Date</strong></TableCell>\r\n+                                        <TableCell><strong>Description</strong></TableCell>\r\n+                                        <TableCell><strong>Amount</strong></TableCell>\r\n                                     </TableRow>\r\n                                 </TableHead>\r\n                                 <TableBody>\r\n                                     {form?.treatment_record?.map((record, index) => (\r\n"
                },
                {
                    "date": 1743676548736,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,8 +99,10 @@\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Next of Kin</Typography>\r\n                         <Grid container spacing={2}>\r\n                             <Grid item xs={6}><Typography><strong>Name:</strong> {form?.kin_details?.name}</Typography></Grid>\r\n                             <Grid item xs={6}><Typography><strong>Phone:</strong> {form?.kin_details?.phone}</Typography></Grid>\r\n+                        </Grid>\r\n+                        <Grid container spacing={2}>\r\n                             <Grid item xs={12}><Typography><strong>Address:</strong> {form?.kin_details?.address}</Typography></Grid>\r\n                             <Grid item xs={12}><Typography><strong>Email:</strong> {form?.kin_details?.email}</Typography></Grid>\r\n                         </Grid>\r\n \r\n@@ -119,9 +121,8 @@\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Images Section */}\r\n-\r\n                         <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginBottom: \"5px\" }}>Batch Images</Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.batch?.map((img, index) => (\r\n                                 <img key={index} src={img} alt=\"Batch\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n@@ -142,29 +143,31 @@\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Treatment Records Table */}\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Treatment Records</Typography>\r\n-                        <TableContainer>\r\n-                            <Table>\r\n-                                <TableHead>\r\n-                                    <TableRow>\r\n-                                        <TableCell><strong>Date</strong></TableCell>\r\n-                                        <TableCell><strong>Description</strong></TableCell>\r\n-                                        <TableCell><strong>Amount</strong></TableCell>\r\n-                                    </TableRow>\r\n-                                </TableHead>\r\n-                                <TableBody>\r\n-                                    {form?.treatment_record?.map((record, index) => (\r\n-                                        <TableRow key={index}>\r\n-                                            <TableCell>{new Date(record.treatment_date).toLocaleDateString()}</TableCell>\r\n-                                            <TableCell>{record.description}</TableCell>\r\n-                                            <TableCell>${record.amount}</TableCell>\r\n+                        <div style={{ pageBreakBefore: \"always\" }}> {/* Force page break before this section */}\r\n+                            <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Treatment Records</Typography>\r\n+                            <TableContainer>\r\n+                                <Table>\r\n+                                    <TableHead>\r\n+                                        <TableRow>\r\n+                                            <TableCell><strong>Date</strong></TableCell>\r\n+                                            <TableCell><strong>Description</strong></TableCell>\r\n+                                            <TableCell><strong>Amount</strong></TableCell>\r\n                                         </TableRow>\r\n-                                    ))}\r\n-                                </TableBody>\r\n-                            </Table>\r\n-                        </TableContainer>\r\n+                                    </TableHead>\r\n+                                    <TableBody>\r\n+                                        {form?.treatment_record?.map((record, index) => (\r\n+                                            <TableRow key={index}>\r\n+                                                <TableCell>{new Date(record.treatment_date).toLocaleDateString()}</TableCell>\r\n+                                                <TableCell>{record.description}</TableCell>\r\n+                                                <TableCell>${record.amount}</TableCell>\r\n+                                            </TableRow>\r\n+                                        ))}\r\n+                                    </TableBody>\r\n+                                </Table>\r\n+                            </TableContainer>\r\n+                        </div>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Further Treatment Section */}\r\n@@ -181,9 +184,8 @@\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             <img src={imagesBase64?.patientConsent?.[0]} alt=\"Patient Consent Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                         </div>\r\n-\r\n                     </CardContent>\r\n                 </Card>\r\n             </PDFExport>\r\n         </div>\r\n"
                },
                {
                    "date": 1743676588649,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -114,10 +114,10 @@\n                             <Grid item xs={12}><Typography><strong>Concerns:</strong> {form?.treatment_plan?.patient_concerns}</Typography></Grid>\r\n                             <Grid item xs={12}><Typography><strong>Goals:</strong> {form?.treatment_plan?.patient_goals}</Typography></Grid>\r\n                             <Grid item xs={12}><Typography><strong>Advised Plan:</strong> {form?.treatment_plan?.advised_plan}</Typography></Grid>\r\n                             <Grid item xs={12}><Typography><strong>Expected Result:</strong> {form?.treatment_plan?.expected_result}</Typography></Grid>\r\n-                            <Grid item xs={12}><Typography><strong>Date:</strong> {new Date(form?.treatment_plan?.date).toLocaleDateString()}</Typography></Grid>\r\n-                            <Grid item xs={12}><img src={form?.treatment_plan?.patient_sign} alt=\"Treatment Plan Sign\" style={{ width: \"200px\", borderRadius: \"8px\", marginTop: \"10px\" }} /></Grid>\r\n+                            <Grid item xs={6}><Typography><strong>Date:</strong> {new Date(form?.treatment_plan?.date).toLocaleDateString()}</Typography></Grid>\r\n+                            <Grid item xs={6}><img src={form?.treatment_plan?.patient_sign} alt=\"Treatment Plan Sign\" style={{ width: \"200px\", borderRadius: \"8px\", marginTop: \"10px\" }} /></Grid>\r\n                         </Grid>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n"
                },
                {
                    "date": 1743676612348,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -115,9 +115,9 @@\n                             <Grid item xs={12}><Typography><strong>Goals:</strong> {form?.treatment_plan?.patient_goals}</Typography></Grid>\r\n                             <Grid item xs={12}><Typography><strong>Advised Plan:</strong> {form?.treatment_plan?.advised_plan}</Typography></Grid>\r\n                             <Grid item xs={12}><Typography><strong>Expected Result:</strong> {form?.treatment_plan?.expected_result}</Typography></Grid>\r\n                             <Grid item xs={6}><Typography><strong>Date:</strong> {new Date(form?.treatment_plan?.date).toLocaleDateString()}</Typography></Grid>\r\n-                            <Grid item xs={6}><img src={form?.treatment_plan?.patient_sign} alt=\"Treatment Plan Sign\" style={{ width: \"200px\", borderRadius: \"8px\", marginTop: \"10px\" }} /></Grid>\r\n+                            <Grid item xs={6}><strong>Patient Signature:</strong> <img src={form?.treatment_plan?.patient_sign} alt=\"Treatment Plan Sign\" style={{ width: \"200px\", borderRadius: \"8px\", marginTop: \"10px\" }} /></Grid>\r\n                         </Grid>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n"
                },
                {
                    "date": 1743676631256,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -115,9 +115,9 @@\n                             <Grid item xs={12}><Typography><strong>Goals:</strong> {form?.treatment_plan?.patient_goals}</Typography></Grid>\r\n                             <Grid item xs={12}><Typography><strong>Advised Plan:</strong> {form?.treatment_plan?.advised_plan}</Typography></Grid>\r\n                             <Grid item xs={12}><Typography><strong>Expected Result:</strong> {form?.treatment_plan?.expected_result}</Typography></Grid>\r\n                             <Grid item xs={6}><Typography><strong>Date:</strong> {new Date(form?.treatment_plan?.date).toLocaleDateString()}</Typography></Grid>\r\n-                            <Grid item xs={6}><strong>Patient Signature:</strong> <img src={form?.treatment_plan?.patient_sign} alt=\"Treatment Plan Sign\" style={{ width: \"200px\", borderRadius: \"8px\", marginTop: \"10px\" }} /></Grid>\r\n+                            <Grid item xs={6}><Typography><strong>Patient Signature:</strong> </Typography> <img src={form?.treatment_plan?.patient_sign} alt=\"Treatment Plan Sign\" style={{ width: \"200px\", borderRadius: \"8px\", marginTop: \"10px\" }} /></Grid>\r\n                         </Grid>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n"
                },
                {
                    "date": 1743677699528,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -101,10 +101,10 @@\n                             <Grid item xs={6}><Typography><strong>Name:</strong> {form?.kin_details?.name}</Typography></Grid>\r\n                             <Grid item xs={6}><Typography><strong>Phone:</strong> {form?.kin_details?.phone}</Typography></Grid>\r\n                         </Grid>\r\n                         <Grid container spacing={2}>\r\n-                            <Grid item xs={12}><Typography><strong>Address:</strong> {form?.kin_details?.address}</Typography></Grid>\r\n-                            <Grid item xs={12}><Typography><strong>Email:</strong> {form?.kin_details?.email}</Typography></Grid>\r\n+                            <Grid item xs={6}><Typography><strong>Address:</strong> {form?.kin_details?.address}</Typography></Grid>\r\n+                            <Grid item xs={6}><Typography><strong>Email:</strong> {form?.kin_details?.email}</Typography></Grid>\r\n                         </Grid>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n"
                },
                {
                    "date": 1743677755273,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -106,9 +106,20 @@\n                             <Grid item xs={6}><Typography><strong>Email:</strong> {form?.kin_details?.email}</Typography></Grid>\r\n                         </Grid>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>General</Typography>\r\n+                        <Grid container spacing={2}>\r\n+                            <Grid item xs={6}><Typography><strong>Name:</strong> {form?.kin_details?.name}</Typography></Grid>\r\n+                            <Grid item xs={6}><Typography><strong>Phone:</strong> {form?.kin_details?.phone}</Typography></Grid>\r\n+                        </Grid>\r\n+                        <Grid container spacing={2}>\r\n+                            <Grid item xs={6}><Typography><strong>Address:</strong> {form?.kin_details?.address}</Typography></Grid>\r\n+                            <Grid item xs={6}><Typography><strong>Email:</strong> {form?.kin_details?.email}</Typography></Grid>\r\n+                        </Grid>\r\n \r\n+                        <Divider style={{ margin: \"20px 0\" }} />\r\n+\r\n                         {/* Treatment Plan */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Treatment Plan</Typography>\r\n                         <Grid container spacing={2}>\r\n                             <Grid item xs={12}><Typography><strong>Concerns:</strong> {form?.treatment_plan?.patient_concerns}</Typography></Grid>\r\n"
                },
                {
                    "date": 1743677767530,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -106,9 +106,9 @@\n                             <Grid item xs={6}><Typography><strong>Email:</strong> {form?.kin_details?.email}</Typography></Grid>\r\n                         </Grid>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>General</Typography>\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>General Practitioners</Typography>\r\n                         <Grid container spacing={2}>\r\n                             <Grid item xs={6}><Typography><strong>Name:</strong> {form?.kin_details?.name}</Typography></Grid>\r\n                             <Grid item xs={6}><Typography><strong>Phone:</strong> {form?.kin_details?.phone}</Typography></Grid>\r\n                         </Grid>\r\n"
                },
                {
                    "date": 1743677795292,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,14 +108,14 @@\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>General Practitioners</Typography>\r\n                         <Grid container spacing={2}>\r\n-                            <Grid item xs={6}><Typography><strong>Name:</strong> {form?.kin_details?.name}</Typography></Grid>\r\n-                            <Grid item xs={6}><Typography><strong>Phone:</strong> {form?.kin_details?.phone}</Typography></Grid>\r\n+                            <Grid item xs={6}><Typography><strong>Name:</strong> {form?.general_practitioner?.name}</Typography></Grid>\r\n+                            <Grid item xs={6}><Typography><strong>Phone:</strong> {form?.general_practitioner?.phone}</Typography></Grid>\r\n                         </Grid>\r\n                         <Grid container spacing={2}>\r\n-                            <Grid item xs={6}><Typography><strong>Address:</strong> {form?.kin_details?.address}</Typography></Grid>\r\n-                            <Grid item xs={6}><Typography><strong>Email:</strong> {form?.kin_details?.email}</Typography></Grid>\r\n+                            <Grid item xs={6}><Typography><strong>Address:</strong> {form?.general_practitioner?.address}</Typography></Grid>\r\n+                            <Grid item xs={6}><Typography><strong>Email:</strong> {form?.general_practitioner?.email}</Typography></Grid>\r\n                         </Grid>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n"
                },
                {
                    "date": 1743677914893,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,9 +33,12 @@\n                 const imageUrls = {\r\n                     batch: form?.batch_images || [],\r\n                     before: form?.before_images || [],\r\n                     after: form?.after_images || [],\r\n-                    furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n+                    furtherTreatment: form?.further_treatment?.map(treatment => ({\r\n+                        sign: treatment?.sign,\r\n+                        date: treatment?.date, // Adding date\r\n+                    })) || [],\r\n                     patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n                 };\r\n                 console.log(imageUrls, 'imageUrls');\r\n \r\n"
                },
                {
                    "date": 1743677931043,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -184,15 +184,27 @@\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Further Treatment Section */}\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n-                        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-                            {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                                <img key={index} src={treatment} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n-                            ))}\r\n-                        </div>\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>\r\n+    Further Treatment\r\n+</Typography>\r\n+<div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n+    {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n+        <div key={index} style={{ textAlign: \"center\" }}>\r\n+            <img \r\n+                src={treatment.sign} \r\n+                alt=\"Further Treatment Sign\" \r\n+                style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} \r\n+            />\r\n+            <Typography variant=\"body2\" style={{ marginTop: \"5px\", color: \"#555\" }}>\r\n+                {new Date(treatment.date).toLocaleDateString()} {/* Display the date */}\r\n+            </Typography>\r\n+        </div>\r\n+    ))}\r\n+</div>\r\n \r\n+\r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Patient Consent */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n"
                },
                {
                    "date": 1743678006933,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,25 +39,25 @@\n                         date: treatment?.date, // Adding date\r\n                     })) || [],\r\n                     patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n                 };\r\n-                console.log(imageUrls, 'imageUrls');\r\n-\r\n+        \r\n                 // Convert each image URL to Base64\r\n                 const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n                     const urls = imageUrls[key];\r\n-                    const base64Images = await Promise.all(urls.map(url => toBase64(url)));\r\n+                    const base64Images = await Promise.all(urls.map(url => toBase64(url.sign)));\r\n                     return { [key]: base64Images };\r\n                 });\r\n-\r\n+        \r\n                 // Set all images as Base64 in the state\r\n                 const base64Data = await Promise.all(imagePromises);\r\n                 const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n                 setImagesBase64(allImages);\r\n             } catch (error) {\r\n                 console.error(\"Error converting images to base64:\", error);\r\n             }\r\n         };\r\n+        \r\n \r\n         fetchImagesAsBase64();\r\n     }, [form]);\r\n \r\n@@ -185,24 +185,24 @@\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Further Treatment Section */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>\r\n-    Further Treatment\r\n-</Typography>\r\n-<div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-    {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-        <div key={index} style={{ textAlign: \"center\" }}>\r\n-            <img \r\n-                src={treatment.sign} \r\n-                alt=\"Further Treatment Sign\" \r\n-                style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} \r\n-            />\r\n-            <Typography variant=\"body2\" style={{ marginTop: \"5px\", color: \"#555\" }}>\r\n-                {new Date(treatment.date).toLocaleDateString()} {/* Display the date */}\r\n-            </Typography>\r\n-        </div>\r\n-    ))}\r\n-</div>\r\n+                            Further Treatment\r\n+                        </Typography>\r\n+                        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n+                            {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n+                                <div key={index} style={{ textAlign: \"center\" }}>\r\n+                                    <img\r\n+                                        src={treatment.sign}\r\n+                                        alt=\"Further Treatment Sign\"\r\n+                                        style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }}\r\n+                                    />\r\n+                                    <Typography variant=\"body2\" style={{ marginTop: \"5px\", color: \"#555\" }}>\r\n+                                        {new Date(treatment.date).toLocaleDateString()} {/* Display the date */}\r\n+                                    </Typography>\r\n+                                </div>\r\n+                            ))}\r\n+                        </div>\r\n \r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n"
                },
                {
                    "date": 1743678029838,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,25 +39,25 @@\n                         date: treatment?.date, // Adding date\r\n                     })) || [],\r\n                     patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n                 };\r\n-        \r\n+                console.log(imageUrls, 'imageUrls');\r\n+\r\n                 // Convert each image URL to Base64\r\n                 const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n                     const urls = imageUrls[key];\r\n-                    const base64Images = await Promise.all(urls.map(url => toBase64(url.sign)));\r\n+                    const base64Images = await Promise.all(urls.map(url => toBase64(url)));\r\n                     return { [key]: base64Images };\r\n                 });\r\n-        \r\n+\r\n                 // Set all images as Base64 in the state\r\n                 const base64Data = await Promise.all(imagePromises);\r\n                 const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n                 setImagesBase64(allImages);\r\n             } catch (error) {\r\n                 console.error(\"Error converting images to base64:\", error);\r\n             }\r\n         };\r\n-        \r\n \r\n         fetchImagesAsBase64();\r\n     }, [form]);\r\n \r\n@@ -184,27 +184,15 @@\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Further Treatment Section */}\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>\r\n-                            Further Treatment\r\n-                        </Typography>\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                                <div key={index} style={{ textAlign: \"center\" }}>\r\n-                                    <img\r\n-                                        src={treatment.sign}\r\n-                                        alt=\"Further Treatment Sign\"\r\n-                                        style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }}\r\n-                                    />\r\n-                                    <Typography variant=\"body2\" style={{ marginTop: \"5px\", color: \"#555\" }}>\r\n-                                        {new Date(treatment.date).toLocaleDateString()} {/* Display the date */}\r\n-                                    </Typography>\r\n-                                </div>\r\n+                                <img key={index} src={treatment} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n                         </div>\r\n \r\n-\r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Patient Consent */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n"
                },
                {
                    "date": 1743678066293,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,30 +34,30 @@\n                     batch: form?.batch_images || [],\r\n                     before: form?.before_images || [],\r\n                     after: form?.after_images || [],\r\n                     furtherTreatment: form?.further_treatment?.map(treatment => ({\r\n-                        sign: treatment?.sign,\r\n-                        date: treatment?.date, // Adding date\r\n+                        sign: treatment?.sign,    // Image URL\r\n+                        date: treatment?.date     // Date value\r\n                     })) || [],\r\n                     patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n                 };\r\n-                console.log(imageUrls, 'imageUrls');\r\n-\r\n+        \r\n                 // Convert each image URL to Base64\r\n                 const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n                     const urls = imageUrls[key];\r\n-                    const base64Images = await Promise.all(urls.map(url => toBase64(url)));\r\n+                    const base64Images = await Promise.all(urls.map(url => toBase64(url.sign)));\r\n                     return { [key]: base64Images };\r\n                 });\r\n-\r\n+        \r\n                 // Set all images as Base64 in the state\r\n                 const base64Data = await Promise.all(imagePromises);\r\n                 const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n                 setImagesBase64(allImages);\r\n             } catch (error) {\r\n                 console.error(\"Error converting images to base64:\", error);\r\n             }\r\n         };\r\n+        \r\n \r\n         fetchImagesAsBase64();\r\n     }, [form]);\r\n \r\n"
                },
                {
                    "date": 1743678080806,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -184,15 +184,27 @@\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Further Treatment Section */}\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n-                        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-                            {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                                <img key={index} src={treatment} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n-                            ))}\r\n-                        </div>\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>\r\n+    Further Treatment\r\n+</Typography>\r\n+<div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n+    {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n+        <div key={index} style={{ textAlign: \"center\" }}>\r\n+            <img \r\n+                src={treatment.sign} \r\n+                alt={`Treatment ${index + 1}`} \r\n+                style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} \r\n+            />\r\n+            <Typography variant=\"body2\" style={{ marginTop: \"5px\", color: \"#555\" }}>\r\n+                {treatment.date ? new Date(treatment.date).toLocaleDateString() : \"No Date Provided\"}\r\n+            </Typography>\r\n+        </div>\r\n+    ))}\r\n+</div>\r\n \r\n+\r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Patient Consent */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n"
                },
                {
                    "date": 1743678176412,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,30 +34,30 @@\n                     batch: form?.batch_images || [],\r\n                     before: form?.before_images || [],\r\n                     after: form?.after_images || [],\r\n                     furtherTreatment: form?.further_treatment?.map(treatment => ({\r\n-                        sign: treatment?.sign,    // Image URL\r\n-                        date: treatment?.date     // Date value\r\n+                        sign: treatment?.sign,\r\n+                        date: treatment?.date, // Adding date\r\n                     })) || [],\r\n                     patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n                 };\r\n-        \r\n+                console.log(imageUrls, 'imageUrls');\r\n+\r\n                 // Convert each image URL to Base64\r\n                 const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n                     const urls = imageUrls[key];\r\n-                    const base64Images = await Promise.all(urls.map(url => toBase64(url.sign)));\r\n+                    const base64Images = await Promise.all(urls.map(url => toBase64(url)));\r\n                     return { [key]: base64Images };\r\n                 });\r\n-        \r\n+\r\n                 // Set all images as Base64 in the state\r\n                 const base64Data = await Promise.all(imagePromises);\r\n                 const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n                 setImagesBase64(allImages);\r\n             } catch (error) {\r\n                 console.error(\"Error converting images to base64:\", error);\r\n             }\r\n         };\r\n-        \r\n \r\n         fetchImagesAsBase64();\r\n     }, [form]);\r\n \r\n@@ -184,27 +184,15 @@\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Further Treatment Section */}\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>\r\n-    Further Treatment\r\n-</Typography>\r\n-<div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-    {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-        <div key={index} style={{ textAlign: \"center\" }}>\r\n-            <img \r\n-                src={treatment.sign} \r\n-                alt={`Treatment ${index + 1}`} \r\n-                style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} \r\n-            />\r\n-            <Typography variant=\"body2\" style={{ marginTop: \"5px\", color: \"#555\" }}>\r\n-                {treatment.date ? new Date(treatment.date).toLocaleDateString() : \"No Date Provided\"}\r\n-            </Typography>\r\n-        </div>\r\n-    ))}\r\n-</div>\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n+                        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n+                            {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n+                                <img key={index} src={treatment} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n+                            ))}\r\n+                        </div>\r\n \r\n-\r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Patient Consent */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n"
                },
                {
                    "date": 1743678204257,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,12 +33,9 @@\n                 const imageUrls = {\r\n                     batch: form?.batch_images || [],\r\n                     before: form?.before_images || [],\r\n                     after: form?.after_images || [],\r\n-                    furtherTreatment: form?.further_treatment?.map(treatment => ({\r\n-                        sign: treatment?.sign,\r\n-                        date: treatment?.date, // Adding date\r\n-                    })) || [],\r\n+                    furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n                     patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n                 };\r\n                 console.log(imageUrls, 'imageUrls');\r\n \r\n"
                },
                {
                    "date": 1743678605931,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,8 +48,10 @@\n \r\n                 // Set all images as Base64 in the state\r\n                 const base64Data = await Promise.all(imagePromises);\r\n                 const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n+                console.log();\r\n+                \r\n                 setImagesBase64(allImages);\r\n             } catch (error) {\r\n                 console.error(\"Error converting images to base64:\", error);\r\n             }\r\n"
                },
                {
                    "date": 1743678703399,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n import { PDFExport } from \"@progress/kendo-react-pdf\";\r\n import { Button, Card, CardContent, Typography, Divider, Grid, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from \"@mui/material\";\r\n \r\n // Function to convert image URL to Base64\r\n+// Function to convert image URL to Base64\r\n const toBase64 = (url) => {\r\n     return new Promise((resolve, reject) => {\r\n         const proxyUrl = \"https://corsproxy.io/?url=\"; // Using the provided CORS proxy\r\n         const imgUrl = proxyUrl + encodeURIComponent(url); // Encode the URL to pass as a query parameter\r\n@@ -48,9 +49,9 @@\n \r\n                 // Set all images as Base64 in the state\r\n                 const base64Data = await Promise.all(imagePromises);\r\n                 const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n-                console.log();\r\n+                console.log(allImages);\r\n                 \r\n                 setImagesBase64(allImages);\r\n             } catch (error) {\r\n                 console.error(\"Error converting images to base64:\", error);\r\n"
                },
                {
                    "date": 1743678735028,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -49,10 +49,8 @@\n \r\n                 // Set all images as Base64 in the state\r\n                 const base64Data = await Promise.all(imagePromises);\r\n                 const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n-                console.log(allImages);\r\n-                \r\n                 setImagesBase64(allImages);\r\n             } catch (error) {\r\n                 console.error(\"Error converting images to base64:\", error);\r\n             }\r\n"
                },
                {
                    "date": 1743678843717,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,28 +37,41 @@\n                     after: form?.after_images || [],\r\n                     furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n                     patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n                 };\r\n-                console.log(imageUrls, 'imageUrls');\r\n-\r\n-                // Convert each image URL to Base64\r\n+    \r\n+                console.log(imageUrls, 'imageUrls'); // Check what URLs are being processed\r\n+    \r\n+                // Convert each image URL to Base64, handle errors for invalid images\r\n                 const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n                     const urls = imageUrls[key];\r\n-                    const base64Images = await Promise.all(urls.map(url => toBase64(url)));\r\n-                    return { [key]: base64Images };\r\n+                    const base64Images = await Promise.all(urls.map(async (url) => {\r\n+                        try {\r\n+                            if (url) {\r\n+                                return await toBase64(url); // Convert URL to Base64 if it exists\r\n+                            }\r\n+                            return null; // Return null if the URL is empty or invalid\r\n+                        } catch (error) {\r\n+                            console.error(`Error converting image to base64 for ${url}:`, error);\r\n+                            return null; // Return null in case of conversion error\r\n+                        }\r\n+                    }));\r\n+    \r\n+                    return { [key]: base64Images.filter(img => img !== null) }; // Filter out null values\r\n                 });\r\n-\r\n+    \r\n                 // Set all images as Base64 in the state\r\n                 const base64Data = await Promise.all(imagePromises);\r\n                 const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n                 setImagesBase64(allImages);\r\n             } catch (error) {\r\n                 console.error(\"Error converting images to base64:\", error);\r\n             }\r\n         };\r\n-\r\n+    \r\n         fetchImagesAsBase64();\r\n     }, [form]);\r\n+    \r\n \r\n     const handleExportWithComponent = () => {\r\n         if (pdfExportComponent.current) {\r\n             pdfExportComponent.current.save();\r\n"
                },
                {
                    "date": 1743679051870,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,40 +34,31 @@\n                 const imageUrls = {\r\n                     batch: form?.batch_images || [],\r\n                     before: form?.before_images || [],\r\n                     after: form?.after_images || [],\r\n-                    furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n+                    furtherTreatment: form?.further_treatment?.map(treatment => ({\r\n+                        sign: treatment?.sign,    // Image URL\r\n+                        date: treatment?.date     // Date value\r\n+                    })) || [],\r\n                     patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n                 };\r\n-    \r\n-                console.log(imageUrls, 'imageUrls'); // Check what URLs are being processed\r\n-    \r\n-                // Convert each image URL to Base64, handle errors for invalid images\r\n+        \r\n+                // Convert each image URL to Base64\r\n                 const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n                     const urls = imageUrls[key];\r\n-                    const base64Images = await Promise.all(urls.map(async (url) => {\r\n-                        try {\r\n-                            if (url) {\r\n-                                return await toBase64(url); // Convert URL to Base64 if it exists\r\n-                            }\r\n-                            return null; // Return null if the URL is empty or invalid\r\n-                        } catch (error) {\r\n-                            console.error(`Error converting image to base64 for ${url}:`, error);\r\n-                            return null; // Return null in case of conversion error\r\n-                        }\r\n-                    }));\r\n-    \r\n-                    return { [key]: base64Images.filter(img => img !== null) }; // Filter out null values\r\n+                    const base64Images = await Promise.all(urls.map(url => toBase64(url.sign)));\r\n+                    return { [key]: base64Images };\r\n                 });\r\n-    \r\n+        \r\n                 // Set all images as Base64 in the state\r\n                 const base64Data = await Promise.all(imagePromises);\r\n                 const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n                 setImagesBase64(allImages);\r\n             } catch (error) {\r\n                 console.error(\"Error converting images to base64:\", error);\r\n             }\r\n         };\r\n+        \r\n     \r\n         fetchImagesAsBase64();\r\n     }, [form]);\r\n     \r\n"
                },
                {
                    "date": 1743679089272,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -189,9 +189,9 @@\n                         {/* Further Treatment Section */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                                <img key={index} src={treatment} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n+                                <img key={index} src={treatment?.sign} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n                         </div>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n"
                },
                {
                    "date": 1743679102254,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -188,10 +188,11 @@\n \r\n                         {/* Further Treatment Section */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-                            {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n+                            {imagesBase64?.furtherTreatment?.map((treatment, index) => (<>\r\n                                 <img key={index} src={treatment?.sign} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n+                                </>\r\n                             ))}\r\n                         </div>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n"
                },
                {
                    "date": 1743679114118,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -190,8 +190,9 @@\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.furtherTreatment?.map((treatment, index) => (<>\r\n                                 <img key={index} src={treatment?.sign} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n+                                {treatment?.date}\r\n                                 </>\r\n                             ))}\r\n                         </div>\r\n \r\n"
                },
                {
                    "date": 1743679143328,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,30 +40,30 @@\n                         date: treatment?.date     // Date value\r\n                     })) || [],\r\n                     patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n                 };\r\n-        \r\n+\r\n                 // Convert each image URL to Base64\r\n                 const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n                     const urls = imageUrls[key];\r\n                     const base64Images = await Promise.all(urls.map(url => toBase64(url.sign)));\r\n                     return { [key]: base64Images };\r\n                 });\r\n-        \r\n+\r\n                 // Set all images as Base64 in the state\r\n                 const base64Data = await Promise.all(imagePromises);\r\n                 const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n                 setImagesBase64(allImages);\r\n             } catch (error) {\r\n                 console.error(\"Error converting images to base64:\", error);\r\n             }\r\n         };\r\n-        \r\n-    \r\n+\r\n+\r\n         fetchImagesAsBase64();\r\n     }, [form]);\r\n-    \r\n \r\n+\r\n     const handleExportWithComponent = () => {\r\n         if (pdfExportComponent.current) {\r\n             pdfExportComponent.current.save();\r\n         }\r\n@@ -191,9 +191,9 @@\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.furtherTreatment?.map((treatment, index) => (<>\r\n                                 <img key={index} src={treatment?.sign} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                                 {treatment?.date}\r\n-                                </>\r\n+                            </>\r\n                             ))}\r\n                         </div>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n"
                },
                {
                    "date": 1743679171245,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -190,9 +190,9 @@\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.furtherTreatment?.map((treatment, index) => (<>\r\n                                 <img key={index} src={treatment?.sign} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n-                                {treatment?.date}\r\n+                                {form?.further_treatment[index]?.date}\r\n                             </>\r\n                             ))}\r\n                         </div>\r\n \r\n"
                },
                {
                    "date": 1743679195607,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -190,9 +190,9 @@\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.furtherTreatment?.map((treatment, index) => (<>\r\n                                 <img key={index} src={treatment?.sign} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n-                                {form?.further_treatment[index]?.date}\r\n+                               <Box> {form?.further_treatment[index]?.date}</Box>\r\n                             </>\r\n                             ))}\r\n                         </div>\r\n \r\n"
                },
                {
                    "date": 1743679203507,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -190,9 +190,9 @@\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.furtherTreatment?.map((treatment, index) => (<>\r\n                                 <img key={index} src={treatment?.sign} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n-                               <Box> {form?.further_treatment[index]?.date}</Box>\r\n+                                <Box> {form?.further_treatment[index]?.date}</Box>\r\n                             </>\r\n                             ))}\r\n                         </div>\r\n \r\n"
                },
                {
                    "date": 1743679233537,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,12 +34,9 @@\n                 const imageUrls = {\r\n                     batch: form?.batch_images || [],\r\n                     before: form?.before_images || [],\r\n                     after: form?.after_images || [],\r\n-                    furtherTreatment: form?.further_treatment?.map(treatment => ({\r\n-                        sign: treatment?.sign,    // Image URL\r\n-                        date: treatment?.date     // Date value\r\n-                    })) || [],\r\n+                    furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n                     patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n                 };\r\n \r\n                 // Convert each image URL to Base64\r\n"
                },
                {
                    "date": 1743679264344,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -184,8 +184,9 @@\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Further Treatment Section */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n+                        {form?.further_treatment[index]?.date}\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.furtherTreatment?.map((treatment, index) => (<>\r\n                                 <img key={index} src={treatment?.sign} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                                 <Box> {form?.further_treatment[index]?.date}</Box>\r\n"
                },
                {
                    "date": 1743679326729,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,30 +37,42 @@\n                     after: form?.after_images || [],\r\n                     furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n                     patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n                 };\r\n-\r\n-                // Convert each image URL to Base64\r\n+    \r\n+                console.log(imageUrls, 'imageUrls'); // Check what URLs are being processed\r\n+    \r\n+                // Convert each image URL to Base64, handle errors for invalid images\r\n                 const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n                     const urls = imageUrls[key];\r\n-                    const base64Images = await Promise.all(urls.map(url => toBase64(url.sign)));\r\n-                    return { [key]: base64Images };\r\n+                    const base64Images = await Promise.all(urls.map(async (url) => {\r\n+                        try {\r\n+                            if (url) {\r\n+                                return await toBase64(url); // Convert URL to Base64 if it exists\r\n+                            }\r\n+                            return null; // Return null if the URL is empty or invalid\r\n+                        } catch (error) {\r\n+                            console.error(`Error converting image to base64 for ${url}:`, error);\r\n+                            return null; // Return null in case of conversion error\r\n+                        }\r\n+                    }));\r\n+    \r\n+                    return { [key]: base64Images.filter(img => img !== null) }; // Filter out null values\r\n                 });\r\n-\r\n+    \r\n                 // Set all images as Base64 in the state\r\n                 const base64Data = await Promise.all(imagePromises);\r\n                 const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n                 setImagesBase64(allImages);\r\n             } catch (error) {\r\n                 console.error(\"Error converting images to base64:\", error);\r\n             }\r\n         };\r\n-\r\n-\r\n+    \r\n         fetchImagesAsBase64();\r\n     }, [form]);\r\n+    \r\n \r\n-\r\n     const handleExportWithComponent = () => {\r\n         if (pdfExportComponent.current) {\r\n             pdfExportComponent.current.save();\r\n         }\r\n@@ -184,14 +196,11 @@\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Further Treatment Section */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n-                        {form?.further_treatment[index]?.date}\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-                            {imagesBase64?.furtherTreatment?.map((treatment, index) => (<>\r\n-                                <img key={index} src={treatment?.sign} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n-                                <Box> {form?.further_treatment[index]?.date}</Box>\r\n-                            </>\r\n+                            {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n+                                <img key={index} src={treatment} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n                         </div>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n"
                },
                {
                    "date": 1743679423654,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,40 +34,45 @@\n                 const imageUrls = {\r\n                     batch: form?.batch_images || [],\r\n                     before: form?.before_images || [],\r\n                     after: form?.after_images || [],\r\n-                    furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n+                    furtherTreatment: form?.further_treatment?.map(treatment => ({\r\n+                        sign: treatment?.sign,\r\n+                        date: treatment?.date || new Date().toISOString() // Assuming there's a date field in treatment, or use current date\r\n+                    })) || [],\r\n                     patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n                 };\r\n-    \r\n+        \r\n                 console.log(imageUrls, 'imageUrls'); // Check what URLs are being processed\r\n-    \r\n+        \r\n                 // Convert each image URL to Base64, handle errors for invalid images\r\n                 const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n                     const urls = imageUrls[key];\r\n                     const base64Images = await Promise.all(urls.map(async (url) => {\r\n                         try {\r\n-                            if (url) {\r\n-                                return await toBase64(url); // Convert URL to Base64 if it exists\r\n+                            if (url.sign) {\r\n+                                const base64 = await toBase64(url.sign); // Convert the sign URL to Base64\r\n+                                return { base64, date: url.date }; // Include the date along with the base64 image\r\n                             }\r\n                             return null; // Return null if the URL is empty or invalid\r\n                         } catch (error) {\r\n-                            console.error(`Error converting image to base64 for ${url}:`, error);\r\n+                            console.error(`Error converting image to base64 for ${url.sign}:`, error);\r\n                             return null; // Return null in case of conversion error\r\n                         }\r\n                     }));\r\n-    \r\n+        \r\n                     return { [key]: base64Images.filter(img => img !== null) }; // Filter out null values\r\n                 });\r\n-    \r\n+        \r\n                 // Set all images as Base64 in the state\r\n                 const base64Data = await Promise.all(imagePromises);\r\n                 const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n                 setImagesBase64(allImages);\r\n             } catch (error) {\r\n                 console.error(\"Error converting images to base64:\", error);\r\n             }\r\n         };\r\n+        \r\n     \r\n         fetchImagesAsBase64();\r\n     }, [form]);\r\n     \r\n"
                },
                {
                    "date": 1743679432131,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -203,9 +203,9 @@\n                         {/* Further Treatment Section */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                                <img key={index} src={treatment} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n+                                <img key={index} src={treatment?.sign} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n                         </div>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n"
                },
                {
                    "date": 1743679458405,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,56 +28,51 @@\n     const pdfExportComponent = useRef(null);\r\n     const [imagesBase64, setImagesBase64] = useState({});\r\n \r\n     useEffect(() => {\r\n-        const fetchImagesAsBase64 = async () => {\r\n-            try {\r\n-                const imageUrls = {\r\n-                    batch: form?.batch_images || [],\r\n-                    before: form?.before_images || [],\r\n-                    after: form?.after_images || [],\r\n-                    furtherTreatment: form?.further_treatment?.map(treatment => ({\r\n-                        sign: treatment?.sign,\r\n-                        date: treatment?.date || new Date().toISOString() // Assuming there's a date field in treatment, or use current date\r\n-                    })) || [],\r\n-                    patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n-                };\r\n-        \r\n-                console.log(imageUrls, 'imageUrls'); // Check what URLs are being processed\r\n-        \r\n-                // Convert each image URL to Base64, handle errors for invalid images\r\n-                const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n-                    const urls = imageUrls[key];\r\n-                    const base64Images = await Promise.all(urls.map(async (url) => {\r\n-                        try {\r\n-                            if (url.sign) {\r\n-                                const base64 = await toBase64(url.sign); // Convert the sign URL to Base64\r\n-                                return { base64, date: url.date }; // Include the date along with the base64 image\r\n-                            }\r\n-                            return null; // Return null if the URL is empty or invalid\r\n-                        } catch (error) {\r\n-                            console.error(`Error converting image to base64 for ${url.sign}:`, error);\r\n-                            return null; // Return null in case of conversion error\r\n+    const fetchImagesAsBase64 = async () => {\r\n+        try {\r\n+            const imageUrls = {\r\n+                batch: form?.batch_images || [],\r\n+                before: form?.before_images || [],\r\n+                after: form?.after_images || [],\r\n+                furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n+                patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n+            };\r\n+\r\n+            console.log(imageUrls, 'imageUrls'); // Check what URLs are being processed\r\n+\r\n+            // Convert each image URL to Base64, handle errors for invalid images\r\n+            const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n+                const urls = imageUrls[key];\r\n+                const base64Images = await Promise.all(urls.map(async (url) => {\r\n+                    try {\r\n+                        if (url) {\r\n+                            return await toBase64(url); // Convert URL to Base64 if it exists\r\n                         }\r\n-                    }));\r\n-        \r\n-                    return { [key]: base64Images.filter(img => img !== null) }; // Filter out null values\r\n-                });\r\n-        \r\n-                // Set all images as Base64 in the state\r\n-                const base64Data = await Promise.all(imagePromises);\r\n-                const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n-                setImagesBase64(allImages);\r\n-            } catch (error) {\r\n-                console.error(\"Error converting images to base64:\", error);\r\n-            }\r\n-        };\r\n-        \r\n-    \r\n-        fetchImagesAsBase64();\r\n-    }, [form]);\r\n-    \r\n+                        return null; // Return null if the URL is empty or invalid\r\n+                    } catch (error) {\r\n+                        console.error(`Error converting image to base64 for ${url}:`, error);\r\n+                        return null; // Return null in case of conversion error\r\n+                    }\r\n+                }));\r\n \r\n+                return { [key]: base64Images.filter(img => img !== null) }; // Filter out null values\r\n+            });\r\n+\r\n+            // Set all images as Base64 in the state\r\n+            const base64Data = await Promise.all(imagePromises);\r\n+            const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n+            setImagesBase64(allImages);\r\n+        } catch (error) {\r\n+            console.error(\"Error converting images to base64:\", error);\r\n+        }\r\n+    };\r\n+\r\n+    fetchImagesAsBase64();\r\n+}, [form]);\r\n+\r\n+\r\n     const handleExportWithComponent = () => {\r\n         if (pdfExportComponent.current) {\r\n             pdfExportComponent.current.save();\r\n         }\r\n@@ -203,9 +198,9 @@\n                         {/* Further Treatment Section */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                                <img key={index} src={treatment?.sign} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n+                                <img key={index} src={treatment} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n                         </div>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n"
                },
                {
                    "date": 1743679469215,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,51 +28,38 @@\n     const pdfExportComponent = useRef(null);\r\n     const [imagesBase64, setImagesBase64] = useState({});\r\n \r\n     useEffect(() => {\r\n-    const fetchImagesAsBase64 = async () => {\r\n-        try {\r\n-            const imageUrls = {\r\n-                batch: form?.batch_images || [],\r\n-                before: form?.before_images || [],\r\n-                after: form?.after_images || [],\r\n-                furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n-                patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n-            };\r\n+        const fetchImagesAsBase64 = async () => {\r\n+            try {\r\n+                const imageUrls = {\r\n+                    batch: form?.batch_images || [],\r\n+                    before: form?.before_images || [],\r\n+                    after: form?.after_images || [],\r\n+                    furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n+                    patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n+                };\r\n+                console.log(imageUrls, 'imageUrls');\r\n \r\n-            console.log(imageUrls, 'imageUrls'); // Check what URLs are being processed\r\n+                // Convert each image URL to Base64\r\n+                const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n+                    const urls = imageUrls[key];\r\n+                    const base64Images = await Promise.all(urls.map(url => toBase64(url)));\r\n+                    return { [key]: base64Images };\r\n+                });\r\n \r\n-            // Convert each image URL to Base64, handle errors for invalid images\r\n-            const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n-                const urls = imageUrls[key];\r\n-                const base64Images = await Promise.all(urls.map(async (url) => {\r\n-                    try {\r\n-                        if (url) {\r\n-                            return await toBase64(url); // Convert URL to Base64 if it exists\r\n-                        }\r\n-                        return null; // Return null if the URL is empty or invalid\r\n-                    } catch (error) {\r\n-                        console.error(`Error converting image to base64 for ${url}:`, error);\r\n-                        return null; // Return null in case of conversion error\r\n-                    }\r\n-                }));\r\n+                // Set all images as Base64 in the state\r\n+                const base64Data = await Promise.all(imagePromises);\r\n+                const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n+                setImagesBase64(allImages);\r\n+            } catch (error) {\r\n+                console.error(\"Error converting images to base64:\", error);\r\n+            }\r\n+        };\r\n \r\n-                return { [key]: base64Images.filter(img => img !== null) }; // Filter out null values\r\n-            });\r\n+        fetchImagesAsBase64();\r\n+    }, [form]);\r\n \r\n-            // Set all images as Base64 in the state\r\n-            const base64Data = await Promise.all(imagePromises);\r\n-            const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n-            setImagesBase64(allImages);\r\n-        } catch (error) {\r\n-            console.error(\"Error converting images to base64:\", error);\r\n-        }\r\n-    };\r\n-\r\n-    fetchImagesAsBase64();\r\n-}, [form]);\r\n-\r\n-\r\n     const handleExportWithComponent = () => {\r\n         if (pdfExportComponent.current) {\r\n             pdfExportComponent.current.save();\r\n         }\r\n"
                },
                {
                    "date": 1743679513325,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -186,8 +186,9 @@\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n                                 <img key={index} src={treatment} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n+                                {form?.further_treatment[0]?.date}\r\n                             ))}\r\n                         </div>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n"
                },
                {
                    "date": 1743679590601,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -184,14 +184,25 @@\n \r\n                         {/* Further Treatment Section */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-                            {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                                <img key={index} src={treatment} alt=\"Further Treatment Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n-                                {form?.further_treatment[0]?.date}\r\n-                            ))}\r\n-                        </div>\r\n+    {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n+        <div key={index} style={{ textAlign: \"center\", border: \"2px solid #ddd\", borderRadius: \"8px\", padding: \"10px\" }}>\r\n+            {/* Image */}\r\n+            <img\r\n+                src={treatment.base64} // Assuming each treatment has base64 image data\r\n+                alt=\"Further Treatment Sign\"\r\n+                style={{ width: \"200px\", borderRadius: \"8px\", marginBottom: \"10px\" }}\r\n+            />\r\n+            {/* Date */}\r\n+            <div style={{ marginTop: \"5px\", color: \"#555\" }}>\r\n+                {form?.further_treatment?.[index]?.date || \"No Date Available\"}\r\n+            </div>\r\n+        </div>\r\n+    ))}\r\n+</div>\r\n \r\n+\r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Patient Consent */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n"
                },
                {
                    "date": 1743679602652,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -194,9 +194,9 @@\n                 style={{ width: \"200px\", borderRadius: \"8px\", marginBottom: \"10px\" }}\r\n             />\r\n             {/* Date */}\r\n             <div style={{ marginTop: \"5px\", color: \"#555\" }}>\r\n-                {form?.further_treatment?.[index]?.date || \"No Date Available\"}\r\n+                {form?.further_treatment?.[0]?.date || \"No Date Available\"}\r\n             </div>\r\n         </div>\r\n     ))}\r\n </div>\r\n"
                },
                {
                    "date": 1743679657717,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -184,25 +184,33 @@\n \r\n                         {/* Further Treatment Section */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-    {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-        <div key={index} style={{ textAlign: \"center\", border: \"2px solid #ddd\", borderRadius: \"8px\", padding: \"10px\" }}>\r\n-            {/* Image */}\r\n-            <img\r\n-                src={treatment.base64} // Assuming each treatment has base64 image data\r\n-                alt=\"Further Treatment Sign\"\r\n-                style={{ width: \"200px\", borderRadius: \"8px\", marginBottom: \"10px\" }}\r\n-            />\r\n-            {/* Date */}\r\n-            <div style={{ marginTop: \"5px\", color: \"#555\" }}>\r\n-                {form?.further_treatment?.[0]?.date || \"No Date Available\"}\r\n-            </div>\r\n-        </div>\r\n-    ))}\r\n+                            {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n+                                <div key={index} style={{ textAlign: \"center\", border: \"2px solid #ddd\", borderRadius: \"8px\", padding: \"10px\" }}>\r\n+                                    {/* Image */}\r\n+                                    <img\r\n+                                        src={treatment.base64} // Assuming each treatment has base64 image data\r\n+                                        alt=\"Further Treatment Sign\"\r\n+                                        style={{ width: \"200px\", borderRadius: \"8px\", marginBottom: \"10px\" }}\r\n+                                    />\r\n+                                    {/* Date */}\r\n+                                    <div style={{ marginTop: \"5px\", color: \"#555\", fontSize: \"14px\" }}>\r\n+    {form?.further_treatment?.[0]?.date\r\n+        ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n+              weekday: \"long\",\r\n+              year: \"numeric\",\r\n+              month: \"long\",\r\n+              day: \"numeric\",\r\n+          })\r\n+        : \"No Date Available\"}\r\n </div>\r\n \r\n+                                </div>\r\n+                            ))}\r\n+                        </div>\r\n \r\n+\r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Patient Consent */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n"
                },
                {
                    "date": 1743679721765,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -183,34 +183,54 @@\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Further Treatment Section */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n-                        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-                            {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                                <div key={index} style={{ textAlign: \"center\", border: \"2px solid #ddd\", borderRadius: \"8px\", padding: \"10px\" }}>\r\n-                                    {/* Image */}\r\n-                                    <img\r\n-                                        src={treatment.base64} // Assuming each treatment has base64 image data\r\n-                                        alt=\"Further Treatment Sign\"\r\n-                                        style={{ width: \"200px\", borderRadius: \"8px\", marginBottom: \"10px\" }}\r\n-                                    />\r\n-                                    {/* Date */}\r\n-                                    <div style={{ marginTop: \"5px\", color: \"#555\", fontSize: \"14px\" }}>\r\n-    {form?.further_treatment?.[0]?.date\r\n-        ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n-              weekday: \"long\",\r\n-              year: \"numeric\",\r\n-              month: \"long\",\r\n-              day: \"numeric\",\r\n-          })\r\n-        : \"No Date Available\"}\r\n+                        <div style={{ marginTop: \"10px\" }}>\r\n+    <Grid container spacing={2}>\r\n+        {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n+            <Grid item xs={12} sm={6} md={4} key={index}>\r\n+                <div\r\n+                    style={{\r\n+                        textAlign: \"center\",\r\n+                        border: \"2px solid #ddd\",\r\n+                        borderRadius: \"8px\",\r\n+                        padding: \"10px\",\r\n+                        display: \"flex\",\r\n+                        flexDirection: \"column\",\r\n+                        alignItems: \"center\",\r\n+                    }}\r\n+                >\r\n+                    {/* Image */}\r\n+                    <img\r\n+                        src={treatment.base64} // Assuming each treatment has base64 image data\r\n+                        alt=\"Further Treatment Sign\"\r\n+                        style={{\r\n+                            width: \"200px\",\r\n+                            borderRadius: \"8px\",\r\n+                            marginBottom: \"10px\",\r\n+                        }}\r\n+                    />\r\n+                    {/* Date */}\r\n+                    <Typography\r\n+                        variant=\"body2\"\r\n+                        style={{ marginTop: \"5px\", color: \"#555\", fontSize: \"14px\" }}\r\n+                    >\r\n+                        {form?.further_treatment?.[0]?.date\r\n+                            ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n+                                  weekday: \"long\",\r\n+                                  year: \"numeric\",\r\n+                                  month: \"long\",\r\n+                                  day: \"numeric\",\r\n+                              })\r\n+                            : \"No Date Available\"}\r\n+                    </Typography>\r\n+                </div>\r\n+            </Grid>\r\n+        ))}\r\n+    </Grid>\r\n </div>\r\n \r\n-                                </div>\r\n-                            ))}\r\n-                        </div>\r\n \r\n-\r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Patient Consent */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n"
                },
                {
                    "date": 1743679759423,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -184,51 +184,40 @@\n \r\n                         {/* Further Treatment Section */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n                         <div style={{ marginTop: \"10px\" }}>\r\n-    <Grid container spacing={2}>\r\n-        {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-            <Grid item xs={12} sm={6} md={4} key={index}>\r\n-                <div\r\n-                    style={{\r\n-                        textAlign: \"center\",\r\n-                        border: \"2px solid #ddd\",\r\n-                        borderRadius: \"8px\",\r\n-                        padding: \"10px\",\r\n-                        display: \"flex\",\r\n-                        flexDirection: \"column\",\r\n-                        alignItems: \"center\",\r\n-                    }}\r\n-                >\r\n-                    {/* Image */}\r\n-                    <img\r\n-                        src={treatment.base64} // Assuming each treatment has base64 image data\r\n-                        alt=\"Further Treatment Sign\"\r\n-                        style={{\r\n-                            width: \"200px\",\r\n-                            borderRadius: \"8px\",\r\n-                            marginBottom: \"10px\",\r\n-                        }}\r\n-                    />\r\n-                    {/* Date */}\r\n-                    <Typography\r\n-                        variant=\"body2\"\r\n-                        style={{ marginTop: \"5px\", color: \"#555\", fontSize: \"14px\" }}\r\n-                    >\r\n-                        {form?.further_treatment?.[0]?.date\r\n-                            ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n-                                  weekday: \"long\",\r\n-                                  year: \"numeric\",\r\n-                                  month: \"long\",\r\n-                                  day: \"numeric\",\r\n-                              })\r\n-                            : \"No Date Available\"}\r\n-                    </Typography>\r\n-                </div>\r\n-            </Grid>\r\n-        ))}\r\n-    </Grid>\r\n-</div>\r\n+                            <Grid container spacing={2}>\r\n+                                {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n+                                    <Grid item xs={12} sm={6} md={4} key={index}>\r\n+                                        <div\r\n+                                            style={{\r\n+                                                textAlign: \"center\",\r\n+                                                border: \"2px solid #ddd\",\r\n+                                                borderRadius: \"8px\",\r\n+                                                padding: \"10px\",\r\n+                                                display: \"flex\",\r\n+                                                flexDirection: \"column\",\r\n+                                                alignItems: \"center\",\r\n+                                            }}\r\n+                                        >\r\n+                                            {/* Image */}\r\n+                                            <img\r\n+                                                src={treatment.base64} // Assuming each treatment has base64 image data\r\n+                                                alt=\"Further Treatment Sign\"\r\n+                                                style={{\r\n+                                                    width: \"200px\",\r\n+                                                    borderRadius: \"8px\",\r\n+                                                    marginBottom: \"10px\",\r\n+                                                }}\r\n+                                            />\r\n+                                            {/* Date */}\r\n+                                          \r\n+                                        </div>\r\n+                                    </Grid>\r\n+                                     <Grid item xs={12} sm={6} md={4} key={index}></Grid>\r\n+                                ))}\r\n+                            </Grid>\r\n+                        </div>\r\n \r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n"
                },
                {
                    "date": 1743679772193,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -208,13 +208,15 @@\n                                                     borderRadius: \"8px\",\r\n                                                     marginBottom: \"10px\",\r\n                                                 }}\r\n                                             />\r\n-                                            {/* Date */}\r\n+                                           \r\n                                           \r\n                                         </div>\r\n                                     </Grid>\r\n-                                     <Grid item xs={12} sm={6} md={4} key={index}></Grid>\r\n+                                     <Grid item xs={12} sm={6} md={4} key={index}>\r\n+\r\n+                                     </Grid>\r\n                                 ))}\r\n                             </Grid>\r\n                         </div>\r\n \r\n"
                },
                {
                    "date": 1743679790957,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -213,9 +213,21 @@\n                                           \r\n                                         </div>\r\n                                     </Grid>\r\n                                      <Grid item xs={12} sm={6} md={4} key={index}>\r\n-\r\n+  <Typography\r\n+                                                variant=\"body2\"\r\n+                                                style={{ marginTop: \"5px\", color: \"#555\", fontSize: \"14px\" }}\r\n+                                            >\r\n+                                                {form?.further_treatment?.[0]?.date\r\n+                                                    ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n+                                                        weekday: \"long\",\r\n+                                                        year: \"numeric\",\r\n+                                                        month: \"long\",\r\n+                                                        day: \"numeric\",\r\n+                                                    })\r\n+                                                    : \"No Date Available\"}\r\n+                                            </Typography>\r\n                                      </Grid>\r\n                                 ))}\r\n                             </Grid>\r\n                         </div>\r\n"
                },
                {
                    "date": 1743679822777,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -184,53 +184,51 @@\n \r\n                         {/* Further Treatment Section */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n                         <div style={{ marginTop: \"10px\" }}>\r\n-                            <Grid container spacing={2}>\r\n-                                {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                                    <Grid item xs={12} sm={6} md={4} key={index}>\r\n-                                        <div\r\n-                                            style={{\r\n-                                                textAlign: \"center\",\r\n-                                                border: \"2px solid #ddd\",\r\n-                                                borderRadius: \"8px\",\r\n-                                                padding: \"10px\",\r\n-                                                display: \"flex\",\r\n-                                                flexDirection: \"column\",\r\n-                                                alignItems: \"center\",\r\n-                                            }}\r\n-                                        >\r\n-                                            {/* Image */}\r\n-                                            <img\r\n-                                                src={treatment.base64} // Assuming each treatment has base64 image data\r\n-                                                alt=\"Further Treatment Sign\"\r\n-                                                style={{\r\n-                                                    width: \"200px\",\r\n-                                                    borderRadius: \"8px\",\r\n-                                                    marginBottom: \"10px\",\r\n-                                                }}\r\n-                                            />\r\n-                                           \r\n-                                          \r\n-                                        </div>\r\n-                                    </Grid>\r\n-                                     <Grid item xs={12} sm={6} md={4} key={index}>\r\n-  <Typography\r\n-                                                variant=\"body2\"\r\n-                                                style={{ marginTop: \"5px\", color: \"#555\", fontSize: \"14px\" }}\r\n-                                            >\r\n-                                                {form?.further_treatment?.[0]?.date\r\n-                                                    ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n-                                                        weekday: \"long\",\r\n-                                                        year: \"numeric\",\r\n-                                                        month: \"long\",\r\n-                                                        day: \"numeric\",\r\n-                                                    })\r\n-                                                    : \"No Date Available\"}\r\n-                                            </Typography>\r\n-                                     </Grid>\r\n-                                ))}\r\n-                            </Grid>\r\n+                        <Grid container spacing={2}>\r\n+    {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n+        <Grid item xs={12} sm={6} md={4} key={index}>\r\n+            <div\r\n+                style={{\r\n+                    textAlign: \"center\",\r\n+                    border: \"2px solid #ddd\",\r\n+                    borderRadius: \"8px\",\r\n+                    padding: \"10px\",\r\n+                    display: \"flex\",\r\n+                    flexDirection: \"column\",\r\n+                    alignItems: \"center\",\r\n+                }}\r\n+            >\r\n+                {/* Image */}\r\n+                <img\r\n+                    src={treatment.base64} // Assuming each treatment has base64 image data\r\n+                    alt=\"Further Treatment Sign\"\r\n+                    style={{\r\n+                        width: \"200px\",\r\n+                        borderRadius: \"8px\",\r\n+                        marginBottom: \"10px\",\r\n+                    }}\r\n+                />\r\n+                {/* Date */}\r\n+                <Typography\r\n+                    variant=\"body2\"\r\n+                    style={{ marginTop: \"5px\", color: \"#555\", fontSize: \"14px\" }}\r\n+                >\r\n+                    {form?.further_treatment?.[0]?.date\r\n+                        ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n+                              weekday: \"long\",\r\n+                              year: \"numeric\",\r\n+                              month: \"long\",\r\n+                              day: \"numeric\",\r\n+                          })\r\n+                        : \"No Date Available\"}\r\n+                </Typography>\r\n+            </div>\r\n+        </Grid>\r\n+    ))}\r\n+</Grid>\r\n+\r\n                         </div>\r\n \r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n"
                },
                {
                    "date": 1743679899935,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -186,49 +186,69 @@\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n                         <div style={{ marginTop: \"10px\" }}>\r\n                         <Grid container spacing={2}>\r\n     {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-        <Grid item xs={12} sm={6} md={4} key={index}>\r\n-            <div\r\n-                style={{\r\n-                    textAlign: \"center\",\r\n-                    border: \"2px solid #ddd\",\r\n-                    borderRadius: \"8px\",\r\n-                    padding: \"10px\",\r\n-                    display: \"flex\",\r\n-                    flexDirection: \"column\",\r\n-                    alignItems: \"center\",\r\n-                }}\r\n-            >\r\n-                {/* Image */}\r\n-                <img\r\n-                    src={treatment.base64} // Assuming each treatment has base64 image data\r\n-                    alt=\"Further Treatment Sign\"\r\n+        <>\r\n+            {/* Image Grid Item */}\r\n+            <Grid item xs={12} sm={6} md={6} key={`image-${index}`}>\r\n+                <div\r\n                     style={{\r\n-                        width: \"200px\",\r\n+                        textAlign: \"center\",\r\n+                        border: \"2px solid #ddd\",\r\n                         borderRadius: \"8px\",\r\n-                        marginBottom: \"10px\",\r\n+                        padding: \"10px\",\r\n+                        display: \"flex\",\r\n+                        flexDirection: \"column\",\r\n+                        alignItems: \"center\",\r\n                     }}\r\n-                />\r\n-                {/* Date */}\r\n-                <Typography\r\n-                    variant=\"body2\"\r\n-                    style={{ marginTop: \"5px\", color: \"#555\", fontSize: \"14px\" }}\r\n                 >\r\n-                    {form?.further_treatment?.[0]?.date\r\n-                        ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n-                              weekday: \"long\",\r\n-                              year: \"numeric\",\r\n-                              month: \"long\",\r\n-                              day: \"numeric\",\r\n-                          })\r\n-                        : \"No Date Available\"}\r\n-                </Typography>\r\n-            </div>\r\n-        </Grid>\r\n+                    {/* Image */}\r\n+                    <img\r\n+                        src={treatment.base64} // Assuming each treatment has base64 image data\r\n+                        alt=\"Further Treatment Sign\"\r\n+                        style={{\r\n+                            width: \"200px\",\r\n+                            borderRadius: \"8px\",\r\n+                            marginBottom: \"10px\",\r\n+                        }}\r\n+                    />\r\n+                </div>\r\n+            </Grid>\r\n+\r\n+            {/* Date Grid Item */}\r\n+            <Grid item xs={12} sm={6} md={6} key={`date-${index}`}>\r\n+                <div\r\n+                    style={{\r\n+                        textAlign: \"center\",\r\n+                        border: \"2px solid #ddd\",\r\n+                        borderRadius: \"8px\",\r\n+                        padding: \"10px\",\r\n+                        display: \"flex\",\r\n+                        flexDirection: \"column\",\r\n+                        alignItems: \"center\",\r\n+                    }}\r\n+                >\r\n+                    {/* Date */}\r\n+                    <Typography\r\n+                        variant=\"body2\"\r\n+                        style={{ marginTop: \"5px\", color: \"#555\", fontSize: \"14px\" }}\r\n+                    >\r\n+                        {form?.further_treatment?.[0]?.date\r\n+                            ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n+                                  weekday: \"long\",\r\n+                                  year: \"numeric\",\r\n+                                  month: \"long\",\r\n+                                  day: \"numeric\",\r\n+                              })\r\n+                            : \"No Date Available\"}\r\n+                    </Typography>\r\n+                </div>\r\n+            </Grid>\r\n+        </>\r\n     ))}\r\n </Grid>\r\n \r\n+\r\n                         </div>\r\n \r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n"
                },
                {
                    "date": 1743679912021,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -218,9 +218,9 @@\n             <Grid item xs={12} sm={6} md={6} key={`date-${index}`}>\r\n                 <div\r\n                     style={{\r\n                         textAlign: \"center\",\r\n-                        border: \"2px solid #ddd\",\r\n+                        \r\n                         borderRadius: \"8px\",\r\n                         padding: \"10px\",\r\n                         display: \"flex\",\r\n                         flexDirection: \"column\",\r\n"
                },
                {
                    "date": 1743679928593,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -187,33 +187,9 @@\n                         <div style={{ marginTop: \"10px\" }}>\r\n                         <Grid container spacing={2}>\r\n     {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n         <>\r\n-            {/* Image Grid Item */}\r\n-            <Grid item xs={12} sm={6} md={6} key={`image-${index}`}>\r\n-                <div\r\n-                    style={{\r\n-                        textAlign: \"center\",\r\n-                        border: \"2px solid #ddd\",\r\n-                        borderRadius: \"8px\",\r\n-                        padding: \"10px\",\r\n-                        display: \"flex\",\r\n-                        flexDirection: \"column\",\r\n-                        alignItems: \"center\",\r\n-                    }}\r\n-                >\r\n-                    {/* Image */}\r\n-                    <img\r\n-                        src={treatment.base64} // Assuming each treatment has base64 image data\r\n-                        alt=\"Further Treatment Sign\"\r\n-                        style={{\r\n-                            width: \"200px\",\r\n-                            borderRadius: \"8px\",\r\n-                            marginBottom: \"10px\",\r\n-                        }}\r\n-                    />\r\n-                </div>\r\n-            </Grid>\r\n+         \r\n \r\n             {/* Date Grid Item */}\r\n             <Grid item xs={12} sm={6} md={6} key={`date-${index}`}>\r\n                 <div\r\n@@ -242,8 +218,33 @@\n                             : \"No Date Available\"}\r\n                     </Typography>\r\n                 </div>\r\n             </Grid>\r\n+               {/* Image Grid Item */}\r\n+               <Grid item xs={12} sm={6} md={6} key={`image-${index}`}>\r\n+                <div\r\n+                    style={{\r\n+                        textAlign: \"center\",\r\n+                        border: \"2px solid #ddd\",\r\n+                        borderRadius: \"8px\",\r\n+                        padding: \"10px\",\r\n+                        display: \"flex\",\r\n+                        flexDirection: \"column\",\r\n+                        alignItems: \"center\",\r\n+                    }}\r\n+                >\r\n+                    {/* Image */}\r\n+                    <img\r\n+                        src={treatment.base64} // Assuming each treatment has base64 image data\r\n+                        alt=\"Further Treatment Sign\"\r\n+                        style={{\r\n+                            width: \"200px\",\r\n+                            borderRadius: \"8px\",\r\n+                            marginBottom: \"10px\",\r\n+                        }}\r\n+                    />\r\n+                </div>\r\n+            </Grid>\r\n         </>\r\n     ))}\r\n </Grid>\r\n \r\n"
                },
                {
                    "date": 1743679959903,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -205,9 +205,9 @@\n                 >\r\n                     {/* Date */}\r\n                     <Typography\r\n                         variant=\"body2\"\r\n-                        style={{ marginTop: \"5px\", color: \"#555\", fontSize: \"14px\" }}\r\n+                        style={{ marginTop: \"5px\", fontSize: \"14px\" }}\r\n                     >\r\n                         {form?.further_treatment?.[0]?.date\r\n                             ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n                                   weekday: \"long\",\r\n"
                },
                {
                    "date": 1743679965455,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -207,9 +207,9 @@\n                     <Typography\r\n                         variant=\"body2\"\r\n                         style={{ marginTop: \"5px\", fontSize: \"14px\" }}\r\n                     >\r\n-                        {form?.further_treatment?.[0]?.date\r\n+                       Date : {form?.further_treatment?.[0]?.date\r\n                             ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n                                   weekday: \"long\",\r\n                                   year: \"numeric\",\r\n                                   month: \"long\",\r\n"
                },
                {
                    "date": 1743680016404,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -233,9 +233,9 @@\n                     }}\r\n                 >\r\n                     {/* Image */}\r\n                     <img\r\n-                        src={treatment.base64} // Assuming each treatment has base64 image data\r\n+                        src={treatment} // Assuming each treatment has base64 image data\r\n                         alt=\"Further Treatment Sign\"\r\n                         style={{\r\n                             width: \"200px\",\r\n                             borderRadius: \"8px\",\r\n"
                },
                {
                    "date": 1743680048790,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -184,72 +184,72 @@\n \r\n                         {/* Further Treatment Section */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n                         <div style={{ marginTop: \"10px\" }}>\r\n-                        <Grid container spacing={2}>\r\n-    {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-        <>\r\n-         \r\n+                            <Grid container spacing={2}>\r\n+                                {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n+                                    <>\r\n \r\n-            {/* Date Grid Item */}\r\n-            <Grid item xs={12} sm={6} md={6} key={`date-${index}`}>\r\n-                <div\r\n-                    style={{\r\n-                        textAlign: \"center\",\r\n-                        \r\n-                        borderRadius: \"8px\",\r\n-                        padding: \"10px\",\r\n-                        display: \"flex\",\r\n-                        flexDirection: \"column\",\r\n-                        alignItems: \"center\",\r\n-                    }}\r\n-                >\r\n-                    {/* Date */}\r\n-                    <Typography\r\n-                        variant=\"body2\"\r\n-                        style={{ marginTop: \"5px\", fontSize: \"14px\" }}\r\n-                    >\r\n-                       Date : {form?.further_treatment?.[0]?.date\r\n-                            ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n-                                  weekday: \"long\",\r\n-                                  year: \"numeric\",\r\n-                                  month: \"long\",\r\n-                                  day: \"numeric\",\r\n-                              })\r\n-                            : \"No Date Available\"}\r\n-                    </Typography>\r\n-                </div>\r\n-            </Grid>\r\n-               {/* Image Grid Item */}\r\n-               <Grid item xs={12} sm={6} md={6} key={`image-${index}`}>\r\n-                <div\r\n-                    style={{\r\n-                        textAlign: \"center\",\r\n-                        border: \"2px solid #ddd\",\r\n-                        borderRadius: \"8px\",\r\n-                        padding: \"10px\",\r\n-                        display: \"flex\",\r\n-                        flexDirection: \"column\",\r\n-                        alignItems: \"center\",\r\n-                    }}\r\n-                >\r\n-                    {/* Image */}\r\n-                    <img\r\n-                        src={treatment} // Assuming each treatment has base64 image data\r\n-                        alt=\"Further Treatment Sign\"\r\n-                        style={{\r\n-                            width: \"200px\",\r\n-                            borderRadius: \"8px\",\r\n-                            marginBottom: \"10px\",\r\n-                        }}\r\n-                    />\r\n-                </div>\r\n-            </Grid>\r\n-        </>\r\n-    ))}\r\n-</Grid>\r\n \r\n+                                        {/* Date Grid Item */}\r\n+                                        <Grid item xs={12} sm={6} md={6} key={`date-${index}`}>\r\n+                                            <div\r\n+                                                style={{\r\n+                                                    textAlign: \"center\",\r\n \r\n+                                                    borderRadius: \"8px\",\r\n+                                                    padding: \"10px\",\r\n+                                                    display: \"flex\",\r\n+                                                    flexDirection: \"column\",\r\n+                                                    alignItems: \"center\",\r\n+                                                }}\r\n+                                            >\r\n+                                                {/* Date */}\r\n+                                                <Typography\r\n+                                                    variant=\"body2\"\r\n+                                                    style={{ marginTop: \"5px\", fontSize: \"14px\" }}\r\n+                                                >\r\n+                                                    Date : {form?.further_treatment?.[0]?.date\r\n+                                                        ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n+                                                            weekday: \"long\",\r\n+                                                            year: \"numeric\",\r\n+                                                            month: \"long\",\r\n+                                                            day: \"numeric\",\r\n+                                                        })\r\n+                                                        : \"No Date Available\"}\r\n+                                                </Typography>\r\n+                                            </div>\r\n+                                        </Grid>\r\n+                                        {/* Image Grid Item */}\r\n+                                        <Grid item xs={12} sm={6} md={6} key={`image-${index}`}>\r\n+                                            <div\r\n+                                                style={{\r\n+                                                    textAlign: \"center\",\r\n+                                                    border: \"2px solid #ddd\",\r\n+                                                    borderRadius: \"8px\",\r\n+                                                    padding: \"10px\",\r\n+                                                    display: \"flex\",\r\n+                                                    flexDirection: \"column\",\r\n+                                                    alignItems: \"center\",\r\n+                                                }}\r\n+                                            >\r\n+                                                {/* Image */}\r\n+                                                <img\r\n+                                                    src={treatment} // Assuming each treatment has base64 image data\r\n+                                                    alt=\"Further Treatment Sign\"\r\n+                                                    style={{\r\n+                                                        width: \"200px\",\r\n+                                                        borderRadius: \"8px\",\r\n+                                                        marginBottom: \"10px\",\r\n+                                                    }}\r\n+                                                />\r\n+                                            </div>\r\n+                                        </Grid>\r\n+                                    </>\r\n+                                ))}\r\n+                            </Grid>\r\n+\r\n+\r\n                         </div>\r\n \r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n"
                },
                {
                    "date": 1743680055714,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -220,8 +220,9 @@\n                                             </div>\r\n                                         </Grid>\r\n                                         {/* Image Grid Item */}\r\n                                         <Grid item xs={12} sm={6} md={6} key={`image-${index}`}>\r\n+                                        <Typography><strong>Patient Signature:</strong> </Typography> \r\n                                             <div\r\n                                                 style={{\r\n                                                     textAlign: \"center\",\r\n                                                     border: \"2px solid #ddd\",\r\n"
                },
                {
                    "date": 1743680091949,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -207,9 +207,9 @@\n                                                 <Typography\r\n                                                     variant=\"body2\"\r\n                                                     style={{ marginTop: \"5px\", fontSize: \"14px\" }}\r\n                                                 >\r\n-                                                    Date : {form?.further_treatment?.[0]?.date\r\n+                                                 <strong>  Date : </strong>  {form?.further_treatment?.[0]?.date\r\n                                                         ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n                                                             weekday: \"long\",\r\n                                                             year: \"numeric\",\r\n                                                             month: \"long\",\r\n"
                },
                {
                    "date": 1743680104940,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -205,9 +205,9 @@\n                                             >\r\n                                                 {/* Date */}\r\n                                                 <Typography\r\n                                                     variant=\"body2\"\r\n-                                                    style={{ marginTop: \"5px\", fontSize: \"14px\" }}\r\n+                                                    style={{ marginTop: \"5px\", fontSize: \"14px\",textAlign:'left' }}\r\n                                                 >\r\n                                                  <strong>  Date : </strong>  {form?.further_treatment?.[0]?.date\r\n                                                         ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n                                                             weekday: \"long\",\r\n"
                },
                {
                    "date": 1743680127738,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -193,9 +193,9 @@\n                                         {/* Date Grid Item */}\r\n                                         <Grid item xs={12} sm={6} md={6} key={`date-${index}`}>\r\n                                             <div\r\n                                                 style={{\r\n-                                                    textAlign: \"center\",\r\n+                                                    textAlign: \"left\",\r\n \r\n                                                     borderRadius: \"8px\",\r\n                                                     padding: \"10px\",\r\n                                                     display: \"flex\",\r\n"
                },
                {
                    "date": 1743680135833,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -199,9 +199,9 @@\n                                                     borderRadius: \"8px\",\r\n                                                     padding: \"10px\",\r\n                                                     display: \"flex\",\r\n                                                     flexDirection: \"column\",\r\n-                                                    alignItems: \"center\",\r\n+                                                    alignItems: \"flex-start\",\r\n                                                 }}\r\n                                             >\r\n                                                 {/* Date */}\r\n                                                 <Typography\r\n"
                },
                {
                    "date": 1743680165681,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -169,9 +169,9 @@\n                                     </TableHead>\r\n                                     <TableBody>\r\n                                         {form?.treatment_record?.map((record, index) => (\r\n                                             <TableRow key={index}>\r\n-                                                <TableCell>{new Date(record.treatment_date).toLocaleDateString()}</TableCell>\r\n+                                                <TableCell>{new Date(record.date).toLocaleDateString()}</TableCell>\r\n                                                 <TableCell>{record.description}</TableCell>\r\n                                                 <TableCell>${record.amount}</TableCell>\r\n                                             </TableRow>\r\n                                         ))}\r\n"
                },
                {
                    "date": 1743680542594,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -205,11 +205,11 @@\n                                             >\r\n                                                 {/* Date */}\r\n                                                 <Typography\r\n                                                     variant=\"body2\"\r\n-                                                    style={{ marginTop: \"5px\", fontSize: \"14px\",textAlign:'left' }}\r\n+                                                    style={{ marginTop: \"5px\", fontSize: \"14px\", textAlign: 'left' }}\r\n                                                 >\r\n-                                                 <strong>  Date : </strong>  {form?.further_treatment?.[0]?.date\r\n+                                                    <strong>  Date : </strong>  {form?.further_treatment?.[0]?.date\r\n                                                         ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n                                                             weekday: \"long\",\r\n                                                             year: \"numeric\",\r\n                                                             month: \"long\",\r\n@@ -220,9 +220,9 @@\n                                             </div>\r\n                                         </Grid>\r\n                                         {/* Image Grid Item */}\r\n                                         <Grid item xs={12} sm={6} md={6} key={`image-${index}`}>\r\n-                                        <Typography><strong>Patient Signature:</strong> </Typography> \r\n+                                            <Typography><strong>Patient Signature:</strong> </Typography>\r\n                                             <div\r\n                                                 style={{\r\n                                                     textAlign: \"center\",\r\n                                                     border: \"2px solid #ddd\",\r\n@@ -256,11 +256,69 @@\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Patient Consent */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n-                        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-                            <img src={imagesBase64?.patientConsent?.[0]} alt=\"Patient Consent Sign\" style={{ width: \"200px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n-                        </div>\r\n+                        <Grid item xs={12} sm={6} md={6}>\r\n+                            <div\r\n+                                style={{\r\n+                                    textAlign: \"center\",\r\n+                                    border: \"2px solid #ddd\",\r\n+                                    borderRadius: \"8px\",\r\n+                                    padding: \"10px\",\r\n+                                    display: \"flex\",\r\n+                                    flexDirection: \"column\",\r\n+                                    alignItems: \"center\",\r\n+                                }}\r\n+                            >\r\n+                                {/* Patient Consent Details */}\r\n+                                <Typography variant=\"body2\" style={{ marginBottom: \"10px\", color: \"#555\", fontSize: \"14px\" }}>\r\n+                                    {form?.patient_consent?.details || \"No Patient Consent Details Available\"}\r\n+                                </Typography>\r\n+                            </div>\r\n+                        </Grid>\r\n+\r\n+                        {/* Patient Consent Signature */}\r\n+                        <Grid item xs={12} sm={6} md={6}>\r\n+                            <div\r\n+                                style={{\r\n+                                    textAlign: \"center\",\r\n+                                    border: \"2px solid #ddd\",\r\n+                                    borderRadius: \"8px\",\r\n+                                    padding: \"10px\",\r\n+                                    display: \"flex\",\r\n+                                    flexDirection: \"column\",\r\n+                                    alignItems: \"center\",\r\n+                                }}\r\n+                            >\r\n+                                {/* Patient Consent Signature */}\r\n+                                {form?.patient_consent?.sign && (\r\n+                                    <img\r\n+                                        src={form.patient_consent.sign} // Assuming the signature is a URL or base64\r\n+                                        alt=\"Patient Consent Signature\"\r\n+                                        style={{\r\n+                                            width: \"200px\",\r\n+                                            borderRadius: \"8px\",\r\n+                                            marginBottom: \"10px\",\r\n+                                        }}\r\n+                                    />\r\n+                                )}\r\n+\r\n+                                {/* Patient Consent Date */}\r\n+                                <Typography\r\n+                                    variant=\"body2\"\r\n+                                    style={{ marginTop: \"5px\", color: \"#555\", fontSize: \"14px\" }}\r\n+                                >\r\n+                                    {form?.patient_consent?.date\r\n+                                        ? new Date(form.patient_consent.date).toLocaleDateString(\"en-US\", {\r\n+                                            weekday: \"long\",\r\n+                                            year: \"numeric\",\r\n+                                            month: \"long\",\r\n+                                            day: \"numeric\",\r\n+                                        })\r\n+                                        : \"No Consent Date Available\"}\r\n+                                </Typography>\r\n+                            </div>\r\n+                        </Grid>\r\n                     </CardContent>\r\n                 </Card>\r\n             </PDFExport>\r\n         </div>\r\n"
                },
                {
                    "date": 1743680555166,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -301,22 +301,9 @@\n                                         }}\r\n                                     />\r\n                                 )}\r\n \r\n-                                {/* Patient Consent Date */}\r\n-                                <Typography\r\n-                                    variant=\"body2\"\r\n-                                    style={{ marginTop: \"5px\", color: \"#555\", fontSize: \"14px\" }}\r\n-                                >\r\n-                                    {form?.patient_consent?.date\r\n-                                        ? new Date(form.patient_consent.date).toLocaleDateString(\"en-US\", {\r\n-                                            weekday: \"long\",\r\n-                                            year: \"numeric\",\r\n-                                            month: \"long\",\r\n-                                            day: \"numeric\",\r\n-                                        })\r\n-                                        : \"No Consent Date Available\"}\r\n-                                </Typography>\r\n+                              \r\n                             </div>\r\n                         </Grid>\r\n                     </CardContent>\r\n                 </Card>\r\n"
                },
                {
                    "date": 1743680587234,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,8 +255,9 @@\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Patient Consent */}\r\n+                        <Grid>\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n                         <Grid item xs={12} sm={6} md={6}>\r\n                             <div\r\n                                 style={{\r\n@@ -304,8 +305,9 @@\n \r\n                               \r\n                             </div>\r\n                         </Grid>\r\n+                        </Grid>\r\n                     </CardContent>\r\n                 </Card>\r\n             </PDFExport>\r\n         </div>\r\n"
                },
                {
                    "date": 1743680620989,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,9 +255,9 @@\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Patient Consent */}\r\n-                        <Grid>\r\n+                        <Grid container>\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n                         <Grid item xs={12} sm={6} md={6}>\r\n                             <div\r\n                                 style={{\r\n"
                },
                {
                    "date": 1743680635933,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -290,11 +290,11 @@\n                                     alignItems: \"center\",\r\n                                 }}\r\n                             >\r\n                                 {/* Patient Consent Signature */}\r\n-                                {form?.patient_consent?.sign && (\r\n+                                {imagesBase64?.patientConsent?.[0] && (\r\n                                     <img\r\n-                                        src={form.patient_consent.sign} // Assuming the signature is a URL or base64\r\n+                                        src={imagesBase64?.patientConsent?.[0]} // Assuming the signature is a URL or base64\r\n                                         alt=\"Patient Consent Signature\"\r\n                                         style={{\r\n                                             width: \"200px\",\r\n                                             borderRadius: \"8px\",\r\n"
                },
                {
                    "date": 1743680653038,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,10 +255,11 @@\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Patient Consent */}\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n                         <Grid container>\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n+                        \r\n                         <Grid item xs={12} sm={6} md={6}>\r\n                             <div\r\n                                 style={{\r\n                                     textAlign: \"center\",\r\n"
                },
                {
                    "date": 1743680665072,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -262,9 +262,9 @@\n                         <Grid item xs={12} sm={6} md={6}>\r\n                             <div\r\n                                 style={{\r\n                                     textAlign: \"center\",\r\n-                                    border: \"2px solid #ddd\",\r\n+                           \r\n                                     borderRadius: \"8px\",\r\n                                     padding: \"10px\",\r\n                                     display: \"flex\",\r\n                                     flexDirection: \"column\",\r\n"
                },
                {
                    "date": 1743680679274,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -261,9 +261,9 @@\n                         \r\n                         <Grid item xs={12} sm={6} md={6}>\r\n                             <div\r\n                                 style={{\r\n-                                    textAlign: \"center\",\r\n+                                    textAlign: \"lefy\",\r\n                            \r\n                                     borderRadius: \"8px\",\r\n                                     padding: \"10px\",\r\n                                     display: \"flex\",\r\n"
                },
                {
                    "date": 1743680705571,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -261,15 +261,15 @@\n                         \r\n                         <Grid item xs={12} sm={6} md={6}>\r\n                             <div\r\n                                 style={{\r\n-                                    textAlign: \"lefy\",\r\n+                                    textAlign: \"left\",\r\n                            \r\n                                     borderRadius: \"8px\",\r\n                                     padding: \"10px\",\r\n                                     display: \"flex\",\r\n                                     flexDirection: \"column\",\r\n-                                    alignItems: \"center\",\r\n+                                    alignItems: \"flex-start\",\r\n                                 }}\r\n                             >\r\n                                 {/* Patient Consent Details */}\r\n                                 <Typography variant=\"body2\" style={{ marginBottom: \"10px\", color: \"#555\", fontSize: \"14px\" }}>\r\n@@ -279,8 +279,9 @@\n                         </Grid>\r\n \r\n                         {/* Patient Consent Signature */}\r\n                         <Grid item xs={12} sm={6} md={6}>\r\n+                        <Typography><strong>Patient Signature:</strong> </Typography>\r\n                             <div\r\n                                 style={{\r\n                                     textAlign: \"center\",\r\n                                     border: \"2px solid #ddd\",\r\n"
                },
                {
                    "date": 1743680852137,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -308,8 +308,34 @@\n                               \r\n                             </div>\r\n                         </Grid>\r\n                         </Grid>\r\n+                        <Divider style={{ margin: \"20px 0\" }} />\r\n+\r\n+                        {/* Patient Consent */}\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n+                        <Grid container>\r\n+                        \r\n+                        <Grid item xs={12} sm={6} md={6}>\r\n+                            <div\r\n+                                style={{\r\n+                                    textAlign: \"left\",\r\n+                           \r\n+                                    borderRadius: \"8px\",\r\n+                                    padding: \"10px\",\r\n+                                    display: \"flex\",\r\n+                                    flexDirection: \"column\",\r\n+                                    alignItems: \"flex-start\",\r\n+                                }}\r\n+                            >\r\n+                                {/* Patient Consent Details */}\r\n+                                <Typography variant=\"body2\" style={{ marginBottom: \"10px\", color: \"#555\", fontSize: \"14px\" }}>\r\n+                                    {form?.patient_consent?.details || \"No Patient Consent Details Available\"}\r\n+                                </Typography>\r\n+                            </div>\r\n+                        </Grid>\r\n+\r\n+                        \r\n                     </CardContent>\r\n                 </Card>\r\n             </PDFExport>\r\n         </div>\r\n"
                },
                {
                    "date": 1743680857937,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -333,9 +333,10 @@\n                                 </Typography>\r\n                             </div>\r\n                         </Grid>\r\n \r\n-                        \r\n+                       \r\n+                        </Grid>\r\n                     </CardContent>\r\n                 </Card>\r\n             </PDFExport>\r\n         </div>\r\n"
                },
                {
                    "date": 1743680865652,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -328,9 +328,9 @@\n                                 }}\r\n                             >\r\n                                 {/* Patient Consent Details */}\r\n                                 <Typography variant=\"body2\" style={{ marginBottom: \"10px\", color: \"#555\", fontSize: \"14px\" }}>\r\n-                                    {form?.patient_consent?.details || \"No Patient Consent Details Available\"}\r\n+                                    {form?.side_effect?.details || \"No Patient Consent Details Available\"}\r\n                                 </Typography>\r\n                             </div>\r\n                         </Grid>\r\n \r\n"
                },
                {
                    "date": 1743680874680,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -328,9 +328,9 @@\n                                 }}\r\n                             >\r\n                                 {/* Patient Consent Details */}\r\n                                 <Typography variant=\"body2\" style={{ marginBottom: \"10px\", color: \"#555\", fontSize: \"14px\" }}>\r\n-                                    {form?.side_effect?.details || \"No Patient Consent Details Available\"}\r\n+                                    {form?.side_effect?.details || \"No SideEffects\"}\r\n                                 </Typography>\r\n                             </div>\r\n                         </Grid>\r\n \r\n"
                },
                {
                    "date": 1743680886938,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -311,9 +311,9 @@\n                         </Grid>\r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Patient Consent */}\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient SideEffects</Typography>\r\n                         <Grid container>\r\n                         \r\n                         <Grid item xs={12} sm={6} md={6}>\r\n                             <div\r\n"
                },
                {
                    "date": 1743681165859,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,9 +133,9 @@\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Images Section */}\r\n-                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginBottom: \"5px\" }}>Batch Images</Typography>\r\n+                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginBottom: \"5px\" }}><Strong>Batch Images</Strong></Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.batch?.map((img, index) => (\r\n                                 <img key={index} src={img} alt=\"Batch\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n"
                },
                {
                    "date": 1743681171581,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,9 +133,9 @@\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Images Section */}\r\n-                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginBottom: \"5px\" }}><Strong>Batch Images</Strong></Typography>\r\n+                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginBottom: \"5px\" }}><strong>Batch Images</Strong></Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.batch?.map((img, index) => (\r\n                                 <img key={index} src={img} alt=\"Batch\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n"
                },
                {
                    "date": 1743681183796,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,9 +133,9 @@\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n                         {/* Images Section */}\r\n-                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginBottom: \"5px\" }}><strong>Batch Images</Strong></Typography>\r\n+                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginBottom: \"5px\" }}><strong>Batch Images :</strong></Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.batch?.map((img, index) => (\r\n                                 <img key={index} src={img} alt=\"Batch\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n"
                },
                {
                    "date": 1743681194206,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -139,9 +139,9 @@\n                             {imagesBase64?.batch?.map((img, index) => (\r\n                                 <img key={index} src={img} alt=\"Batch\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n                         </div>\r\n-                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginTop: \"20px\", marginBottom: \"5px\" }}>Before Images</Typography>\r\n+                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginTop: \"20px\", marginBottom: \"5px\" }}><strong>Before Images</strong></Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.before?.map((img, index) => (\r\n                                 <img key={index} src={img} alt=\"Before\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n"
                },
                {
                    "date": 1743681204333,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -145,9 +145,9 @@\n                             {imagesBase64?.before?.map((img, index) => (\r\n                                 <img key={index} src={img} alt=\"Before\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n                         </div>\r\n-                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginTop: \"20px\", marginBottom: \"5px\" }}>After Images</Typography>\r\n+                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginTop: \"20px\", marginBottom: \"5px\" }}><strong>After Images</strong></Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.after?.map((img, index) => (\r\n                                 <img key={index} src={img} alt=\"After\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n"
                },
                {
                    "date": 1743681210542,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -139,15 +139,15 @@\n                             {imagesBase64?.batch?.map((img, index) => (\r\n                                 <img key={index} src={img} alt=\"Batch\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n                         </div>\r\n-                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginTop: \"20px\", marginBottom: \"5px\" }}><strong>Before Images</strong></Typography>\r\n+                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginTop: \"20px\", marginBottom: \"5px\" }}><strong>Before Images : </strong></Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.before?.map((img, index) => (\r\n                                 <img key={index} src={img} alt=\"Before\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n                         </div>\r\n-                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginTop: \"20px\", marginBottom: \"5px\" }}><strong>After Images</strong></Typography>\r\n+                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginTop: \"20px\", marginBottom: \"5px\" }}><strong>After Images :</strong></Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.after?.map((img, index) => (\r\n                                 <img key={index} src={img} alt=\"After\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n"
                },
                {
                    "date": 1743681306662,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,8 +34,9 @@\n                 const imageUrls = {\r\n                     batch: form?.batch_images || [],\r\n                     before: form?.before_images || [],\r\n                     after: form?.after_images || [],\r\n+                    patient_sign:form?.treatment_plan?.patient_sign,\r\n                     furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n                     patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n                 };\r\n                 console.log(imageUrls, 'imageUrls');\r\n"
                },
                {
                    "date": 1743681347081,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -128,9 +128,9 @@\n                             <Grid item xs={12}><Typography><strong>Goals:</strong> {form?.treatment_plan?.patient_goals}</Typography></Grid>\r\n                             <Grid item xs={12}><Typography><strong>Advised Plan:</strong> {form?.treatment_plan?.advised_plan}</Typography></Grid>\r\n                             <Grid item xs={12}><Typography><strong>Expected Result:</strong> {form?.treatment_plan?.expected_result}</Typography></Grid>\r\n                             <Grid item xs={6}><Typography><strong>Date:</strong> {new Date(form?.treatment_plan?.date).toLocaleDateString()}</Typography></Grid>\r\n-                            <Grid item xs={6}><Typography><strong>Patient Signature:</strong> </Typography> <img src={form?.treatment_plan?.patient_sign} alt=\"Treatment Plan Sign\" style={{ width: \"200px\", borderRadius: \"8px\", marginTop: \"10px\" }} /></Grid>\r\n+                            <Grid item xs={6}><Typography><strong>Patient Signature:</strong> </Typography> <img src={imagesBase64.patient_sign} alt=\"Treatment Plan Sign\" style={{ width: \"200px\", borderRadius: \"8px\", marginTop: \"10px\" }} /></Grid>\r\n                         </Grid>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n"
                },
                {
                    "date": 1743681411107,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,9 +34,9 @@\n                 const imageUrls = {\r\n                     batch: form?.batch_images || [],\r\n                     before: form?.before_images || [],\r\n                     after: form?.after_images || [],\r\n-                    patient_sign:form?.treatment_plan?.patient_sign,\r\n+                    patientSign:form?.treatment_plan?.patient_sign,\r\n                     furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n                     patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n                 };\r\n                 console.log(imageUrls, 'imageUrls');\r\n"
                },
                {
                    "date": 1743681426026,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,9 +34,9 @@\n                 const imageUrls = {\r\n                     batch: form?.batch_images || [],\r\n                     before: form?.before_images || [],\r\n                     after: form?.after_images || [],\r\n-                    patientSign:form?.treatment_plan?.patient_sign,\r\n+                    patientSign:form?.treatment_plan?.sign ? [form.treatment_plan.sign],\r\n                     furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n                     patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n                 };\r\n                 console.log(imageUrls, 'imageUrls');\r\n"
                },
                {
                    "date": 1743681435253,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,9 +34,9 @@\n                 const imageUrls = {\r\n                     batch: form?.batch_images || [],\r\n                     before: form?.before_images || [],\r\n                     after: form?.after_images || [],\r\n-                    patientSign:form?.treatment_plan?.sign ? [form.treatment_plan.sign],\r\n+                    patientSign:form?.treatment_plan??.sign ? [form.treatment_plan?.sign] || [],\r\n                     furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n                     patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n                 };\r\n                 console.log(imageUrls, 'imageUrls');\r\n"
                },
                {
                    "date": 1743681497464,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,9 +34,9 @@\n                 const imageUrls = {\r\n                     batch: form?.batch_images || [],\r\n                     before: form?.before_images || [],\r\n                     after: form?.after_images || [],\r\n-                    patientSign:form?.treatment_plan??.sign ? [form.treatment_plan?.sign] || [],\r\n+                    patientSign:form?.treatment_plan?.patient_sign ? [form.treatment_plan?.patient_sign] || [],\r\n                     furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n                     patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n                 };\r\n                 console.log(imageUrls, 'imageUrls');\r\n"
                },
                {
                    "date": 1743681677418,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,12 +34,13 @@\n                 const imageUrls = {\r\n                     batch: form?.batch_images || [],\r\n                     before: form?.before_images || [],\r\n                     after: form?.after_images || [],\r\n-                    patientSign:form?.treatment_plan?.patient_sign ? [form.treatment_plan?.patient_sign] || [],\r\n+                    patientSign: form?.treatment_plan?.patient_sign ? [form.treatment_plan.patient_sign] : [],\r\n                     furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n                     patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n                 };\r\n+                \r\n                 console.log(imageUrls, 'imageUrls');\r\n \r\n                 // Convert each image URL to Base64\r\n                 const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n"
                },
                {
                    "date": 1743681738248,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -129,9 +129,9 @@\n                             <Grid item xs={12}><Typography><strong>Goals:</strong> {form?.treatment_plan?.patient_goals}</Typography></Grid>\r\n                             <Grid item xs={12}><Typography><strong>Advised Plan:</strong> {form?.treatment_plan?.advised_plan}</Typography></Grid>\r\n                             <Grid item xs={12}><Typography><strong>Expected Result:</strong> {form?.treatment_plan?.expected_result}</Typography></Grid>\r\n                             <Grid item xs={6}><Typography><strong>Date:</strong> {new Date(form?.treatment_plan?.date).toLocaleDateString()}</Typography></Grid>\r\n-                            <Grid item xs={6}><Typography><strong>Patient Signature:</strong> </Typography> <img src={imagesBase64.patient_sign} alt=\"Treatment Plan Sign\" style={{ width: \"200px\", borderRadius: \"8px\", marginTop: \"10px\" }} /></Grid>\r\n+                            <Grid item xs={6}><Typography><strong>Patient Signature:</strong> </Typography> <img src={imagesBase64?.patientConsent?.[0]} alt=\"Treatment Plan Sign\" style={{ width: \"200px\", borderRadius: \"8px\", marginTop: \"10px\" }} /></Grid>\r\n                         </Grid>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n"
                },
                {
                    "date": 1743682062231,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,8 @@\n import { PDFExport } from \"@progress/kendo-react-pdf\";\r\n import { Button, Card, CardContent, Typography, Divider, Grid, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from \"@mui/material\";\r\n \r\n // Function to convert image URL to Base64\r\n-// Function to convert image URL to Base64\r\n const toBase64 = (url) => {\r\n     return new Promise((resolve, reject) => {\r\n         const proxyUrl = \"https://corsproxy.io/?url=\"; // Using the provided CORS proxy\r\n         const imgUrl = proxyUrl + encodeURIComponent(url); // Encode the URL to pass as a query parameter\r\n@@ -83,9 +82,8 @@\n                         <Typography variant=\"h5\" gutterBottom style={{ textAlign: \"center\", color: \"#333\" }}>\r\n                             Patient Report\r\n                         </Typography>\r\n                         <Divider style={{ margin: \"15px 0\" }} />\r\n-\r\n                         {/* Patient Information Section */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Information</Typography>\r\n                         <Grid container spacing={2}>\r\n                             <Grid item xs={6}><Typography><strong>Name:</strong> {form?.first_name} {form?.last_name}</Typography></Grid>\r\n@@ -96,9 +94,8 @@\n                             <Grid item xs={12}><Typography><strong>Notes:</strong> {form?.notes}</Typography></Grid>\r\n                         </Grid>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n-\r\n                         {/* Next of Kin Information */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Next of Kin</Typography>\r\n                         <Grid container spacing={2}>\r\n                             <Grid item xs={6}><Typography><strong>Name:</strong> {form?.kin_details?.name}</Typography></Grid>\r\n@@ -120,9 +117,8 @@\n                             <Grid item xs={6}><Typography><strong>Email:</strong> {form?.general_practitioner?.email}</Typography></Grid>\r\n                         </Grid>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n-\r\n                         {/* Treatment Plan */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Treatment Plan</Typography>\r\n                         <Grid container spacing={2}>\r\n                             <Grid item xs={12}><Typography><strong>Concerns:</strong> {form?.treatment_plan?.patient_concerns}</Typography></Grid>\r\n@@ -133,9 +129,8 @@\n                             <Grid item xs={6}><Typography><strong>Patient Signature:</strong> </Typography> <img src={imagesBase64?.patientConsent?.[0]} alt=\"Treatment Plan Sign\" style={{ width: \"200px\", borderRadius: \"8px\", marginTop: \"10px\" }} /></Grid>\r\n                         </Grid>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n-\r\n                         {/* Images Section */}\r\n                         <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginBottom: \"5px\" }}><strong>Batch Images :</strong></Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.batch?.map((img, index) => (\r\n@@ -153,192 +148,8 @@\n                             {imagesBase64?.after?.map((img, index) => (\r\n                                 <img key={index} src={img} alt=\"After\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n                         </div>\r\n-\r\n-                        <Divider style={{ margin: \"20px 0\" }} />\r\n-\r\n-                        {/* Treatment Records Table */}\r\n-                        <div style={{ pageBreakBefore: \"always\" }}> {/* Force page break before this section */}\r\n-                            <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Treatment Records</Typography>\r\n-                            <TableContainer>\r\n-                                <Table>\r\n-                                    <TableHead>\r\n-                                        <TableRow>\r\n-                                            <TableCell><strong>Date</strong></TableCell>\r\n-                                            <TableCell><strong>Description</strong></TableCell>\r\n-                                            <TableCell><strong>Amount</strong></TableCell>\r\n-                                        </TableRow>\r\n-                                    </TableHead>\r\n-                                    <TableBody>\r\n-                                        {form?.treatment_record?.map((record, index) => (\r\n-                                            <TableRow key={index}>\r\n-                                                <TableCell>{new Date(record.date).toLocaleDateString()}</TableCell>\r\n-                                                <TableCell>{record.description}</TableCell>\r\n-                                                <TableCell>${record.amount}</TableCell>\r\n-                                            </TableRow>\r\n-                                        ))}\r\n-                                    </TableBody>\r\n-                                </Table>\r\n-                            </TableContainer>\r\n-                        </div>\r\n-\r\n-                        <Divider style={{ margin: \"20px 0\" }} />\r\n-\r\n-                        {/* Further Treatment Section */}\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n-                        <div style={{ marginTop: \"10px\" }}>\r\n-                            <Grid container spacing={2}>\r\n-                                {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                                    <>\r\n-\r\n-\r\n-                                        {/* Date Grid Item */}\r\n-                                        <Grid item xs={12} sm={6} md={6} key={`date-${index}`}>\r\n-                                            <div\r\n-                                                style={{\r\n-                                                    textAlign: \"left\",\r\n-\r\n-                                                    borderRadius: \"8px\",\r\n-                                                    padding: \"10px\",\r\n-                                                    display: \"flex\",\r\n-                                                    flexDirection: \"column\",\r\n-                                                    alignItems: \"flex-start\",\r\n-                                                }}\r\n-                                            >\r\n-                                                {/* Date */}\r\n-                                                <Typography\r\n-                                                    variant=\"body2\"\r\n-                                                    style={{ marginTop: \"5px\", fontSize: \"14px\", textAlign: 'left' }}\r\n-                                                >\r\n-                                                    <strong>  Date : </strong>  {form?.further_treatment?.[0]?.date\r\n-                                                        ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n-                                                            weekday: \"long\",\r\n-                                                            year: \"numeric\",\r\n-                                                            month: \"long\",\r\n-                                                            day: \"numeric\",\r\n-                                                        })\r\n-                                                        : \"No Date Available\"}\r\n-                                                </Typography>\r\n-                                            </div>\r\n-                                        </Grid>\r\n-                                        {/* Image Grid Item */}\r\n-                                        <Grid item xs={12} sm={6} md={6} key={`image-${index}`}>\r\n-                                            <Typography><strong>Patient Signature:</strong> </Typography>\r\n-                                            <div\r\n-                                                style={{\r\n-                                                    textAlign: \"center\",\r\n-                                                    border: \"2px solid #ddd\",\r\n-                                                    borderRadius: \"8px\",\r\n-                                                    padding: \"10px\",\r\n-                                                    display: \"flex\",\r\n-                                                    flexDirection: \"column\",\r\n-                                                    alignItems: \"center\",\r\n-                                                }}\r\n-                                            >\r\n-                                                {/* Image */}\r\n-                                                <img\r\n-                                                    src={treatment} // Assuming each treatment has base64 image data\r\n-                                                    alt=\"Further Treatment Sign\"\r\n-                                                    style={{\r\n-                                                        width: \"200px\",\r\n-                                                        borderRadius: \"8px\",\r\n-                                                        marginBottom: \"10px\",\r\n-                                                    }}\r\n-                                                />\r\n-                                            </div>\r\n-                                        </Grid>\r\n-                                    </>\r\n-                                ))}\r\n-                            </Grid>\r\n-\r\n-\r\n-                        </div>\r\n-\r\n-\r\n-                        <Divider style={{ margin: \"20px 0\" }} />\r\n-\r\n-                        {/* Patient Consent */}\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n-                        <Grid container>\r\n-                        \r\n-                        <Grid item xs={12} sm={6} md={6}>\r\n-                            <div\r\n-                                style={{\r\n-                                    textAlign: \"left\",\r\n-                           \r\n-                                    borderRadius: \"8px\",\r\n-                                    padding: \"10px\",\r\n-                                    display: \"flex\",\r\n-                                    flexDirection: \"column\",\r\n-                                    alignItems: \"flex-start\",\r\n-                                }}\r\n-                            >\r\n-                                {/* Patient Consent Details */}\r\n-                                <Typography variant=\"body2\" style={{ marginBottom: \"10px\", color: \"#555\", fontSize: \"14px\" }}>\r\n-                                    {form?.patient_consent?.details || \"No Patient Consent Details Available\"}\r\n-                                </Typography>\r\n-                            </div>\r\n-                        </Grid>\r\n-\r\n-                        {/* Patient Consent Signature */}\r\n-                        <Grid item xs={12} sm={6} md={6}>\r\n-                        <Typography><strong>Patient Signature:</strong> </Typography>\r\n-                            <div\r\n-                                style={{\r\n-                                    textAlign: \"center\",\r\n-                                    border: \"2px solid #ddd\",\r\n-                                    borderRadius: \"8px\",\r\n-                                    padding: \"10px\",\r\n-                                    display: \"flex\",\r\n-                                    flexDirection: \"column\",\r\n-                                    alignItems: \"center\",\r\n-                                }}\r\n-                            >\r\n-                                {/* Patient Consent Signature */}\r\n-                                {imagesBase64?.patientConsent?.[0] && (\r\n-                                    <img\r\n-                                        src={imagesBase64?.patientConsent?.[0]} // Assuming the signature is a URL or base64\r\n-                                        alt=\"Patient Consent Signature\"\r\n-                                        style={{\r\n-                                            width: \"200px\",\r\n-                                            borderRadius: \"8px\",\r\n-                                            marginBottom: \"10px\",\r\n-                                        }}\r\n-                                    />\r\n-                                )}\r\n-\r\n-                              \r\n-                            </div>\r\n-                        </Grid>\r\n-                        </Grid>\r\n-                        <Divider style={{ margin: \"20px 0\" }} />\r\n-\r\n-                        {/* Patient Consent */}\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient SideEffects</Typography>\r\n-                        <Grid container>\r\n-                        \r\n-                        <Grid item xs={12} sm={6} md={6}>\r\n-                            <div\r\n-                                style={{\r\n-                                    textAlign: \"left\",\r\n-                           \r\n-                                    borderRadius: \"8px\",\r\n-                                    padding: \"10px\",\r\n-                                    display: \"flex\",\r\n-                                    flexDirection: \"column\",\r\n-                                    alignItems: \"flex-start\",\r\n-                                }}\r\n-                            >\r\n-                                {/* Patient Consent Details */}\r\n-                                <Typography variant=\"body2\" style={{ marginBottom: \"10px\", color: \"#555\", fontSize: \"14px\" }}>\r\n-                                    {form?.side_effect?.details || \"No SideEffects\"}\r\n-                                </Typography>\r\n-                            </div>\r\n-                        </Grid>\r\n-\r\n-                       \r\n-                        </Grid>\r\n                     </CardContent>\r\n                 </Card>\r\n             </PDFExport>\r\n         </div>\r\n"
                },
                {
                    "date": 1743682078300,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n import { PDFExport } from \"@progress/kendo-react-pdf\";\r\n import { Button, Card, CardContent, Typography, Divider, Grid, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from \"@mui/material\";\r\n \r\n // Function to convert image URL to Base64\r\n+// Function to convert image URL to Base64\r\n const toBase64 = (url) => {\r\n     return new Promise((resolve, reject) => {\r\n         const proxyUrl = \"https://corsproxy.io/?url=\"; // Using the provided CORS proxy\r\n         const imgUrl = proxyUrl + encodeURIComponent(url); // Encode the URL to pass as a query parameter\r\n@@ -82,8 +83,9 @@\n                         <Typography variant=\"h5\" gutterBottom style={{ textAlign: \"center\", color: \"#333\" }}>\r\n                             Patient Report\r\n                         </Typography>\r\n                         <Divider style={{ margin: \"15px 0\" }} />\r\n+\r\n                         {/* Patient Information Section */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Information</Typography>\r\n                         <Grid container spacing={2}>\r\n                             <Grid item xs={6}><Typography><strong>Name:</strong> {form?.first_name} {form?.last_name}</Typography></Grid>\r\n@@ -94,8 +96,9 @@\n                             <Grid item xs={12}><Typography><strong>Notes:</strong> {form?.notes}</Typography></Grid>\r\n                         </Grid>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n+\r\n                         {/* Next of Kin Information */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Next of Kin</Typography>\r\n                         <Grid container spacing={2}>\r\n                             <Grid item xs={6}><Typography><strong>Name:</strong> {form?.kin_details?.name}</Typography></Grid>\r\n@@ -117,8 +120,9 @@\n                             <Grid item xs={6}><Typography><strong>Email:</strong> {form?.general_practitioner?.email}</Typography></Grid>\r\n                         </Grid>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n+\r\n                         {/* Treatment Plan */}\r\n                         <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Treatment Plan</Typography>\r\n                         <Grid container spacing={2}>\r\n                             <Grid item xs={12}><Typography><strong>Concerns:</strong> {form?.treatment_plan?.patient_concerns}</Typography></Grid>\r\n@@ -129,8 +133,9 @@\n                             <Grid item xs={6}><Typography><strong>Patient Signature:</strong> </Typography> <img src={imagesBase64?.patientConsent?.[0]} alt=\"Treatment Plan Sign\" style={{ width: \"200px\", borderRadius: \"8px\", marginTop: \"10px\" }} /></Grid>\r\n                         </Grid>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n+\r\n                         {/* Images Section */}\r\n                         <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginBottom: \"5px\" }}><strong>Batch Images :</strong></Typography>\r\n                         <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n                             {imagesBase64?.batch?.map((img, index) => (\r\n@@ -148,8 +153,192 @@\n                             {imagesBase64?.after?.map((img, index) => (\r\n                                 <img key={index} src={img} alt=\"After\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n                             ))}\r\n                         </div>\r\n+\r\n+                        <Divider style={{ margin: \"20px 0\" }} />\r\n+\r\n+                        {/* Treatment Records Table */}\r\n+                        <div style={{ pageBreakBefore: \"always\" }}> {/* Force page break before this section */}\r\n+                            <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Treatment Records</Typography>\r\n+                            <TableContainer>\r\n+                                <Table>\r\n+                                    <TableHead>\r\n+                                        <TableRow>\r\n+                                            <TableCell><strong>Date</strong></TableCell>\r\n+                                            <TableCell><strong>Description</strong></TableCell>\r\n+                                            <TableCell><strong>Amount</strong></TableCell>\r\n+                                        </TableRow>\r\n+                                    </TableHead>\r\n+                                    <TableBody>\r\n+                                        {form?.treatment_record?.map((record, index) => (\r\n+                                            <TableRow key={index}>\r\n+                                                <TableCell>{new Date(record.date).toLocaleDateString()}</TableCell>\r\n+                                                <TableCell>{record.description}</TableCell>\r\n+                                                <TableCell>${record.amount}</TableCell>\r\n+                                            </TableRow>\r\n+                                        ))}\r\n+                                    </TableBody>\r\n+                                </Table>\r\n+                            </TableContainer>\r\n+                        </div>\r\n+\r\n+                        <Divider style={{ margin: \"20px 0\" }} />\r\n+\r\n+                        {/* Further Treatment Section */}\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n+                        <div style={{ marginTop: \"10px\" }}>\r\n+                            <Grid container spacing={2}>\r\n+                                {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n+                                    <>\r\n+\r\n+\r\n+                                        {/* Date Grid Item */}\r\n+                                        <Grid item xs={12} sm={6} md={6} key={`date-${index}`}>\r\n+                                            <div\r\n+                                                style={{\r\n+                                                    textAlign: \"left\",\r\n+\r\n+                                                    borderRadius: \"8px\",\r\n+                                                    padding: \"10px\",\r\n+                                                    display: \"flex\",\r\n+                                                    flexDirection: \"column\",\r\n+                                                    alignItems: \"flex-start\",\r\n+                                                }}\r\n+                                            >\r\n+                                                {/* Date */}\r\n+                                                <Typography\r\n+                                                    variant=\"body2\"\r\n+                                                    style={{ marginTop: \"5px\", fontSize: \"14px\", textAlign: 'left' }}\r\n+                                                >\r\n+                                                    <strong>  Date : </strong>  {form?.further_treatment?.[0]?.date\r\n+                                                        ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n+                                                            weekday: \"long\",\r\n+                                                            year: \"numeric\",\r\n+                                                            month: \"long\",\r\n+                                                            day: \"numeric\",\r\n+                                                        })\r\n+                                                        : \"No Date Available\"}\r\n+                                                </Typography>\r\n+                                            </div>\r\n+                                        </Grid>\r\n+                                        {/* Image Grid Item */}\r\n+                                        <Grid item xs={12} sm={6} md={6} key={`image-${index}`}>\r\n+                                            <Typography><strong>Patient Signature:</strong> </Typography>\r\n+                                            <div\r\n+                                                style={{\r\n+                                                    textAlign: \"center\",\r\n+                                                    border: \"2px solid #ddd\",\r\n+                                                    borderRadius: \"8px\",\r\n+                                                    padding: \"10px\",\r\n+                                                    display: \"flex\",\r\n+                                                    flexDirection: \"column\",\r\n+                                                    alignItems: \"center\",\r\n+                                                }}\r\n+                                            >\r\n+                                                {/* Image */}\r\n+                                                <img\r\n+                                                    src={treatment} // Assuming each treatment has base64 image data\r\n+                                                    alt=\"Further Treatment Sign\"\r\n+                                                    style={{\r\n+                                                        width: \"200px\",\r\n+                                                        borderRadius: \"8px\",\r\n+                                                        marginBottom: \"10px\",\r\n+                                                    }}\r\n+                                                />\r\n+                                            </div>\r\n+                                        </Grid>\r\n+                                    </>\r\n+                                ))}\r\n+                            </Grid>\r\n+\r\n+\r\n+                        </div>\r\n+\r\n+\r\n+                        <Divider style={{ margin: \"20px 0\" }} />\r\n+\r\n+                        {/* Patient Consent */}\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n+                        <Grid container>\r\n+                        \r\n+                        <Grid item xs={12} sm={6} md={6}>\r\n+                            <div\r\n+                                style={{\r\n+                                    textAlign: \"left\",\r\n+                           \r\n+                                    borderRadius: \"8px\",\r\n+                                    padding: \"10px\",\r\n+                                    display: \"flex\",\r\n+                                    flexDirection: \"column\",\r\n+                                    alignItems: \"flex-start\",\r\n+                                }}\r\n+                            >\r\n+                                {/* Patient Consent Details */}\r\n+                                <Typography variant=\"body2\" style={{ marginBottom: \"10px\", color: \"#555\", fontSize: \"14px\" }}>\r\n+                                    {form?.patient_consent?.details || \"No Patient Consent Details Available\"}\r\n+                                </Typography>\r\n+                            </div>\r\n+                        </Grid>\r\n+\r\n+                        {/* Patient Consent Signature */}\r\n+                        <Grid item xs={12} sm={6} md={6}>\r\n+                        <Typography><strong>Patient Signature:</strong> </Typography>\r\n+                            <div\r\n+                                style={{\r\n+                                    textAlign: \"center\",\r\n+                                    border: \"2px solid #ddd\",\r\n+                                    borderRadius: \"8px\",\r\n+                                    padding: \"10px\",\r\n+                                    display: \"flex\",\r\n+                                    flexDirection: \"column\",\r\n+                                    alignItems: \"center\",\r\n+                                }}\r\n+                            >\r\n+                                {/* Patient Consent Signature */}\r\n+                                {imagesBase64?.patientConsent?.[0] && (\r\n+                                    <img\r\n+                                        src={imagesBase64?.patientConsent?.[0]} // Assuming the signature is a URL or base64\r\n+                                        alt=\"Patient Consent Signature\"\r\n+                                        style={{\r\n+                                            width: \"200px\",\r\n+                                            borderRadius: \"8px\",\r\n+                                            marginBottom: \"10px\",\r\n+                                        }}\r\n+                                    />\r\n+                                )}\r\n+\r\n+                              \r\n+                            </div>\r\n+                        </Grid>\r\n+                        </Grid>\r\n+                        <Divider style={{ margin: \"20px 0\" }} />\r\n+\r\n+                        {/* Patient Consent */}\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient SideEffects</Typography>\r\n+                        <Grid container>\r\n+                        \r\n+                        <Grid item xs={12} sm={6} md={6}>\r\n+                            <div\r\n+                                style={{\r\n+                                    textAlign: \"left\",\r\n+                           \r\n+                                    borderRadius: \"8px\",\r\n+                                    padding: \"10px\",\r\n+                                    display: \"flex\",\r\n+                                    flexDirection: \"column\",\r\n+                                    alignItems: \"flex-start\",\r\n+                                }}\r\n+                            >\r\n+                                {/* Patient Consent Details */}\r\n+                                <Typography variant=\"body2\" style={{ marginBottom: \"10px\", color: \"#555\", fontSize: \"14px\" }}>\r\n+                                    {form?.side_effect?.details || \"No SideEffects\"}\r\n+                                </Typography>\r\n+                            </div>\r\n+                        </Grid>\r\n+\r\n+                       \r\n+                        </Grid>\r\n                     </CardContent>\r\n                 </Card>\r\n             </PDFExport>\r\n         </div>\r\n"
                },
                {
                    "date": 1743682245616,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,67 +1,11 @@\n-import React, { useRef, useEffect, useState } from \"react\";\r\n+import React, { useRef } from \"react\";\r\n import { PDFExport } from \"@progress/kendo-react-pdf\";\r\n-import { Button, Card, CardContent, Typography, Divider, Grid, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from \"@mui/material\";\r\n+import { Button, Card, CardContent, Typography, Divider, Grid } from \"@mui/material\";\r\n \r\n-// Function to convert image URL to Base64\r\n-// Function to convert image URL to Base64\r\n-const toBase64 = (url) => {\r\n-    return new Promise((resolve, reject) => {\r\n-        const proxyUrl = \"https://corsproxy.io/?url=\"; // Using the provided CORS proxy\r\n-        const imgUrl = proxyUrl + encodeURIComponent(url); // Encode the URL to pass as a query parameter\r\n-\r\n-        const img = new Image();\r\n-        img.crossOrigin = \"Anonymous\"; // Allow cross-origin requests\r\n-        img.onload = () => {\r\n-            const canvas = document.createElement(\"canvas\");\r\n-            canvas.width = img.width;\r\n-            canvas.height = img.height;\r\n-            const ctx = canvas.getContext(\"2d\");\r\n-            ctx.drawImage(img, 0, 0);\r\n-            resolve(canvas.toDataURL());\r\n-        };\r\n-        img.onerror = reject;\r\n-        img.src = imgUrl; // Use the proxy URL + original image URL\r\n-    });\r\n-};\r\n-\r\n const PatientPDF = ({ form }) => {\r\n     const pdfExportComponent = useRef(null);\r\n-    const [imagesBase64, setImagesBase64] = useState({});\r\n \r\n-    useEffect(() => {\r\n-        const fetchImagesAsBase64 = async () => {\r\n-            try {\r\n-                const imageUrls = {\r\n-                    batch: form?.batch_images || [],\r\n-                    before: form?.before_images || [],\r\n-                    after: form?.after_images || [],\r\n-                    patientSign: form?.treatment_plan?.patient_sign ? [form.treatment_plan.patient_sign] : [],\r\n-                    furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n-                    patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n-                };\r\n-                \r\n-                console.log(imageUrls, 'imageUrls');\r\n-\r\n-                // Convert each image URL to Base64\r\n-                const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n-                    const urls = imageUrls[key];\r\n-                    const base64Images = await Promise.all(urls.map(url => toBase64(url)));\r\n-                    return { [key]: base64Images };\r\n-                });\r\n-\r\n-                // Set all images as Base64 in the state\r\n-                const base64Data = await Promise.all(imagePromises);\r\n-                const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n-                setImagesBase64(allImages);\r\n-            } catch (error) {\r\n-                console.error(\"Error converting images to base64:\", error);\r\n-            }\r\n-        };\r\n-\r\n-        fetchImagesAsBase64();\r\n-    }, [form]);\r\n-\r\n     const handleExportWithComponent = () => {\r\n         if (pdfExportComponent.current) {\r\n             pdfExportComponent.current.save();\r\n         }\r\n@@ -129,216 +73,38 @@\n                             <Grid item xs={12}><Typography><strong>Goals:</strong> {form?.treatment_plan?.patient_goals}</Typography></Grid>\r\n                             <Grid item xs={12}><Typography><strong>Advised Plan:</strong> {form?.treatment_plan?.advised_plan}</Typography></Grid>\r\n                             <Grid item xs={12}><Typography><strong>Expected Result:</strong> {form?.treatment_plan?.expected_result}</Typography></Grid>\r\n                             <Grid item xs={6}><Typography><strong>Date:</strong> {new Date(form?.treatment_plan?.date).toLocaleDateString()}</Typography></Grid>\r\n-                            <Grid item xs={6}><Typography><strong>Patient Signature:</strong> </Typography> <img src={imagesBase64?.patientConsent?.[0]} alt=\"Treatment Plan Sign\" style={{ width: \"200px\", borderRadius: \"8px\", marginTop: \"10px\" }} /></Grid>\r\n                         </Grid>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n-                        {/* Images Section */}\r\n-                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginBottom: \"5px\" }}><strong>Batch Images :</strong></Typography>\r\n-                        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-                            {imagesBase64?.batch?.map((img, index) => (\r\n-                                <img key={index} src={img} alt=\"Batch\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n-                            ))}\r\n-                        </div>\r\n-                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginTop: \"20px\", marginBottom: \"5px\" }}><strong>Before Images : </strong></Typography>\r\n-                        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-                            {imagesBase64?.before?.map((img, index) => (\r\n-                                <img key={index} src={img} alt=\"Before\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n-                            ))}\r\n-                        </div>\r\n-                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginTop: \"20px\", marginBottom: \"5px\" }}><strong>After Images :</strong></Typography>\r\n-                        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-                            {imagesBase64?.after?.map((img, index) => (\r\n-                                <img key={index} src={img} alt=\"After\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n-                            ))}\r\n-                        </div>\r\n-\r\n-                        <Divider style={{ margin: \"20px 0\" }} />\r\n-\r\n                         {/* Treatment Records Table */}\r\n-                        <div style={{ pageBreakBefore: \"always\" }}> {/* Force page break before this section */}\r\n+                        <div style={{ pageBreakBefore: \"always\" }}>\r\n                             <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Treatment Records</Typography>\r\n-                            <TableContainer>\r\n-                                <Table>\r\n-                                    <TableHead>\r\n-                                        <TableRow>\r\n-                                            <TableCell><strong>Date</strong></TableCell>\r\n-                                            <TableCell><strong>Description</strong></TableCell>\r\n-                                            <TableCell><strong>Amount</strong></TableCell>\r\n-                                        </TableRow>\r\n-                                    </TableHead>\r\n-                                    <TableBody>\r\n-                                        {form?.treatment_record?.map((record, index) => (\r\n-                                            <TableRow key={index}>\r\n-                                                <TableCell>{new Date(record.date).toLocaleDateString()}</TableCell>\r\n-                                                <TableCell>{record.description}</TableCell>\r\n-                                                <TableCell>${record.amount}</TableCell>\r\n-                                            </TableRow>\r\n-                                        ))}\r\n-                                    </TableBody>\r\n-                                </Table>\r\n-                            </TableContainer>\r\n-                        </div>\r\n-\r\n-                        <Divider style={{ margin: \"20px 0\" }} />\r\n-\r\n-                        {/* Further Treatment Section */}\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n-                        <div style={{ marginTop: \"10px\" }}>\r\n                             <Grid container spacing={2}>\r\n-                                {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                                    <>\r\n-\r\n-\r\n-                                        {/* Date Grid Item */}\r\n-                                        <Grid item xs={12} sm={6} md={6} key={`date-${index}`}>\r\n-                                            <div\r\n-                                                style={{\r\n-                                                    textAlign: \"left\",\r\n-\r\n-                                                    borderRadius: \"8px\",\r\n-                                                    padding: \"10px\",\r\n-                                                    display: \"flex\",\r\n-                                                    flexDirection: \"column\",\r\n-                                                    alignItems: \"flex-start\",\r\n-                                                }}\r\n-                                            >\r\n-                                                {/* Date */}\r\n-                                                <Typography\r\n-                                                    variant=\"body2\"\r\n-                                                    style={{ marginTop: \"5px\", fontSize: \"14px\", textAlign: 'left' }}\r\n-                                                >\r\n-                                                    <strong>  Date : </strong>  {form?.further_treatment?.[0]?.date\r\n-                                                        ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n-                                                            weekday: \"long\",\r\n-                                                            year: \"numeric\",\r\n-                                                            month: \"long\",\r\n-                                                            day: \"numeric\",\r\n-                                                        })\r\n-                                                        : \"No Date Available\"}\r\n-                                                </Typography>\r\n-                                            </div>\r\n-                                        </Grid>\r\n-                                        {/* Image Grid Item */}\r\n-                                        <Grid item xs={12} sm={6} md={6} key={`image-${index}`}>\r\n-                                            <Typography><strong>Patient Signature:</strong> </Typography>\r\n-                                            <div\r\n-                                                style={{\r\n-                                                    textAlign: \"center\",\r\n-                                                    border: \"2px solid #ddd\",\r\n-                                                    borderRadius: \"8px\",\r\n-                                                    padding: \"10px\",\r\n-                                                    display: \"flex\",\r\n-                                                    flexDirection: \"column\",\r\n-                                                    alignItems: \"center\",\r\n-                                                }}\r\n-                                            >\r\n-                                                {/* Image */}\r\n-                                                <img\r\n-                                                    src={treatment} // Assuming each treatment has base64 image data\r\n-                                                    alt=\"Further Treatment Sign\"\r\n-                                                    style={{\r\n-                                                        width: \"200px\",\r\n-                                                        borderRadius: \"8px\",\r\n-                                                        marginBottom: \"10px\",\r\n-                                                    }}\r\n-                                                />\r\n-                                            </div>\r\n-                                        </Grid>\r\n-                                    </>\r\n-                                ))}\r\n+                                <Grid item xs={12}>\r\n+                                    <table style={{ width: \"100%\", border: \"1px solid #ddd\", borderCollapse: \"collapse\" }}>\r\n+                                        <thead>\r\n+                                            <tr>\r\n+                                                <th style={{ padding: \"8px\", textAlign: \"left\", borderBottom: \"1px solid #ddd\" }}>Date</th>\r\n+                                                <th style={{ padding: \"8px\", textAlign: \"left\", borderBottom: \"1px solid #ddd\" }}>Description</th>\r\n+                                                <th style={{ padding: \"8px\", textAlign: \"left\", borderBottom: \"1px solid #ddd\" }}>Amount</th>\r\n+                                            </tr>\r\n+                                        </thead>\r\n+                                        <tbody>\r\n+                                            {form?.treatment_record?.map((record, index) => (\r\n+                                                <tr key={index}>\r\n+                                                    <td style={{ padding: \"8px\" }}>{new Date(record.date).toLocaleDateString()}</td>\r\n+                                                    <td style={{ padding: \"8px\" }}>{record.description}</td>\r\n+                                                    <td style={{ padding: \"8px\" }}>${record.amount}</td>\r\n+                                                </tr>\r\n+                                            ))}\r\n+                                        </tbody>\r\n+                                    </table>\r\n+                                </Grid>\r\n                             </Grid>\r\n-\r\n-\r\n                         </div>\r\n-\r\n-\r\n-                        <Divider style={{ margin: \"20px 0\" }} />\r\n-\r\n-                        {/* Patient Consent */}\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n-                        <Grid container>\r\n-                        \r\n-                        <Grid item xs={12} sm={6} md={6}>\r\n-                            <div\r\n-                                style={{\r\n-                                    textAlign: \"left\",\r\n-                           \r\n-                                    borderRadius: \"8px\",\r\n-                                    padding: \"10px\",\r\n-                                    display: \"flex\",\r\n-                                    flexDirection: \"column\",\r\n-                                    alignItems: \"flex-start\",\r\n-                                }}\r\n-                            >\r\n-                                {/* Patient Consent Details */}\r\n-                                <Typography variant=\"body2\" style={{ marginBottom: \"10px\", color: \"#555\", fontSize: \"14px\" }}>\r\n-                                    {form?.patient_consent?.details || \"No Patient Consent Details Available\"}\r\n-                                </Typography>\r\n-                            </div>\r\n-                        </Grid>\r\n-\r\n-                        {/* Patient Consent Signature */}\r\n-                        <Grid item xs={12} sm={6} md={6}>\r\n-                        <Typography><strong>Patient Signature:</strong> </Typography>\r\n-                            <div\r\n-                                style={{\r\n-                                    textAlign: \"center\",\r\n-                                    border: \"2px solid #ddd\",\r\n-                                    borderRadius: \"8px\",\r\n-                                    padding: \"10px\",\r\n-                                    display: \"flex\",\r\n-                                    flexDirection: \"column\",\r\n-                                    alignItems: \"center\",\r\n-                                }}\r\n-                            >\r\n-                                {/* Patient Consent Signature */}\r\n-                                {imagesBase64?.patientConsent?.[0] && (\r\n-                                    <img\r\n-                                        src={imagesBase64?.patientConsent?.[0]} // Assuming the signature is a URL or base64\r\n-                                        alt=\"Patient Consent Signature\"\r\n-                                        style={{\r\n-                                            width: \"200px\",\r\n-                                            borderRadius: \"8px\",\r\n-                                            marginBottom: \"10px\",\r\n-                                        }}\r\n-                                    />\r\n-                                )}\r\n-\r\n-                              \r\n-                            </div>\r\n-                        </Grid>\r\n-                        </Grid>\r\n-                        <Divider style={{ margin: \"20px 0\" }} />\r\n-\r\n-                        {/* Patient Consent */}\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient SideEffects</Typography>\r\n-                        <Grid container>\r\n-                        \r\n-                        <Grid item xs={12} sm={6} md={6}>\r\n-                            <div\r\n-                                style={{\r\n-                                    textAlign: \"left\",\r\n-                           \r\n-                                    borderRadius: \"8px\",\r\n-                                    padding: \"10px\",\r\n-                                    display: \"flex\",\r\n-                                    flexDirection: \"column\",\r\n-                                    alignItems: \"flex-start\",\r\n-                                }}\r\n-                            >\r\n-                                {/* Patient Consent Details */}\r\n-                                <Typography variant=\"body2\" style={{ marginBottom: \"10px\", color: \"#555\", fontSize: \"14px\" }}>\r\n-                                    {form?.side_effect?.details || \"No SideEffects\"}\r\n-                                </Typography>\r\n-                            </div>\r\n-                        </Grid>\r\n-\r\n-                       \r\n-                        </Grid>\r\n                     </CardContent>\r\n                 </Card>\r\n             </PDFExport>\r\n         </div>\r\n"
                },
                {
                    "date": 1743682280847,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,11 +1,67 @@\n-import React, { useRef } from \"react\";\r\n+import React, { useRef, useEffect, useState } from \"react\";\r\n import { PDFExport } from \"@progress/kendo-react-pdf\";\r\n-import { Button, Card, CardContent, Typography, Divider, Grid } from \"@mui/material\";\r\n+import { Button, Card, CardContent, Typography, Divider, Grid, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from \"@mui/material\";\r\n \r\n+// Function to convert image URL to Base64\r\n+// Function to convert image URL to Base64\r\n+const toBase64 = (url) => {\r\n+    return new Promise((resolve, reject) => {\r\n+        const proxyUrl = \"https://corsproxy.io/?url=\"; // Using the provided CORS proxy\r\n+        const imgUrl = proxyUrl + encodeURIComponent(url); // Encode the URL to pass as a query parameter\r\n+\r\n+        const img = new Image();\r\n+        img.crossOrigin = \"Anonymous\"; // Allow cross-origin requests\r\n+        img.onload = () => {\r\n+            const canvas = document.createElement(\"canvas\");\r\n+            canvas.width = img.width;\r\n+            canvas.height = img.height;\r\n+            const ctx = canvas.getContext(\"2d\");\r\n+            ctx.drawImage(img, 0, 0);\r\n+            resolve(canvas.toDataURL());\r\n+        };\r\n+        img.onerror = reject;\r\n+        img.src = imgUrl; // Use the proxy URL + original image URL\r\n+    });\r\n+};\r\n+\r\n const PatientPDF = ({ form }) => {\r\n     const pdfExportComponent = useRef(null);\r\n+    const [imagesBase64, setImagesBase64] = useState({});\r\n \r\n+    useEffect(() => {\r\n+        const fetchImagesAsBase64 = async () => {\r\n+            try {\r\n+                const imageUrls = {\r\n+                    batch: form?.batch_images || [],\r\n+                    before: form?.before_images || [],\r\n+                    after: form?.after_images || [],\r\n+                    patientSign: form?.treatment_plan?.patient_sign ? [form.treatment_plan.patient_sign] : [],\r\n+                    furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n+                    patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n+                };\r\n+                \r\n+                console.log(imageUrls, 'imageUrls');\r\n+\r\n+                // Convert each image URL to Base64\r\n+                const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n+                    const urls = imageUrls[key];\r\n+                    const base64Images = await Promise.all(urls.map(url => toBase64(url)));\r\n+                    return { [key]: base64Images };\r\n+                });\r\n+\r\n+                // Set all images as Base64 in the state\r\n+                const base64Data = await Promise.all(imagePromises);\r\n+                const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n+                setImagesBase64(allImages);\r\n+            } catch (error) {\r\n+                console.error(\"Error converting images to base64:\", error);\r\n+            }\r\n+        };\r\n+\r\n+        fetchImagesAsBase64();\r\n+    }, [form]);\r\n+\r\n     const handleExportWithComponent = () => {\r\n         if (pdfExportComponent.current) {\r\n             pdfExportComponent.current.save();\r\n         }\r\n@@ -73,38 +129,216 @@\n                             <Grid item xs={12}><Typography><strong>Goals:</strong> {form?.treatment_plan?.patient_goals}</Typography></Grid>\r\n                             <Grid item xs={12}><Typography><strong>Advised Plan:</strong> {form?.treatment_plan?.advised_plan}</Typography></Grid>\r\n                             <Grid item xs={12}><Typography><strong>Expected Result:</strong> {form?.treatment_plan?.expected_result}</Typography></Grid>\r\n                             <Grid item xs={6}><Typography><strong>Date:</strong> {new Date(form?.treatment_plan?.date).toLocaleDateString()}</Typography></Grid>\r\n+                            <Grid item xs={6}><Typography><strong>Patient Signature:</strong> </Typography> {imagesBase64?.patientConsent?.[0] && <img src={imagesBase64?.patientConsent?.[0]} alt=\"Treatment Plan Sign\" style={{ width: \"200px\", borderRadius: \"8px\", marginTop: \"10px\" }} />}</Grid>\r\n                         </Grid>\r\n \r\n                         <Divider style={{ margin: \"20px 0\" }} />\r\n \r\n+                        {/* Images Section */}\r\n+                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginBottom: \"5px\" }}><strong>Batch Images :</strong></Typography>\r\n+                        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n+                            {imagesBase64?.batch?.map((img, index) => (\r\n+                                <img key={index} src={img} alt=\"Batch\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n+                            ))}\r\n+                        </div>\r\n+                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginTop: \"20px\", marginBottom: \"5px\" }}><strong>Before Images : </strong></Typography>\r\n+                        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n+                            {imagesBase64?.before?.map((img, index) => (\r\n+                                <img key={index} src={img} alt=\"Before\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n+                            ))}\r\n+                        </div>\r\n+                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginTop: \"20px\", marginBottom: \"5px\" }}><strong>After Images :</strong></Typography>\r\n+                        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n+                            {imagesBase64?.after?.map((img, index) => (\r\n+                                <img key={index} src={img} alt=\"After\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n+                            ))}\r\n+                        </div>\r\n+\r\n+                        <Divider style={{ margin: \"20px 0\" }} />\r\n+\r\n                         {/* Treatment Records Table */}\r\n-                        <div style={{ pageBreakBefore: \"always\" }}>\r\n+                        <div style={{ pageBreakBefore: \"always\" }}> {/* Force page break before this section */}\r\n                             <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Treatment Records</Typography>\r\n+                            <TableContainer>\r\n+                                <Table>\r\n+                                    <TableHead>\r\n+                                        <TableRow>\r\n+                                            <TableCell><strong>Date</strong></TableCell>\r\n+                                            <TableCell><strong>Description</strong></TableCell>\r\n+                                            <TableCell><strong>Amount</strong></TableCell>\r\n+                                        </TableRow>\r\n+                                    </TableHead>\r\n+                                    <TableBody>\r\n+                                        {form?.treatment_record?.map((record, index) => (\r\n+                                            <TableRow key={index}>\r\n+                                                <TableCell>{new Date(record.date).toLocaleDateString()}</TableCell>\r\n+                                                <TableCell>{record.description}</TableCell>\r\n+                                                <TableCell>${record.amount}</TableCell>\r\n+                                            </TableRow>\r\n+                                        ))}\r\n+                                    </TableBody>\r\n+                                </Table>\r\n+                            </TableContainer>\r\n+                        </div>\r\n+\r\n+                        <Divider style={{ margin: \"20px 0\" }} />\r\n+\r\n+                        {/* Further Treatment Section */}\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n+                        <div style={{ marginTop: \"10px\" }}>\r\n                             <Grid container spacing={2}>\r\n-                                <Grid item xs={12}>\r\n-                                    <table style={{ width: \"100%\", border: \"1px solid #ddd\", borderCollapse: \"collapse\" }}>\r\n-                                        <thead>\r\n-                                            <tr>\r\n-                                                <th style={{ padding: \"8px\", textAlign: \"left\", borderBottom: \"1px solid #ddd\" }}>Date</th>\r\n-                                                <th style={{ padding: \"8px\", textAlign: \"left\", borderBottom: \"1px solid #ddd\" }}>Description</th>\r\n-                                                <th style={{ padding: \"8px\", textAlign: \"left\", borderBottom: \"1px solid #ddd\" }}>Amount</th>\r\n-                                            </tr>\r\n-                                        </thead>\r\n-                                        <tbody>\r\n-                                            {form?.treatment_record?.map((record, index) => (\r\n-                                                <tr key={index}>\r\n-                                                    <td style={{ padding: \"8px\" }}>{new Date(record.date).toLocaleDateString()}</td>\r\n-                                                    <td style={{ padding: \"8px\" }}>{record.description}</td>\r\n-                                                    <td style={{ padding: \"8px\" }}>${record.amount}</td>\r\n-                                                </tr>\r\n-                                            ))}\r\n-                                        </tbody>\r\n-                                    </table>\r\n-                                </Grid>\r\n+                                {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n+                                    <>\r\n+\r\n+\r\n+                                        {/* Date Grid Item */}\r\n+                                        <Grid item xs={12} sm={6} md={6} key={`date-${index}`}>\r\n+                                            <div\r\n+                                                style={{\r\n+                                                    textAlign: \"left\",\r\n+\r\n+                                                    borderRadius: \"8px\",\r\n+                                                    padding: \"10px\",\r\n+                                                    display: \"flex\",\r\n+                                                    flexDirection: \"column\",\r\n+                                                    alignItems: \"flex-start\",\r\n+                                                }}\r\n+                                            >\r\n+                                                {/* Date */}\r\n+                                                <Typography\r\n+                                                    variant=\"body2\"\r\n+                                                    style={{ marginTop: \"5px\", fontSize: \"14px\", textAlign: 'left' }}\r\n+                                                >\r\n+                                                    <strong>  Date : </strong>  {form?.further_treatment?.[0]?.date\r\n+                                                        ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n+                                                            weekday: \"long\",\r\n+                                                            year: \"numeric\",\r\n+                                                            month: \"long\",\r\n+                                                            day: \"numeric\",\r\n+                                                        })\r\n+                                                        : \"No Date Available\"}\r\n+                                                </Typography>\r\n+                                            </div>\r\n+                                        </Grid>\r\n+                                        {/* Image Grid Item */}\r\n+                                        <Grid item xs={12} sm={6} md={6} key={`image-${index}`}>\r\n+                                            <Typography><strong>Patient Signature:</strong> </Typography>\r\n+                                            <div\r\n+                                                style={{\r\n+                                                    textAlign: \"center\",\r\n+                                                    border: \"2px solid #ddd\",\r\n+                                                    borderRadius: \"8px\",\r\n+                                                    padding: \"10px\",\r\n+                                                    display: \"flex\",\r\n+                                                    flexDirection: \"column\",\r\n+                                                    alignItems: \"center\",\r\n+                                                }}\r\n+                                            >\r\n+                                                {/* Image */}\r\n+                                                <img\r\n+                                                    src={treatment} // Assuming each treatment has base64 image data\r\n+                                                    alt=\"Further Treatment Sign\"\r\n+                                                    style={{\r\n+                                                        width: \"200px\",\r\n+                                                        borderRadius: \"8px\",\r\n+                                                        marginBottom: \"10px\",\r\n+                                                    }}\r\n+                                                />\r\n+                                            </div>\r\n+                                        </Grid>\r\n+                                    </>\r\n+                                ))}\r\n                             </Grid>\r\n+\r\n+\r\n                         </div>\r\n+\r\n+\r\n+                        <Divider style={{ margin: \"20px 0\" }} />\r\n+\r\n+                        {/* Patient Consent */}\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n+                        <Grid container>\r\n+                        \r\n+                        <Grid item xs={12} sm={6} md={6}>\r\n+                            <div\r\n+                                style={{\r\n+                                    textAlign: \"left\",\r\n+                           \r\n+                                    borderRadius: \"8px\",\r\n+                                    padding: \"10px\",\r\n+                                    display: \"flex\",\r\n+                                    flexDirection: \"column\",\r\n+                                    alignItems: \"flex-start\",\r\n+                                }}\r\n+                            >\r\n+                                {/* Patient Consent Details */}\r\n+                                <Typography variant=\"body2\" style={{ marginBottom: \"10px\", color: \"#555\", fontSize: \"14px\" }}>\r\n+                                    {form?.patient_consent?.details || \"No Patient Consent Details Available\"}\r\n+                                </Typography>\r\n+                            </div>\r\n+                        </Grid>\r\n+\r\n+                        {/* Patient Consent Signature */}\r\n+                        <Grid item xs={12} sm={6} md={6}>\r\n+                        <Typography><strong>Patient Signature:</strong> </Typography>\r\n+                            <div\r\n+                                style={{\r\n+                                    textAlign: \"center\",\r\n+                                    border: \"2px solid #ddd\",\r\n+                                    borderRadius: \"8px\",\r\n+                                    padding: \"10px\",\r\n+                                    display: \"flex\",\r\n+                                    flexDirection: \"column\",\r\n+                                    alignItems: \"center\",\r\n+                                }}\r\n+                            >\r\n+                                {/* Patient Consent Signature */}\r\n+                                {imagesBase64?.patientConsent?.[0] && (\r\n+                                    <img\r\n+                                        src={imagesBase64?.patientConsent?.[0]} // Assuming the signature is a URL or base64\r\n+                                        alt=\"Patient Consent Signature\"\r\n+                                        style={{\r\n+                                            width: \"200px\",\r\n+                                            borderRadius: \"8px\",\r\n+                                            marginBottom: \"10px\",\r\n+                                        }}\r\n+                                    />\r\n+                                )}\r\n+\r\n+                              \r\n+                            </div>\r\n+                        </Grid>\r\n+                        </Grid>\r\n+                        <Divider style={{ margin: \"20px 0\" }} />\r\n+\r\n+                        {/* Patient Consent */}\r\n+                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient SideEffects</Typography>\r\n+                        <Grid container>\r\n+                        \r\n+                        <Grid item xs={12} sm={6} md={6}>\r\n+                            <div\r\n+                                style={{\r\n+                                    textAlign: \"left\",\r\n+                           \r\n+                                    borderRadius: \"8px\",\r\n+                                    padding: \"10px\",\r\n+                                    display: \"flex\",\r\n+                                    flexDirection: \"column\",\r\n+                                    alignItems: \"flex-start\",\r\n+                                }}\r\n+                            >\r\n+                                {/* Patient Consent Details */}\r\n+                                <Typography variant=\"body2\" style={{ marginBottom: \"10px\", color: \"#555\", fontSize: \"14px\" }}>\r\n+                                    {form?.side_effect?.details || \"No SideEffects\"}\r\n+                                </Typography>\r\n+                            </div>\r\n+                        </Grid>\r\n+\r\n+                       \r\n+                        </Grid>\r\n                     </CardContent>\r\n                 </Card>\r\n             </PDFExport>\r\n         </div>\r\n"
                },
                {
                    "date": 1743683171066,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,348 +1,929 @@\n-import React, { useRef, useEffect, useState } from \"react\";\r\n-import { PDFExport } from \"@progress/kendo-react-pdf\";\r\n-import { Button, Card, CardContent, Typography, Divider, Grid, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from \"@mui/material\";\r\n+import React, { useRef, useEffect, useState } from \"react\"\r\n+import { PDFExport } from \"@progress/kendo-react-pdf\"\r\n+import {\r\n+  Button,\r\n+  Card,\r\n+  CardContent,\r\n+  Typography,\r\n+  Grid,\r\n+  Table,\r\n+  TableBody,\r\n+  TableCell,\r\n+  TableContainer,\r\n+  TableHead,\r\n+  TableRow,\r\n+  Box,\r\n+  Paper,\r\n+} from \"@mui/material\"\r\n \r\n // Function to convert image URL to Base64\r\n-// Function to convert image URL to Base64\r\n const toBase64 = (url) => {\r\n-    return new Promise((resolve, reject) => {\r\n-        const proxyUrl = \"https://corsproxy.io/?url=\"; // Using the provided CORS proxy\r\n-        const imgUrl = proxyUrl + encodeURIComponent(url); // Encode the URL to pass as a query parameter\r\n+  return new Promise((resolve, reject) => {\r\n+    const proxyUrl = \"https://corsproxy.io/?url=\"\r\n+    const imgUrl = proxyUrl + encodeURIComponent(url)\r\n \r\n-        const img = new Image();\r\n-        img.crossOrigin = \"Anonymous\"; // Allow cross-origin requests\r\n-        img.onload = () => {\r\n-            const canvas = document.createElement(\"canvas\");\r\n-            canvas.width = img.width;\r\n-            canvas.height = img.height;\r\n-            const ctx = canvas.getContext(\"2d\");\r\n-            ctx.drawImage(img, 0, 0);\r\n-            resolve(canvas.toDataURL());\r\n-        };\r\n-        img.onerror = reject;\r\n-        img.src = imgUrl; // Use the proxy URL + original image URL\r\n-    });\r\n-};\r\n+    const img = new Image()\r\n+    img.crossOrigin = \"Anonymous\"\r\n+    img.onload = () => {\r\n+      const canvas = document.createElement(\"canvas\")\r\n+      canvas.width = img.width\r\n+      canvas.height = img.height\r\n+      const ctx = canvas.getContext(\"2d\")\r\n+      ctx.drawImage(img, 0, 0)\r\n+      resolve(canvas.toDataURL())\r\n+    }\r\n+    img.onerror = reject\r\n+    img.src = imgUrl\r\n+  })\r\n+}\r\n \r\n const PatientPDF = ({ form }) => {\r\n-    const pdfExportComponent = useRef(null);\r\n-    const [imagesBase64, setImagesBase64] = useState({});\r\n+  const pdfExportComponent = useRef(null)\r\n+  const [imagesBase64, setImagesBase64] = useState({})\r\n \r\n-    useEffect(() => {\r\n-        const fetchImagesAsBase64 = async () => {\r\n-            try {\r\n-                const imageUrls = {\r\n-                    batch: form?.batch_images || [],\r\n-                    before: form?.before_images || [],\r\n-                    after: form?.after_images || [],\r\n-                    patientSign: form?.treatment_plan?.patient_sign ? [form.treatment_plan.patient_sign] : [],\r\n-                    furtherTreatment: form?.further_treatment?.map(treatment => treatment?.sign) || [],\r\n-                    patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n-                };\r\n-                \r\n-                console.log(imageUrls, 'imageUrls');\r\n+  useEffect(() => {\r\n+    const fetchImagesAsBase64 = async () => {\r\n+      try {\r\n+        const imageUrls = {\r\n+          batch: form?.batch_images || [],\r\n+          before: form?.before_images || [],\r\n+          after: form?.after_images || [],\r\n+          patientSign: form?.treatment_plan?.patient_sign ? [form.treatment_plan.patient_sign] : [],\r\n+          furtherTreatment: form?.further_treatment?.map((treatment) => treatment?.sign) || [],\r\n+          patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n+        }\r\n \r\n-                // Convert each image URL to Base64\r\n-                const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n-                    const urls = imageUrls[key];\r\n-                    const base64Images = await Promise.all(urls.map(url => toBase64(url)));\r\n-                    return { [key]: base64Images };\r\n-                });\r\n+        // Convert each image URL to Base64\r\n+        const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n+          const urls = imageUrls[key]\r\n+          const base64Images = await Promise.all(urls.map((url) => toBase64(url)))\r\n+          return { [key]: base64Images }\r\n+        })\r\n \r\n-                // Set all images as Base64 in the state\r\n-                const base64Data = await Promise.all(imagePromises);\r\n-                const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {});\r\n-                setImagesBase64(allImages);\r\n-            } catch (error) {\r\n-                console.error(\"Error converting images to base64:\", error);\r\n-            }\r\n-        };\r\n+        // Set all images as Base64 in the state\r\n+        const base64Data = await Promise.all(imagePromises)\r\n+        const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {})\r\n+        setImagesBase64(allImages)\r\n+      } catch (error) {\r\n+        console.error(\"Error converting images to base64:\", error)\r\n+      }\r\n+    }\r\n \r\n-        fetchImagesAsBase64();\r\n-    }, [form]);\r\n+    fetchImagesAsBase64()\r\n+  }, [form])\r\n \r\n-    const handleExportWithComponent = () => {\r\n-        if (pdfExportComponent.current) {\r\n-            pdfExportComponent.current.save();\r\n-        }\r\n-    };\r\n+  const handleExportWithComponent = () => {\r\n+    if (pdfExportComponent.current) {\r\n+      pdfExportComponent.current.save()\r\n+    }\r\n+  }\r\n \r\n-    return (\r\n-        <div>\r\n-            <Button\r\n-                variant=\"contained\"\r\n-                color=\"primary\"\r\n-                onClick={handleExportWithComponent}\r\n-                style={{ marginBottom: \"20px\", padding: \"10px 20px\", fontSize: \"16px\", fontWeight: \"bold\" }}\r\n+  // Format date function\r\n+  const formatDate = (dateString) => {\r\n+    if (!dateString) return \"N/A\"\r\n+    return new Date(dateString).toLocaleDateString(\"en-US\", {\r\n+      year: \"numeric\",\r\n+      month: \"long\",\r\n+      day: \"numeric\",\r\n+    })\r\n+  }\r\n+\r\n+  return (\r\n+    <div>\r\n+      <Button\r\n+        variant=\"contained\"\r\n+        color=\"primary\"\r\n+        onClick={handleExportWithComponent}\r\n+        sx={{\r\n+          marginBottom: \"20px\",\r\n+          padding: \"10px 24px\",\r\n+          fontSize: \"16px\",\r\n+          fontWeight: \"bold\",\r\n+          borderRadius: \"8px\",\r\n+          boxShadow: \"0 4px 6px rgba(0,0,0,0.1)\",\r\n+          textTransform: \"none\",\r\n+        }}\r\n+      >\r\n+        Download Patient Report\r\n+      </Button>\r\n+\r\n+      <PDFExport ref={pdfExportComponent} paperSize=\"A4\" margin=\"1cm\">\r\n+        <Card\r\n+          sx={{\r\n+            maxWidth: \"800px\",\r\n+            margin: \"auto\",\r\n+            backgroundColor: \"#ffffff\",\r\n+            borderRadius: \"12px\",\r\n+            boxShadow: \"0 4px 20px rgba(0,0,0,0.08)\",\r\n+          }}\r\n+        >\r\n+          <CardContent sx={{ padding: \"30px\" }}>\r\n+            {/* Header */}\r\n+            <Box\r\n+              sx={{\r\n+                textAlign: \"center\",\r\n+                marginBottom: \"20px\",\r\n+                backgroundColor: \"#f8f9fa\",\r\n+                padding: \"20px\",\r\n+                borderRadius: \"8px\",\r\n+              }}\r\n             >\r\n-                Download PDF\r\n-            </Button>\r\n-            <PDFExport ref={pdfExportComponent} paperSize=\"A4\">\r\n-                <Card style={{ padding: \"20px\", maxWidth: \"800px\", margin: \"auto\", backgroundColor: \"#f9f9f9\", borderRadius: \"8px\" }}>\r\n-                    <CardContent>\r\n-                        <Typography variant=\"h5\" gutterBottom style={{ textAlign: \"center\", color: \"#333\" }}>\r\n-                            Patient Report\r\n-                        </Typography>\r\n-                        <Divider style={{ margin: \"15px 0\" }} />\r\n+              <Typography\r\n+                variant=\"h4\"\r\n+                sx={{\r\n+                  fontWeight: \"700\",\r\n+                  color: \"#2c3e50\",\r\n+                  marginBottom: \"5px\",\r\n+                }}\r\n+              >\r\n+                Patient Medical Report\r\n+              </Typography>\r\n+              <Typography variant=\"subtitle1\" sx={{ color: \"#5d6778\" }}>\r\n+                Confidential Medical Documentation\r\n+              </Typography>\r\n+            </Box>\r\n \r\n-                        {/* Patient Information Section */}\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Information</Typography>\r\n-                        <Grid container spacing={2}>\r\n-                            <Grid item xs={6}><Typography><strong>Name:</strong> {form?.first_name} {form?.last_name}</Typography></Grid>\r\n-                            <Grid item xs={6}><Typography><strong>DOB:</strong> {new Date(form?.dob).toLocaleDateString()}</Typography></Grid>\r\n-                            <Grid item xs={6}><Typography><strong>Phone:</strong> {form?.phone}</Typography></Grid>\r\n-                            <Grid item xs={6}><Typography><strong>Email:</strong> {form?.email}</Typography></Grid>\r\n-                            <Grid item xs={12}><Typography><strong>Address:</strong> {form?.address}, {form?.post_code}</Typography></Grid>\r\n-                            <Grid item xs={12}><Typography><strong>Notes:</strong> {form?.notes}</Typography></Grid>\r\n-                        </Grid>\r\n+            {/* Patient Information Section */}\r\n+            <Paper\r\n+              elevation={0}\r\n+              sx={{\r\n+                padding: \"20px\",\r\n+                marginBottom: \"25px\",\r\n+                backgroundColor: \"#f8f9fa\",\r\n+                borderRadius: \"8px\",\r\n+                border: \"1px solid #e0e0e0\",\r\n+              }}\r\n+            >\r\n+              <Typography\r\n+                variant=\"h6\"\r\n+                sx={{\r\n+                  fontWeight: \"600\",\r\n+                  marginBottom: \"15px\",\r\n+                  color: \"#2c3e50\",\r\n+                  borderBottom: \"2px solid #3498db\",\r\n+                  paddingBottom: \"8px\",\r\n+                  display: \"inline-block\",\r\n+                }}\r\n+              >\r\n+                Patient Information\r\n+              </Typography>\r\n \r\n-                        <Divider style={{ margin: \"20px 0\" }} />\r\n+              <Grid container spacing={3}>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Name:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                      {form?.first_name} {form?.last_name}\r\n+                    </span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    DOB: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{formatDate(form?.dob)}</span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Phone: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.phone}</span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Email: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.email}</span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={12}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Address:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                      {form?.address}, {form?.post_code}\r\n+                    </span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={12}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Notes: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.notes || \"None\"}</span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+              </Grid>\r\n+            </Paper>\r\n \r\n-                        {/* Next of Kin Information */}\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Next of Kin</Typography>\r\n-                        <Grid container spacing={2}>\r\n-                            <Grid item xs={6}><Typography><strong>Name:</strong> {form?.kin_details?.name}</Typography></Grid>\r\n-                            <Grid item xs={6}><Typography><strong>Phone:</strong> {form?.kin_details?.phone}</Typography></Grid>\r\n-                        </Grid>\r\n-                        <Grid container spacing={2}>\r\n-                            <Grid item xs={6}><Typography><strong>Address:</strong> {form?.kin_details?.address}</Typography></Grid>\r\n-                            <Grid item xs={6}><Typography><strong>Email:</strong> {form?.kin_details?.email}</Typography></Grid>\r\n-                        </Grid>\r\n+            {/* Next of Kin Information */}\r\n+            <Paper\r\n+              elevation={0}\r\n+              sx={{\r\n+                padding: \"20px\",\r\n+                marginBottom: \"25px\",\r\n+                backgroundColor: \"#f8f9fa\",\r\n+                borderRadius: \"8px\",\r\n+                border: \"1px solid #e0e0e0\",\r\n+              }}\r\n+            >\r\n+              <Typography\r\n+                variant=\"h6\"\r\n+                sx={{\r\n+                  fontWeight: \"600\",\r\n+                  marginBottom: \"15px\",\r\n+                  color: \"#2c3e50\",\r\n+                  borderBottom: \"2px solid #3498db\",\r\n+                  paddingBottom: \"8px\",\r\n+                  display: \"inline-block\",\r\n+                }}\r\n+              >\r\n+                Next of Kin\r\n+              </Typography>\r\n \r\n-                        <Divider style={{ margin: \"20px 0\" }} />\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>General Practitioners</Typography>\r\n-                        <Grid container spacing={2}>\r\n-                            <Grid item xs={6}><Typography><strong>Name:</strong> {form?.general_practitioner?.name}</Typography></Grid>\r\n-                            <Grid item xs={6}><Typography><strong>Phone:</strong> {form?.general_practitioner?.phone}</Typography></Grid>\r\n-                        </Grid>\r\n-                        <Grid container spacing={2}>\r\n-                            <Grid item xs={6}><Typography><strong>Address:</strong> {form?.general_practitioner?.address}</Typography></Grid>\r\n-                            <Grid item xs={6}><Typography><strong>Email:</strong> {form?.general_practitioner?.email}</Typography></Grid>\r\n-                        </Grid>\r\n+              <Grid container spacing={3}>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Name:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.name || \"N/A\"}</span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Phone:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.phone || \"N/A\"}</span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Address:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.address || \"N/A\"}</span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Email:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.email || \"N/A\"}</span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+              </Grid>\r\n+            </Paper>\r\n \r\n-                        <Divider style={{ margin: \"20px 0\" }} />\r\n+            {/* General Practitioners */}\r\n+            <Paper\r\n+              elevation={0}\r\n+              sx={{\r\n+                padding: \"20px\",\r\n+                marginBottom: \"25px\",\r\n+                backgroundColor: \"#f8f9fa\",\r\n+                borderRadius: \"8px\",\r\n+                border: \"1px solid #e0e0e0\",\r\n+              }}\r\n+            >\r\n+              <Typography\r\n+                variant=\"h6\"\r\n+                sx={{\r\n+                  fontWeight: \"600\",\r\n+                  marginBottom: \"15px\",\r\n+                  color: \"#2c3e50\",\r\n+                  borderBottom: \"2px solid #3498db\",\r\n+                  paddingBottom: \"8px\",\r\n+                  display: \"inline-block\",\r\n+                }}\r\n+              >\r\n+                General Practitioners\r\n+              </Typography>\r\n \r\n-                        {/* Treatment Plan */}\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Treatment Plan</Typography>\r\n-                        <Grid container spacing={2}>\r\n-                            <Grid item xs={12}><Typography><strong>Concerns:</strong> {form?.treatment_plan?.patient_concerns}</Typography></Grid>\r\n-                            <Grid item xs={12}><Typography><strong>Goals:</strong> {form?.treatment_plan?.patient_goals}</Typography></Grid>\r\n-                            <Grid item xs={12}><Typography><strong>Advised Plan:</strong> {form?.treatment_plan?.advised_plan}</Typography></Grid>\r\n-                            <Grid item xs={12}><Typography><strong>Expected Result:</strong> {form?.treatment_plan?.expected_result}</Typography></Grid>\r\n-                            <Grid item xs={6}><Typography><strong>Date:</strong> {new Date(form?.treatment_plan?.date).toLocaleDateString()}</Typography></Grid>\r\n-                            <Grid item xs={6}><Typography><strong>Patient Signature:</strong> </Typography> {imagesBase64?.patientConsent?.[0] && <img src={imagesBase64?.patientConsent?.[0]} alt=\"Treatment Plan Sign\" style={{ width: \"200px\", borderRadius: \"8px\", marginTop: \"10px\" }} />}</Grid>\r\n-                        </Grid>\r\n+              <Grid container spacing={3}>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Name:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                      {form?.general_practitioner?.name || \"N/A\"}\r\n+                    </span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Phone:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                      {form?.general_practitioner?.phone || \"N/A\"}\r\n+                    </span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Address:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                      {form?.general_practitioner?.address || \"N/A\"}\r\n+                    </span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Email:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                      {form?.general_practitioner?.email || \"N/A\"}\r\n+                    </span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+              </Grid>\r\n+            </Paper>\r\n \r\n-                        <Divider style={{ margin: \"20px 0\" }} />\r\n+            {/* Treatment Plan */}\r\n+            <Paper\r\n+              elevation={0}\r\n+              sx={{\r\n+                padding: \"20px\",\r\n+                marginBottom: \"25px\",\r\n+                backgroundColor: \"#f8f9fa\",\r\n+                borderRadius: \"8px\",\r\n+                border: \"1px solid #e0e0e0\",\r\n+              }}\r\n+            >\r\n+              <Typography\r\n+                variant=\"h6\"\r\n+                sx={{\r\n+                  fontWeight: \"600\",\r\n+                  marginBottom: \"15px\",\r\n+                  color: \"#2c3e50\",\r\n+                  borderBottom: \"2px solid #3498db\",\r\n+                  paddingBottom: \"8px\",\r\n+                  display: \"inline-block\",\r\n+                }}\r\n+              >\r\n+                Treatment Plan\r\n+              </Typography>\r\n \r\n-                        {/* Images Section */}\r\n-                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginBottom: \"5px\" }}><strong>Batch Images :</strong></Typography>\r\n-                        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-                            {imagesBase64?.batch?.map((img, index) => (\r\n-                                <img key={index} src={img} alt=\"Batch\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n-                            ))}\r\n-                        </div>\r\n-                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginTop: \"20px\", marginBottom: \"5px\" }}><strong>Before Images : </strong></Typography>\r\n-                        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-                            {imagesBase64?.before?.map((img, index) => (\r\n-                                <img key={index} src={img} alt=\"Before\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n-                            ))}\r\n-                        </div>\r\n-                        <Typography variant=\"subtitle1\" style={{ fontWeight: \"500\", marginTop: \"20px\", marginBottom: \"5px\" }}><strong>After Images :</strong></Typography>\r\n-                        <div style={{ display: \"flex\", gap: \"15px\", marginTop: \"10px\", flexWrap: \"wrap\" }}>\r\n-                            {imagesBase64?.after?.map((img, index) => (\r\n-                                <img key={index} src={img} alt=\"After\" style={{ width: \"100px\", borderRadius: \"8px\", border: \"2px solid #ddd\", padding: \"5px\" }} />\r\n-                            ))}\r\n-                        </div>\r\n+              <Grid container spacing={3}>\r\n+                <Grid item xs={12}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n+                    Patient Concerns:\r\n+                  </Typography>\r\n+                  <Typography\r\n+                    sx={{\r\n+                      padding: \"10px\",\r\n+                      backgroundColor: \"#ffffff\",\r\n+                      borderRadius: \"6px\",\r\n+                      border: \"1px solid #e0e0e0\",\r\n+                    }}\r\n+                  >\r\n+                    {form?.treatment_plan?.patient_concerns || \"None specified\"}\r\n+                  </Typography>\r\n+                </Grid>\r\n \r\n-                        <Divider style={{ margin: \"20px 0\" }} />\r\n+                <Grid item xs={12}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n+                    Patient Goals:\r\n+                  </Typography>\r\n+                  <Typography\r\n+                    sx={{\r\n+                      padding: \"10px\",\r\n+                      backgroundColor: \"#ffffff\",\r\n+                      borderRadius: \"6px\",\r\n+                      border: \"1px solid #e0e0e0\",\r\n+                    }}\r\n+                  >\r\n+                    {form?.treatment_plan?.patient_goals || \"None specified\"}\r\n+                  </Typography>\r\n+                </Grid>\r\n \r\n-                        {/* Treatment Records Table */}\r\n-                        <div style={{ pageBreakBefore: \"always\" }}> {/* Force page break before this section */}\r\n-                            <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Treatment Records</Typography>\r\n-                            <TableContainer>\r\n-                                <Table>\r\n-                                    <TableHead>\r\n-                                        <TableRow>\r\n-                                            <TableCell><strong>Date</strong></TableCell>\r\n-                                            <TableCell><strong>Description</strong></TableCell>\r\n-                                            <TableCell><strong>Amount</strong></TableCell>\r\n-                                        </TableRow>\r\n-                                    </TableHead>\r\n-                                    <TableBody>\r\n-                                        {form?.treatment_record?.map((record, index) => (\r\n-                                            <TableRow key={index}>\r\n-                                                <TableCell>{new Date(record.date).toLocaleDateString()}</TableCell>\r\n-                                                <TableCell>{record.description}</TableCell>\r\n-                                                <TableCell>${record.amount}</TableCell>\r\n-                                            </TableRow>\r\n-                                        ))}\r\n-                                    </TableBody>\r\n-                                </Table>\r\n-                            </TableContainer>\r\n-                        </div>\r\n+                <Grid item xs={12}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n+                    Advised Plan:\r\n+                  </Typography>\r\n+                  <Typography\r\n+                    sx={{\r\n+                      padding: \"10px\",\r\n+                      backgroundColor: \"#ffffff\",\r\n+                      borderRadius: \"6px\",\r\n+                      border: \"1px solid #e0e0e0\",\r\n+                    }}\r\n+                  >\r\n+                    {form?.treatment_plan?.advised_plan || \"None specified\"}\r\n+                  </Typography>\r\n+                </Grid>\r\n \r\n-                        <Divider style={{ margin: \"20px 0\" }} />\r\n+                <Grid item xs={12}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n+                    Expected Result:\r\n+                  </Typography>\r\n+                  <Typography\r\n+                    sx={{\r\n+                      padding: \"10px\",\r\n+                      backgroundColor: \"#ffffff\",\r\n+                      borderRadius: \"6px\",\r\n+                      border: \"1px solid #e0e0e0\",\r\n+                    }}\r\n+                  >\r\n+                    {form?.treatment_plan?.expected_result || \"None specified\"}\r\n+                  </Typography>\r\n+                </Grid>\r\n \r\n-                        {/* Further Treatment Section */}\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Further Treatment</Typography>\r\n-                        <div style={{ marginTop: \"10px\" }}>\r\n-                            <Grid container spacing={2}>\r\n-                                {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                                    <>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Date:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                      {formatDate(form?.treatment_plan?.date)}\r\n+                    </span>\r\n+                  </Typography>\r\n+                </Grid>\r\n \r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n+                    Patient Signature:\r\n+                  </Typography>\r\n+                  {imagesBase64?.patientConsent?.[0] && (\r\n+                    <Box\r\n+                      sx={{\r\n+                        border: \"1px solid #e0e0e0\",\r\n+                        borderRadius: \"6px\",\r\n+                        padding: \"10px\",\r\n+                        backgroundColor: \"#ffffff\",\r\n+                        display: \"flex\",\r\n+                        justifyContent: \"center\",\r\n+                      }}\r\n+                    >\r\n+                      <img\r\n+                        src={imagesBase64?.patientConsent?.[0] || \"/placeholder.svg\"}\r\n+                        alt=\"Treatment Plan Sign\"\r\n+                        style={{\r\n+                          width: \"200px\",\r\n+                          borderRadius: \"6px\",\r\n+                        }}\r\n+                      />\r\n+                    </Box>\r\n+                  )}\r\n+                </Grid>\r\n+              </Grid>\r\n+            </Paper>\r\n \r\n-                                        {/* Date Grid Item */}\r\n-                                        <Grid item xs={12} sm={6} md={6} key={`date-${index}`}>\r\n-                                            <div\r\n-                                                style={{\r\n-                                                    textAlign: \"left\",\r\n+            {/* Images Section */}\r\n+            <Paper\r\n+              elevation={0}\r\n+              sx={{\r\n+                padding: \"20px\",\r\n+                marginBottom: \"25px\",\r\n+                backgroundColor: \"#f8f9fa\",\r\n+                borderRadius: \"8px\",\r\n+                border: \"1px solid #e0e0e0\",\r\n+              }}\r\n+            >\r\n+              <Typography\r\n+                variant=\"h6\"\r\n+                sx={{\r\n+                  fontWeight: \"600\",\r\n+                  marginBottom: \"15px\",\r\n+                  color: \"#2c3e50\",\r\n+                  borderBottom: \"2px solid #3498db\",\r\n+                  paddingBottom: \"8px\",\r\n+                  display: \"inline-block\",\r\n+                }}\r\n+              >\r\n+                Medical Images\r\n+              </Typography>\r\n \r\n-                                                    borderRadius: \"8px\",\r\n-                                                    padding: \"10px\",\r\n-                                                    display: \"flex\",\r\n-                                                    flexDirection: \"column\",\r\n-                                                    alignItems: \"flex-start\",\r\n-                                                }}\r\n-                                            >\r\n-                                                {/* Date */}\r\n-                                                <Typography\r\n-                                                    variant=\"body2\"\r\n-                                                    style={{ marginTop: \"5px\", fontSize: \"14px\", textAlign: 'left' }}\r\n-                                                >\r\n-                                                    <strong>  Date : </strong>  {form?.further_treatment?.[0]?.date\r\n-                                                        ? new Date(form.further_treatment[0].date).toLocaleDateString(\"en-US\", {\r\n-                                                            weekday: \"long\",\r\n-                                                            year: \"numeric\",\r\n-                                                            month: \"long\",\r\n-                                                            day: \"numeric\",\r\n-                                                        })\r\n-                                                        : \"No Date Available\"}\r\n-                                                </Typography>\r\n-                                            </div>\r\n-                                        </Grid>\r\n-                                        {/* Image Grid Item */}\r\n-                                        <Grid item xs={12} sm={6} md={6} key={`image-${index}`}>\r\n-                                            <Typography><strong>Patient Signature:</strong> </Typography>\r\n-                                            <div\r\n-                                                style={{\r\n-                                                    textAlign: \"center\",\r\n-                                                    border: \"2px solid #ddd\",\r\n-                                                    borderRadius: \"8px\",\r\n-                                                    padding: \"10px\",\r\n-                                                    display: \"flex\",\r\n-                                                    flexDirection: \"column\",\r\n-                                                    alignItems: \"center\",\r\n-                                                }}\r\n-                                            >\r\n-                                                {/* Image */}\r\n-                                                <img\r\n-                                                    src={treatment} // Assuming each treatment has base64 image data\r\n-                                                    alt=\"Further Treatment Sign\"\r\n-                                                    style={{\r\n-                                                        width: \"200px\",\r\n-                                                        borderRadius: \"8px\",\r\n-                                                        marginBottom: \"10px\",\r\n-                                                    }}\r\n-                                                />\r\n-                                            </div>\r\n-                                        </Grid>\r\n-                                    </>\r\n-                                ))}\r\n-                            </Grid>\r\n+              {/* Batch Images */}\r\n+              <Box sx={{ marginBottom: \"20px\" }}>\r\n+                <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n+                  Batch Images:\r\n+                </Typography>\r\n+                <Box\r\n+                  sx={{\r\n+                    display: \"flex\",\r\n+                    gap: \"15px\",\r\n+                    flexWrap: \"wrap\",\r\n+                    backgroundColor: \"#ffffff\",\r\n+                    padding: \"15px\",\r\n+                    borderRadius: \"6px\",\r\n+                    border: \"1px solid #e0e0e0\",\r\n+                  }}\r\n+                >\r\n+                  {imagesBase64?.batch?.length > 0 ? (\r\n+                    imagesBase64.batch.map((img, index) => (\r\n+                      <Box\r\n+                        key={index}\r\n+                        sx={{\r\n+                          border: \"1px solid #e0e0e0\",\r\n+                          borderRadius: \"6px\",\r\n+                          padding: \"5px\",\r\n+                          backgroundColor: \"#ffffff\",\r\n+                          boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n+                        }}\r\n+                      >\r\n+                        <img\r\n+                          src={img || \"/placeholder.svg\"}\r\n+                          alt={Batch ${index + 1}}\r\n+                          style={{\r\n+                            width: \"100px\",\r\n+                            height: \"100px\",\r\n+                            objectFit: \"cover\",\r\n+                            borderRadius: \"4px\",\r\n+                          }}\r\n+                        />\r\n+                      </Box>\r\n+                    ))\r\n+                  ) : (\r\n+                    <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No batch images available</Typography>\r\n+                  )}\r\n+                </Box>\r\n+              </Box>\r\n \r\n+              {/* Before Images */}\r\n+              <Box sx={{ marginBottom: \"20px\" }}>\r\n+                <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n+                  Before Treatment:\r\n+                </Typography>\r\n+                <Box\r\n+                  sx={{\r\n+                    display: \"flex\",\r\n+                    gap: \"15px\",\r\n+                    flexWrap: \"wrap\",\r\n+                    backgroundColor: \"#ffffff\",\r\n+                    padding: \"15px\",\r\n+                    borderRadius: \"6px\",\r\n+                    border: \"1px solid #e0e0e0\",\r\n+                  }}\r\n+                >\r\n+                  {imagesBase64?.before?.length > 0 ? (\r\n+                    imagesBase64.before.map((img, index) => (\r\n+                      <Box\r\n+                        key={index}\r\n+                        sx={{\r\n+                          border: \"1px solid #e0e0e0\",\r\n+                          borderRadius: \"6px\",\r\n+                          padding: \"5px\",\r\n+                          backgroundColor: \"#ffffff\",\r\n+                          boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n+                        }}\r\n+                      >\r\n+                        <img\r\n+                          src={img || \"/placeholder.svg\"}\r\n+                          alt={Before ${index + 1}}\r\n+                          style={{\r\n+                            width: \"100px\",\r\n+                            height: \"100px\",\r\n+                            objectFit: \"cover\",\r\n+                            borderRadius: \"4px\",\r\n+                          }}\r\n+                        />\r\n+                      </Box>\r\n+                    ))\r\n+                  ) : (\r\n+                    <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No before images available</Typography>\r\n+                  )}\r\n+                </Box>\r\n+              </Box>\r\n \r\n-                        </div>\r\n+              {/* After Images */}\r\n+              <Box>\r\n+                <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n+                  After Treatment:\r\n+                </Typography>\r\n+                <Box\r\n+                  sx={{\r\n+                    display: \"flex\",\r\n+                    gap: \"15px\",\r\n+                    flexWrap: \"wrap\",\r\n+                    backgroundColor: \"#ffffff\",\r\n+                    padding: \"15px\",\r\n+                    borderRadius: \"6px\",\r\n+                    border: \"1px solid #e0e0e0\",\r\n+                  }}\r\n+                >\r\n+                  {imagesBase64?.after?.length > 0 ? (\r\n+                    imagesBase64.after.map((img, index) => (\r\n+                      <Box\r\n+                        key={index}\r\n+                        sx={{\r\n+                          border: \"1px solid #e0e0e0\",\r\n+                          borderRadius: \"6px\",\r\n+                          padding: \"5px\",\r\n+                          backgroundColor: \"#ffffff\",\r\n+                          boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n+                        }}\r\n+                      >\r\n+                        <img\r\n+                          src={img || \"/placeholder.svg\"}\r\n+                          alt={After ${index + 1}}\r\n+                          style={{\r\n+                            width: \"100px\",\r\n+                            height: \"100px\",\r\n+                            objectFit: \"cover\",\r\n+                            borderRadius: \"4px\",\r\n+                          }}\r\n+                        />\r\n+                      </Box>\r\n+                    ))\r\n+                  ) : (\r\n+                    <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No after images available</Typography>\r\n+                  )}\r\n+                </Box>\r\n+              </Box>\r\n+            </Paper>\r\n \r\n+            {/* Treatment Records Table - Page Break */}\r\n+            <Box sx={{ pageBreakBefore: \"always\" }}>\r\n+              <Paper\r\n+                elevation={0}\r\n+                sx={{\r\n+                  padding: \"20px\",\r\n+                  marginBottom: \"25px\",\r\n+                  backgroundColor: \"#f8f9fa\",\r\n+                  borderRadius: \"8px\",\r\n+                  border: \"1px solid #e0e0e0\",\r\n+                }}\r\n+              >\r\n+                <Typography\r\n+                  variant=\"h6\"\r\n+                  sx={{\r\n+                    fontWeight: \"600\",\r\n+                    marginBottom: \"15px\",\r\n+                    color: \"#2c3e50\",\r\n+                    borderBottom: \"2px solid #3498db\",\r\n+                    paddingBottom: \"8px\",\r\n+                    display: \"inline-block\",\r\n+                  }}\r\n+                >\r\n+                  Treatment Records\r\n+                </Typography>\r\n \r\n-                        <Divider style={{ margin: \"20px 0\" }} />\r\n+                <TableContainer component={Paper} elevation={0} sx={{ border: \"1px solid #e0e0e0\" }}>\r\n+                  <Table>\r\n+                    <TableHead sx={{ backgroundColor: \"#f1f8ff\" }}>\r\n+                      <TableRow>\r\n+                        <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Date</TableCell>\r\n+                        <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Description</TableCell>\r\n+                        <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Amount</TableCell>\r\n+                      </TableRow>\r\n+                    </TableHead>\r\n+                    <TableBody>\r\n+                      {form?.treatment_record?.length > 0 ? (\r\n+                        form.treatment_record.map((record, index) => (\r\n+                          <TableRow\r\n+                            key={index}\r\n+                            sx={{\r\n+                              \"&:nth-of-type(odd)\": { backgroundColor: \"#f9f9f9\" },\r\n+                              \"&:hover\": { backgroundColor: \"#f5f5f5\" },\r\n+                            }}\r\n+                          >\r\n+                            <TableCell>{formatDate(record.date)}</TableCell>\r\n+                            <TableCell>{record.description}</TableCell>\r\n+                            <TableCell>${record.amount}</TableCell>\r\n+                          </TableRow>\r\n+                        ))\r\n+                      ) : (\r\n+                        <TableRow>\r\n+                          <TableCell colSpan={3} sx={{ textAlign: \"center\", color: \"#7f8c8d\", fontStyle: \"italic\" }}>\r\n+                            No treatment records available\r\n+                          </TableCell>\r\n+                        </TableRow>\r\n+                      )}\r\n+                    </TableBody>\r\n+                  </Table>\r\n+                </TableContainer>\r\n+              </Paper>\r\n \r\n-                        {/* Patient Consent */}\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient Consent</Typography>\r\n-                        <Grid container>\r\n-                        \r\n-                        <Grid item xs={12} sm={6} md={6}>\r\n-                            <div\r\n-                                style={{\r\n-                                    textAlign: \"left\",\r\n-                           \r\n-                                    borderRadius: \"8px\",\r\n-                                    padding: \"10px\",\r\n-                                    display: \"flex\",\r\n-                                    flexDirection: \"column\",\r\n-                                    alignItems: \"flex-start\",\r\n-                                }}\r\n-                            >\r\n-                                {/* Patient Consent Details */}\r\n-                                <Typography variant=\"body2\" style={{ marginBottom: \"10px\", color: \"#555\", fontSize: \"14px\" }}>\r\n-                                    {form?.patient_consent?.details || \"No Patient Consent Details Available\"}\r\n-                                </Typography>\r\n-                            </div>\r\n-                        </Grid>\r\n+              {/* Further Treatment Section */}\r\n+              <Paper\r\n+                elevation={0}\r\n+                sx={{\r\n+                  padding: \"20px\",\r\n+                  marginBottom: \"25px\",\r\n+                  backgroundColor: \"#f8f9fa\",\r\n+                  borderRadius: \"8px\",\r\n+                  border: \"1px solid #e0e0e0\",\r\n+                }}\r\n+              >\r\n+                <Typography\r\n+                  variant=\"h6\"\r\n+                  sx={{\r\n+                    fontWeight: \"600\",\r\n+                    marginBottom: \"15px\",\r\n+                    color: \"#2c3e50\",\r\n+                    borderBottom: \"2px solid #3498db\",\r\n+                    paddingBottom: \"8px\",\r\n+                    display: \"inline-block\",\r\n+                  }}\r\n+                >\r\n+                  Further Treatment\r\n+                </Typography>\r\n \r\n-                        {/* Patient Consent Signature */}\r\n-                        <Grid item xs={12} sm={6} md={6}>\r\n-                        <Typography><strong>Patient Signature:</strong> </Typography>\r\n-                            <div\r\n-                                style={{\r\n-                                    textAlign: \"center\",\r\n-                                    border: \"2px solid #ddd\",\r\n-                                    borderRadius: \"8px\",\r\n-                                    padding: \"10px\",\r\n-                                    display: \"flex\",\r\n-                                    flexDirection: \"column\",\r\n-                                    alignItems: \"center\",\r\n-                                }}\r\n-                            >\r\n-                                {/* Patient Consent Signature */}\r\n-                                {imagesBase64?.patientConsent?.[0] && (\r\n-                                    <img\r\n-                                        src={imagesBase64?.patientConsent?.[0]} // Assuming the signature is a URL or base64\r\n-                                        alt=\"Patient Consent Signature\"\r\n-                                        style={{\r\n-                                            width: \"200px\",\r\n-                                            borderRadius: \"8px\",\r\n-                                            marginBottom: \"10px\",\r\n-                                        }}\r\n-                                    />\r\n-                                )}\r\n+                <Grid container spacing={3}>\r\n+                  {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n+                    <React.Fragment key={treatment-${index}}>\r\n+                      {/* Date Grid Item */}\r\n+                      <Grid item xs={12} sm={6} md={6}>\r\n+                        <Box\r\n+                          sx={{\r\n+                            padding: \"15px\",\r\n+                            borderRadius: \"6px\",\r\n+                            backgroundColor: \"#ffffff\",\r\n+                            border: \"1px solid #e0e0e0\",\r\n+                          }}\r\n+                        >\r\n+                          <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                            Date:\r\n+                          </Typography>\r\n+                          <Typography variant=\"body2\" sx={{ color: \"#2c3e50\", marginTop: \"5px\" }}>\r\n+                            {form?.further_treatment?.[index]?.date\r\n+                              ? formatDate(form.further_treatment[index].date)\r\n+                              : \"No Date Available\"}\r\n+                          </Typography>\r\n+                        </Box>\r\n+                      </Grid>\r\n \r\n-                              \r\n-                            </div>\r\n-                        </Grid>\r\n-                        </Grid>\r\n-                        <Divider style={{ margin: \"20px 0\" }} />\r\n+                      {/* Signature Grid Item */}\r\n+                      <Grid item xs={12} sm={6} md={6}>\r\n+                        <Box\r\n+                          sx={{\r\n+                            padding: \"15px\",\r\n+                            borderRadius: \"6px\",\r\n+                            backgroundColor: \"#ffffff\",\r\n+                            border: \"1px solid #e0e0e0\",\r\n+                          }}\r\n+                        >\r\n+                          <Typography\r\n+                            variant=\"body1\"\r\n+                            sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}\r\n+                          >\r\n+                            Patient Signature:\r\n+                          </Typography>\r\n+                          <Box\r\n+                            sx={{\r\n+                              display: \"flex\",\r\n+                              justifyContent: \"center\",\r\n+                              border: \"1px solid #e0e0e0\",\r\n+                              borderRadius: \"6px\",\r\n+                              padding: \"10px\",\r\n+                              backgroundColor: \"#f9f9f9\",\r\n+                            }}\r\n+                          >\r\n+                            <img\r\n+                              src={treatment || \"/placeholder.svg\"}\r\n+                              alt=\"Further Treatment Sign\"\r\n+                              style={{\r\n+                                width: \"200px\",\r\n+                                borderRadius: \"6px\",\r\n+                              }}\r\n+                            />\r\n+                          </Box>\r\n+                        </Box>\r\n+                      </Grid>\r\n+                    </React.Fragment>\r\n+                  ))}\r\n \r\n-                        {/* Patient Consent */}\r\n-                        <Typography variant=\"h6\" style={{ fontWeight: \"600\", marginBottom: \"10px\", color: \"#333\" }}>Patient SideEffects</Typography>\r\n-                        <Grid container>\r\n-                        \r\n-                        <Grid item xs={12} sm={6} md={6}>\r\n-                            <div\r\n-                                style={{\r\n-                                    textAlign: \"left\",\r\n-                           \r\n-                                    borderRadius: \"8px\",\r\n-                                    padding: \"10px\",\r\n-                                    display: \"flex\",\r\n-                                    flexDirection: \"column\",\r\n-                                    alignItems: \"flex-start\",\r\n-                                }}\r\n-                            >\r\n-                                {/* Patient Consent Details */}\r\n-                                <Typography variant=\"body2\" style={{ marginBottom: \"10px\", color: \"#555\", fontSize: \"14px\" }}>\r\n-                                    {form?.side_effect?.details || \"No SideEffects\"}\r\n-                                </Typography>\r\n-                            </div>\r\n-                        </Grid>\r\n+                  {(!imagesBase64?.furtherTreatment || imagesBase64.furtherTreatment.length === 0) && (\r\n+                    <Grid item xs={12}>\r\n+                      <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\", textAlign: \"center\", padding: \"20px\" }}>\r\n+                        No further treatment information available\r\n+                      </Typography>\r\n+                    </Grid>\r\n+                  )}\r\n+                </Grid>\r\n+              </Paper>\r\n \r\n-                       \r\n-                        </Grid>\r\n-                    </CardContent>\r\n-                </Card>\r\n-            </PDFExport>\r\n-        </div>\r\n-    );\r\n-};\r\n+              {/* Patient Consent */}\r\n+              <Paper\r\n+                elevation={0}\r\n+                sx={{\r\n+                  padding: \"20px\",\r\n+                  marginBottom: \"25px\",\r\n+                  backgroundColor: \"#f8f9fa\",\r\n+                  borderRadius: \"8px\",\r\n+                  border: \"1px solid #e0e0e0\",\r\n+                }}\r\n+              >\r\n+                <Typography\r\n+                  variant=\"h6\"\r\n+                  sx={{\r\n+                    fontWeight: \"600\",\r\n+                    marginBottom: \"15px\",\r\n+                    color: \"#2c3e50\",\r\n+                    borderBottom: \"2px solid #3498db\",\r\n+                    paddingBottom: \"8px\",\r\n+                    display: \"inline-block\",\r\n+                  }}\r\n+                >\r\n+                  Patient Consent\r\n+                </Typography>\r\n \r\n-export default PatientPDF;\r\n+                <Grid container spacing={3}>\r\n+                  <Grid item xs={12} sm={6} md={6}>\r\n+                    <Box\r\n+                      sx={{\r\n+                        padding: \"15px\",\r\n+                        borderRadius: \"6px\",\r\n+                        backgroundColor: \"#ffffff\",\r\n+                        border: \"1px solid #e0e0e0\",\r\n+                        height: \"100%\",\r\n+                      }}\r\n+                    >\r\n+                      <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}>\r\n+                        Consent Details:\r\n+                      </Typography>\r\n+                      <Typography variant=\"body2\" sx={{ color: \"#2c3e50\" }}>\r\n+                        {form?.patient_consent?.details || \"No Patient Consent Details Available\"}\r\n+                      </Typography>\r\n+                    </Box>\r\n+                  </Grid>\r\n+\r\n+                  <Grid item xs={12} sm={6} md={6}>\r\n+                    <Box\r\n+                      sx={{\r\n+                        padding: \"15px\",\r\n+                        borderRadius: \"6px\",\r\n+                        backgroundColor: \"#ffffff\",\r\n+                        border: \"1px solid #e0e0e0\",\r\n+                      }}\r\n+                    >\r\n+                      <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}>\r\n+                        Patient Signature:\r\n+                      </Typography>\r\n+                      {imagesBase64?.patientConsent?.[0] ? (\r\n+                        <Box\r\n+                          sx={{\r\n+                            display: \"flex\",\r\n+                            justifyContent: \"center\",\r\n+                            border: \"1px solid #e0e0e0\",\r\n+                            borderRadius: \"6px\",\r\n+                            padding: \"10px\",\r\n+                            backgroundColor: \"#f9f9f9\",\r\n+                          }}\r\n+                        >\r\n+                          <img\r\n+                            src={imagesBase64.patientConsent[0] || \"/placeholder.svg\"}\r\n+                            alt=\"Patient Consent Signature\"\r\n+                            style={{\r\n+                              width: \"200px\",\r\n+                              borderRadius: \"6px\",\r\n+                            }}\r\n+                          />\r\n+                        </Box>\r\n+                      ) : (\r\n+                        <Typography\r\n+                          sx={{ color: \"#7f8c8d\", fontStyle: \"italic\", textAlign: \"center\", padding: \"20px\" }}\r\n+                        >\r\n+                          No signature available\r\n+                        </Typography>\r\n+                      )}\r\n+                    </Box>\r\n+                  </Grid>\r\n+                </Grid>\r\n+              </Paper>\r\n+\r\n+              {/* Side Effects */}\r\n+              <Paper\r\n+                elevation={0}\r\n+                sx={{\r\n+                  padding: \"20px\",\r\n+                  backgroundColor: \"#f8f9fa\",\r\n+                  borderRadius: \"8px\",\r\n+                  border: \"1px solid #e0e0e0\",\r\n+                }}\r\n+              >\r\n+                <Typography\r\n+                  variant=\"h6\"\r\n+                  sx={{\r\n+                    fontWeight: \"600\",\r\n+                    marginBottom: \"15px\",\r\n+                    color: \"#2c3e50\",\r\n+                    borderBottom: \"2px solid #3498db\",\r\n+                    paddingBottom: \"8px\",\r\n+                    display: \"inline-block\",\r\n+                  }}\r\n+                >\r\n+                  Patient Side Effects\r\n+                </Typography>\r\n+\r\n+                <Box\r\n+                  sx={{\r\n+                    padding: \"15px\",\r\n+                    borderRadius: \"6px\",\r\n+                    backgroundColor: \"#ffffff\",\r\n+                    border: \"1px solid #e0e0e0\",\r\n+                  }}\r\n+                >\r\n+                  <Typography variant=\"body2\" sx={{ color: \"#2c3e50\" }}>\r\n+                    {form?.side_effect?.details || \"No Side Effects Reported\"}\r\n+                  </Typography>\r\n+                </Box>\r\n+              </Paper>\r\n+\r\n+              {/* Footer */}\r\n+              <Box\r\n+                sx={{\r\n+                  marginTop: \"30px\",\r\n+                  textAlign: \"center\",\r\n+                  padding: \"15px\",\r\n+                  borderTop: \"1px solid #e0e0e0\",\r\n+                }}\r\n+              >\r\n+                <Typography variant=\"body2\" sx={{ color: \"#7f8c8d\" }}>\r\n+                  This document is confidential and contains private medical information.\r\n+                </Typography>\r\n+                <Typography variant=\"body2\" sx={{ color: \"#7f8c8d\", marginTop: \"5px\" }}>\r\n+                  Generated on: {new Date().toLocaleDateString()}\r\n+                </Typography>\r\n+              </Box>\r\n+            </Box>\r\n+          </CardContent>\r\n+        </Card>\r\n+      </PDFExport>\r\n+    </div>\r\n+  )\r\n+}\r\n+\r\n+export default PatientPDF\n\\ No newline at end of file\n"
                },
                {
                    "date": 1743683199782,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -702,9 +702,9 @@\n                 </Typography>\r\n \r\n                 <Grid container spacing={3}>\r\n                   {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                    <React.Fragment key={treatment-${index}}>\r\n+                    < key={treatment-${index}}>\r\n                       {/* Date Grid Item */}\r\n                       <Grid item xs={12} sm={6} md={6}>\r\n                         <Box\r\n                           sx={{\r\n@@ -761,9 +761,9 @@\n                             />\r\n                           </Box>\r\n                         </Box>\r\n                       </Grid>\r\n-                    </React.Fragment>\r\n+                    </>\r\n                   ))}\r\n \r\n                   {(!imagesBase64?.furtherTreatment || imagesBase64.furtherTreatment.length === 0) && (\r\n                     <Grid item xs={12}>\r\n"
                },
                {
                    "date": 1743683213413,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -702,9 +702,9 @@\n                 </Typography>\r\n \r\n                 <Grid container spacing={3}>\r\n                   {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                    < key={treatment-${index}}>\r\n+                    <React.Fragment key={treatment-${index}}>\r\n                       {/* Date Grid Item */}\r\n                       <Grid item xs={12} sm={6} md={6}>\r\n                         <Box\r\n                           sx={{\r\n@@ -761,9 +761,9 @@\n                             />\r\n                           </Box>\r\n                         </Box>\r\n                       </Grid>\r\n-                    </>\r\n+                    </React.Fragment>\r\n                   ))}\r\n \r\n                   {(!imagesBase64?.furtherTreatment || imagesBase64.furtherTreatment.length === 0) && (\r\n                     <Grid item xs={12}>\r\n"
                },
                {
                    "date": 1743683226279,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -702,9 +702,9 @@\n                 </Typography>\r\n \r\n                 <Grid container spacing={3}>\r\n                   {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                    <React.Fragment key={treatment-${index}}>\r\n+                    <Fragment key={treatment-${index}}>\r\n                       {/* Date Grid Item */}\r\n                       <Grid item xs={12} sm={6} md={6}>\r\n                         <Box\r\n                           sx={{\r\n@@ -761,9 +761,9 @@\n                             />\r\n                           </Box>\r\n                         </Box>\r\n                       </Grid>\r\n-                    </React.Fragment>\r\n+                    </Fragment>\r\n                   ))}\r\n \r\n                   {(!imagesBase64?.furtherTreatment || imagesBase64.furtherTreatment.length === 0) && (\r\n                     <Grid item xs={12}>\r\n"
                },
                {
                    "date": 1743683241789,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-import React, { useRef, useEffect, useState } from \"react\"\r\n+import React, { useRef, useEffect, useState, Fragment } from \"react\"\r\n import { PDFExport } from \"@progress/kendo-react-pdf\"\r\n import {\r\n   Button,\r\n   Card,\r\n@@ -702,9 +702,9 @@\n                 </Typography>\r\n \r\n                 <Grid container spacing={3}>\r\n                   {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                    <Fragment key={treatment-${index}}>\r\n+                    <Fragment key={{index}>\r\n                       {/* Date Grid Item */}\r\n                       <Grid item xs={12} sm={6} md={6}>\r\n                         <Box\r\n                           sx={{\r\n"
                },
                {
                    "date": 1743683339238,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-import React, { useRef, useEffect, useState, Fragment } from \"react\"\r\n+import React, { useRef, useEffect, useState } from \"react\"\r\n import { PDFExport } from \"@progress/kendo-react-pdf\"\r\n import {\r\n   Button,\r\n   Card,\r\n@@ -702,9 +702,9 @@\n                 </Typography>\r\n \r\n                 <Grid container spacing={3}>\r\n                   {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                    <Fragment key={{index}>\r\n+                    <React.Fragment key={treatment-${index}}>\r\n                       {/* Date Grid Item */}\r\n                       <Grid item xs={12} sm={6} md={6}>\r\n                         <Box\r\n                           sx={{\r\n@@ -761,9 +761,9 @@\n                             />\r\n                           </Box>\r\n                         </Box>\r\n                       </Grid>\r\n-                    </Fragment>\r\n+                    </React.Fragment>\r\n                   ))}\r\n \r\n                   {(!imagesBase64?.furtherTreatment || imagesBase64.furtherTreatment.length === 0) && (\r\n                     <Grid item xs={12}>\r\n"
                },
                {
                    "date": 1743683387812,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -504,9 +504,8 @@\n                         }}\r\n                       >\r\n                         <img\r\n                           src={img || \"/placeholder.svg\"}\r\n-                          alt={Batch ${index + 1}}\r\n                           style={{\r\n                             width: \"100px\",\r\n                             height: \"100px\",\r\n                             objectFit: \"cover\",\r\n"
                },
                {
                    "date": 1743683421899,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -595,9 +595,9 @@\n                         }}\r\n                       >\r\n                         <img\r\n                           src={img || \"/placeholder.svg\"}\r\n-                          alt={After ${index + 1}}\r\n+                          alt={`After ${index + 1}`}\r\n                           style={{\r\n                             width: \"100px\",\r\n                             height: \"100px\",\r\n                             objectFit: \"cover\",\r\n"
                },
                {
                    "date": 1743683440870,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -549,9 +549,9 @@\n                         }}\r\n                       >\r\n                         <img\r\n                           src={img || \"/placeholder.svg\"}\r\n-                          alt={Before ${index + 1}}\r\n+                          alt={`Before ${index + 1}`}\r\n                           style={{\r\n                             width: \"100px\",\r\n                             height: \"100px\",\r\n                             objectFit: \"cover\",\r\n"
                },
                {
                    "date": 1743683460833,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -701,9 +701,9 @@\n                 </Typography>\r\n \r\n                 <Grid container spacing={3}>\r\n                   {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                    <React.Fragment key={treatment-${index}}>\r\n+                    <React.Fragment key={`treatment-${index}`}>\r\n                       {/* Date Grid Item */}\r\n                       <Grid item xs={12} sm={6} md={6}>\r\n                         <Box\r\n                           sx={{\r\n"
                },
                {
                    "date": 1743683563965,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -106,9 +106,9 @@\n       >\r\n         Download Patient Report\r\n       </Button>\r\n \r\n-      <PDFExport ref={pdfExportComponent} paperSize=\"A4\" margin=\"1cm\">\r\n+      <PDFExport ref={pdfExportComponent} paperSize=\"A4\" margin=\"10px\">\r\n         <Card\r\n           sx={{\r\n             maxWidth: \"800px\",\r\n             margin: \"auto\",\r\n"
                },
                {
                    "date": 1743684033123,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -469,8 +469,9 @@\n                   color: \"#2c3e50\",\r\n                   borderBottom: \"2px solid #3498db\",\r\n                   paddingBottom: \"8px\",\r\n                   display: \"inline-block\",\r\n+                  marginBottom: \"25pc\",\r\n                 }}\r\n               >\r\n                 Medical Images\r\n               </Typography>\r\n"
                },
                {
                    "date": 1743684039123,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -469,9 +469,9 @@\n                   color: \"#2c3e50\",\r\n                   borderBottom: \"2px solid #3498db\",\r\n                   paddingBottom: \"8px\",\r\n                   display: \"inline-block\",\r\n-                  marginBottom: \"25pc\",\r\n+                  marginTop: \"25px\",\r\n                 }}\r\n               >\r\n                 Medical Images\r\n               </Typography>\r\n"
                },
                {
                    "date": 1743684169024,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -506,10 +506,10 @@\n                       >\r\n                         <img\r\n                           src={img || \"/placeholder.svg\"}\r\n                           style={{\r\n-                            width: \"100px\",\r\n-                            height: \"100px\",\r\n+                            width: \"50px\",\r\n+                            height: \"50px\",\r\n                             objectFit: \"cover\",\r\n                             borderRadius: \"4px\",\r\n                           }}\r\n                         />\r\n"
                },
                {
                    "date": 1743684198953,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -506,10 +506,10 @@\n                       >\r\n                         <img\r\n                           src={img || \"/placeholder.svg\"}\r\n                           style={{\r\n-                            width: \"50px\",\r\n-                            height: \"50px\",\r\n+                            width: \"70px\",\r\n+                            height: \"70px\",\r\n                             objectFit: \"cover\",\r\n                             borderRadius: \"4px\",\r\n                           }}\r\n                         />\r\n@@ -552,10 +552,10 @@\n                         <img\r\n                           src={img || \"/placeholder.svg\"}\r\n                           alt={`Before ${index + 1}`}\r\n                           style={{\r\n-                            width: \"100px\",\r\n-                            height: \"100px\",\r\n+                            width: \"70px\",\r\n+                            height: \"70px\",\r\n                             objectFit: \"cover\",\r\n                             borderRadius: \"4px\",\r\n                           }}\r\n                         />\r\n@@ -598,10 +598,10 @@\n                         <img\r\n                           src={img || \"/placeholder.svg\"}\r\n                           alt={`After ${index + 1}`}\r\n                           style={{\r\n-                            width: \"100px\",\r\n-                            height: \"100px\",\r\n+                            width: \"70px\",\r\n+                            height: \"70px\",\r\n                             objectFit: \"cover\",\r\n                             borderRadius: \"4px\",\r\n                           }}\r\n                         />\r\n"
                },
                {
                    "date": 1743684240265,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -354,9 +354,9 @@\n                   </Typography>\r\n                   <Typography\r\n                     sx={{\r\n                       padding: \"10px\",\r\n-                      backgroundColor: \"#ffffff\",\r\n+                      \r\n                       borderRadius: \"6px\",\r\n                       border: \"1px solid #e0e0e0\",\r\n                     }}\r\n                   >\r\n"
                },
                {
                    "date": 1743684247334,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -370,9 +370,9 @@\n                   </Typography>\r\n                   <Typography\r\n                     sx={{\r\n                       padding: \"10px\",\r\n-                      backgroundColor: \"#ffffff\",\r\n+                     \r\n                       borderRadius: \"6px\",\r\n                       border: \"1px solid #e0e0e0\",\r\n                     }}\r\n                   >\r\n@@ -386,9 +386,9 @@\n                   </Typography>\r\n                   <Typography\r\n                     sx={{\r\n                       padding: \"10px\",\r\n-                      backgroundColor: \"#ffffff\",\r\n+                     \r\n                       borderRadius: \"6px\",\r\n                       border: \"1px solid #e0e0e0\",\r\n                     }}\r\n                   >\r\n@@ -402,9 +402,9 @@\n                   </Typography>\r\n                   <Typography\r\n                     sx={{\r\n                       padding: \"10px\",\r\n-                      backgroundColor: \"#ffffff\",\r\n+                     \r\n                       borderRadius: \"6px\",\r\n                       border: \"1px solid #e0e0e0\",\r\n                     }}\r\n                   >\r\n"
                },
                {
                    "date": 1743684486170,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -709,9 +709,9 @@\n                         <Box\r\n                           sx={{\r\n                             padding: \"15px\",\r\n                             borderRadius: \"6px\",\r\n-                            backgroundColor: \"#ffffff\",\r\n+                            \r\n                             border: \"1px solid #e0e0e0\",\r\n                           }}\r\n                         >\r\n                           <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n"
                },
                {
                    "date": 1743684502805,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -710,9 +710,9 @@\n                           sx={{\r\n                             padding: \"15px\",\r\n                             borderRadius: \"6px\",\r\n                             \r\n-                            border: \"1px solid #e0e0e0\",\r\n+                            \r\n                           }}\r\n                         >\r\n                           <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n                             Date:\r\n@@ -747,9 +747,9 @@\n                               justifyContent: \"center\",\r\n                               border: \"1px solid #e0e0e0\",\r\n                               borderRadius: \"6px\",\r\n                               padding: \"10px\",\r\n-                              backgroundColor: \"#f9f9f9\",\r\n+                              backgroundColor: \"#ffffff\",\r\n                             }}\r\n                           >\r\n                             <img\r\n                               src={treatment || \"/placeholder.svg\"}\r\n"
                },
                {
                    "date": 1743684553469,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -730,10 +730,9 @@\n                         <Box\r\n                           sx={{\r\n                             padding: \"15px\",\r\n                             borderRadius: \"6px\",\r\n-                            backgroundColor: \"#ffffff\",\r\n-                            border: \"1px solid #e0e0e0\",\r\n+                            \r\n                           }}\r\n                         >\r\n                           <Typography\r\n                             variant=\"body1\"\r\n"
                },
                {
                    "date": 1743684566439,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -779,11 +779,11 @@\n                 elevation={0}\r\n                 sx={{\r\n                   padding: \"20px\",\r\n                   marginBottom: \"25px\",\r\n-                  backgroundColor: \"#f8f9fa\",\r\n+                \r\n                   borderRadius: \"8px\",\r\n-                  border: \"1px solid #e0e0e0\",\r\n+          \r\n                 }}\r\n               >\r\n                 <Typography\r\n                   variant=\"h6\"\r\n"
                },
                {
                    "date": 1743684576178,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -838,9 +838,9 @@\n                             justifyContent: \"center\",\r\n                             border: \"1px solid #e0e0e0\",\r\n                             borderRadius: \"6px\",\r\n                             padding: \"10px\",\r\n-                            backgroundColor: \"#f9f9f9\",\r\n+                            backgroundColor: \"#ffffff\",\r\n                           }}\r\n                         >\r\n                           <img\r\n                             src={imagesBase64.patientConsent[0] || \"/placeholder.svg\"}\r\n"
                },
                {
                    "date": 1743684711188,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -835,9 +835,9 @@\n                         <Box\r\n                           sx={{\r\n                             display: \"flex\",\r\n                             justifyContent: \"center\",\r\n-                            border: \"1px solid #e0e0e0\",\r\n+                            \r\n                             borderRadius: \"6px\",\r\n                             padding: \"10px\",\r\n                             backgroundColor: \"#ffffff\",\r\n                           }}\r\n"
                },
                {
                    "date": 1743684730165,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -805,9 +805,9 @@\n                       sx={{\r\n                         padding: \"15px\",\r\n                         borderRadius: \"6px\",\r\n                         backgroundColor: \"#ffffff\",\r\n-                        border: \"1px solid #e0e0e0\",\r\n+               \r\n                         height: \"100%\",\r\n                       }}\r\n                     >\r\n                       <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}>\r\n@@ -824,9 +824,9 @@\n                       sx={{\r\n                         padding: \"15px\",\r\n                         borderRadius: \"6px\",\r\n                         backgroundColor: \"#ffffff\",\r\n-                        border: \"1px solid #e0e0e0\",\r\n+                \r\n                       }}\r\n                     >\r\n                       <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}>\r\n                         Patient Signature:\r\n@@ -835,9 +835,9 @@\n                         <Box\r\n                           sx={{\r\n                             display: \"flex\",\r\n                             justifyContent: \"center\",\r\n-                            \r\n+                            border: \"1px solid #e0e0e0\",\r\n                             borderRadius: \"6px\",\r\n                             padding: \"10px\",\r\n                             backgroundColor: \"#ffffff\",\r\n                           }}\r\n"
                },
                {
                    "date": 1743684777890,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -779,10 +779,12 @@\n                 elevation={0}\r\n                 sx={{\r\n                   padding: \"20px\",\r\n                   marginBottom: \"25px\",\r\n-                \r\n+                  backgroundColor: \"#f8f9fa\",\r\n                   borderRadius: \"8px\",\r\n+                  border: \"1px solid #e0e0e0\",\r\n+                  borderRadius: \"8px\",\r\n           \r\n                 }}\r\n               >\r\n                 <Typography\r\n"
                },
                {
                    "date": 1743684804742,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -782,9 +782,9 @@\n                   marginBottom: \"25px\",\r\n                   backgroundColor: \"#f8f9fa\",\r\n                   borderRadius: \"8px\",\r\n                   border: \"1px solid #e0e0e0\",\r\n-                  borderRadius: \"8px\",\r\n+               \r\n           \r\n                 }}\r\n               >\r\n                 <Typography\r\n@@ -806,9 +806,9 @@\n                     <Box\r\n                       sx={{\r\n                         padding: \"15px\",\r\n                         borderRadius: \"6px\",\r\n-                        backgroundColor: \"#ffffff\",\r\n+                    \r\n                \r\n                         height: \"100%\",\r\n                       }}\r\n                     >\r\n"
                },
                {
                    "date": 1743684815974,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -808,9 +808,8 @@\n                         padding: \"15px\",\r\n                         borderRadius: \"6px\",\r\n                     \r\n                \r\n-                        height: \"100%\",\r\n                       }}\r\n                     >\r\n                       <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}>\r\n                         Consent Details:\r\n@@ -825,9 +824,9 @@\n                     <Box\r\n                       sx={{\r\n                         padding: \"15px\",\r\n                         borderRadius: \"6px\",\r\n-                        backgroundColor: \"#ffffff\",\r\n+                  \r\n                 \r\n                       }}\r\n                     >\r\n                       <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}>\r\n"
                },
                {
                    "date": 1743684919625,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -485,9 +485,9 @@\n                   sx={{\r\n                     display: \"flex\",\r\n                     gap: \"15px\",\r\n                     flexWrap: \"wrap\",\r\n-                    backgroundColor: \"#ffffff\",\r\n+                    \r\n                     padding: \"15px\",\r\n                     borderRadius: \"6px\",\r\n                     border: \"1px solid #e0e0e0\",\r\n                   }}\r\n"
                },
                {
                    "date": 1743684936410,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -530,9 +530,9 @@\n                   sx={{\r\n                     display: \"flex\",\r\n                     gap: \"15px\",\r\n                     flexWrap: \"wrap\",\r\n-                    backgroundColor: \"#ffffff\",\r\n+                \r\n                     padding: \"15px\",\r\n                     borderRadius: \"6px\",\r\n                     border: \"1px solid #e0e0e0\",\r\n                   }}\r\n@@ -544,9 +544,9 @@\n                         sx={{\r\n                           border: \"1px solid #e0e0e0\",\r\n                           borderRadius: \"6px\",\r\n                           padding: \"5px\",\r\n-                          backgroundColor: \"#ffffff\",\r\n+                      \r\n                           boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n                         }}\r\n                       >\r\n                         <img\r\n"
                },
                {
                    "date": 1743684946443,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -530,9 +530,9 @@\n                   sx={{\r\n                     display: \"flex\",\r\n                     gap: \"15px\",\r\n                     flexWrap: \"wrap\",\r\n-                \r\n+                  \r\n                     padding: \"15px\",\r\n                     borderRadius: \"6px\",\r\n                     border: \"1px solid #e0e0e0\",\r\n                   }}\r\n@@ -544,9 +544,9 @@\n                         sx={{\r\n                           border: \"1px solid #e0e0e0\",\r\n                           borderRadius: \"6px\",\r\n                           padding: \"5px\",\r\n-                      \r\n+                          backgroundColor: \"#ffffff\",\r\n                           boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n                         }}\r\n                       >\r\n                         <img\r\n"
                },
                {
                    "date": 1743685701493,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -452,8 +452,9 @@\n \r\n             {/* Images Section */}\r\n             <Paper\r\n               elevation={0}\r\n+              className=\"kendoPaper\"\r\n               sx={{\r\n                 padding: \"20px\",\r\n                 marginBottom: \"25px\",\r\n                 backgroundColor: \"#f8f9fa\",\r\n@@ -576,9 +577,9 @@\n                   sx={{\r\n                     display: \"flex\",\r\n                     gap: \"15px\",\r\n                     flexWrap: \"wrap\",\r\n-                    backgroundColor: \"#ffffff\",\r\n+                 \r\n                     padding: \"15px\",\r\n                     borderRadius: \"6px\",\r\n                     border: \"1px solid #e0e0e0\",\r\n                   }}\r\n"
                },
                {
                    "date": 1743685914221,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -470,9 +470,9 @@\n                   color: \"#2c3e50\",\r\n                   borderBottom: \"2px solid #3498db\",\r\n                   paddingBottom: \"8px\",\r\n                   display: \"inline-block\",\r\n-                  marginTop: \"25px\",\r\n+                \r\n                 }}\r\n               >\r\n                 Medical Images\r\n               </Typography>\r\n"
                },
                {
                    "date": 1743685943391,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -477,9 +477,9 @@\n                 Medical Images\r\n               </Typography>\r\n \r\n               {/* Batch Images */}\r\n-              <Box sx={{ marginBottom: \"20px\" }}>\r\n+              <Box sx={{ marginBottom: \"px\" }}>\r\n                 <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n                   Batch Images:\r\n                 </Typography>\r\n                 <Box\r\n"
                },
                {
                    "date": 1743685968364,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -477,9 +477,9 @@\n                 Medical Images\r\n               </Typography>\r\n \r\n               {/* Batch Images */}\r\n-              <Box sx={{ marginBottom: \"px\" }}>\r\n+              <Box >\r\n                 <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n                   Batch Images:\r\n                 </Typography>\r\n                 <Box\r\n"
                },
                {
                    "date": 1743685974734,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -465,9 +465,9 @@\n               <Typography\r\n                 variant=\"h6\"\r\n                 sx={{\r\n                   fontWeight: \"600\",\r\n-                  marginBottom: \"15px\",\r\n+         \r\n                   color: \"#2c3e50\",\r\n                   borderBottom: \"2px solid #3498db\",\r\n                   paddingBottom: \"8px\",\r\n                   display: \"inline-block\",\r\n"
                },
                {
                    "date": 1743686089725,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -461,22 +461,9 @@\n                 borderRadius: \"8px\",\r\n                 border: \"1px solid #e0e0e0\",\r\n               }}\r\n             >\r\n-              <Typography\r\n-                variant=\"h6\"\r\n-                sx={{\r\n-                  fontWeight: \"600\",\r\n-         \r\n-                  color: \"#2c3e50\",\r\n-                  borderBottom: \"2px solid #3498db\",\r\n-                  paddingBottom: \"8px\",\r\n-                  display: \"inline-block\",\r\n-                \r\n-                }}\r\n-              >\r\n-                Medical Images\r\n-              </Typography>\r\n+              \r\n \r\n               {/* Batch Images */}\r\n               <Box >\r\n                 <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n"
                },
                {
                    "date": 1743686200424,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -455,9 +455,9 @@\n               elevation={0}\r\n               className=\"kendoPaper\"\r\n               sx={{\r\n                 padding: \"20px\",\r\n-                marginBottom: \"25px\",\r\n+               \r\n                 backgroundColor: \"#f8f9fa\",\r\n                 borderRadius: \"8px\",\r\n                 border: \"1px solid #e0e0e0\",\r\n               }}\r\n"
                },
                {
                    "date": 1743686218599,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -455,15 +455,28 @@\n               elevation={0}\r\n               className=\"kendoPaper\"\r\n               sx={{\r\n                 padding: \"20px\",\r\n-               \r\n+                marginBottom: \"25px\",\r\n                 backgroundColor: \"#f8f9fa\",\r\n                 borderRadius: \"8px\",\r\n                 border: \"1px solid #e0e0e0\",\r\n               }}\r\n             >\r\n-              \r\n+              <Typography\r\n+                variant=\"h6\"\r\n+                sx={{\r\n+                  fontWeight: \"600\",\r\n+         \r\n+                  color: \"#2c3e50\",\r\n+                  borderBottom: \"2px solid #3498db\",\r\n+                  paddingBottom: \"8px\",\r\n+                  display: \"inline-block\",\r\n+                \r\n+                }}\r\n+              >\r\n+                Medical Images\r\n+              </Typography>\r\n \r\n               {/* Batch Images */}\r\n               <Box >\r\n                 <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n"
                },
                {
                    "date": 1743686226104,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -465,21 +465,21 @@\n               <Typography\r\n                 variant=\"h6\"\r\n                 sx={{\r\n                   fontWeight: \"600\",\r\n-         \r\n+                  marginBottom: \"15px\",\r\n                   color: \"#2c3e50\",\r\n                   borderBottom: \"2px solid #3498db\",\r\n                   paddingBottom: \"8px\",\r\n                   display: \"inline-block\",\r\n-                \r\n+                  marginTop: \"25px\",\r\n                 }}\r\n               >\r\n                 Medical Images\r\n               </Typography>\r\n \r\n               {/* Batch Images */}\r\n-              <Box >\r\n+              <Box sx={{ marginBottom: \"20px\" }}>\r\n                 <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n                   Batch Images:\r\n                 </Typography>\r\n                 <Box\r\n"
                },
                {
                    "date": 1743686390067,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -324,8 +324,9 @@\n \r\n             {/* Treatment Plan */}\r\n             <Paper\r\n               elevation={0}\r\n+              className=\"kendoPaper2\"\r\n               sx={{\r\n                 padding: \"20px\",\r\n                 marginBottom: \"25px\",\r\n                 backgroundColor: \"#f8f9fa\",\r\n"
                },
                {
                    "date": 1743757985762,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,934 @@\n+import React, { useRef, useEffect, useState } from \"react\"\r\n+import { PDFExport } from \"@progress/kendo-react-pdf\"\r\n+import {\r\n+    Button,\r\n+    Card,\r\n+    CardContent,\r\n+    Typography,\r\n+    Grid,\r\n+    Table,\r\n+    TableBody,\r\n+    TableCell,\r\n+    TableContainer,\r\n+    TableHead,\r\n+    TableRow,\r\n+    Box,\r\n+    Paper,\r\n+} from \"@mui/material\"\r\n+\r\n+// Function to convert image URL to Base64\r\n+const toBase64 = (url) => {\r\n+    return new Promise((resolve, reject) => {\r\n+        const proxyUrl = \"https://corsproxy.io/?url=\"\r\n+        const imgUrl = proxyUrl + encodeURIComponent(url)\r\n+\r\n+        const img = new Image()\r\n+        img.crossOrigin = \"Anonymous\"\r\n+        img.onload = () => {\r\n+            const canvas = document.createElement(\"canvas\")\r\n+            canvas.width = img.width\r\n+            canvas.height = img.height\r\n+            const ctx = canvas.getContext(\"2d\")\r\n+            ctx.drawImage(img, 0, 0)\r\n+            resolve(canvas.toDataURL())\r\n+        }\r\n+        img.onerror = reject\r\n+        img.src = imgUrl\r\n+    })\r\n+}\r\n+\r\n+const PatientPDF = ({ form }) => {\r\n+    const pdfExportComponent = useRef(null)\r\n+    const [imagesBase64, setImagesBase64] = useState({})\r\n+\r\n+    useEffect(() => {\r\n+        const fetchImagesAsBase64 = async () => {\r\n+            try {\r\n+                const imageUrls = {\r\n+                    batch: form?.batch_images || [],\r\n+                    before: form?.before_images || [],\r\n+                    after: form?.after_images || [],\r\n+                    patientSign: form?.treatment_plan?.patient_sign ? [form.treatment_plan.patient_sign] : [],\r\n+                    furtherTreatment: form?.further_treatment?.map((treatment) => treatment?.sign) || [],\r\n+                    patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n+                }\r\n+\r\n+                // Convert each image URL to Base64\r\n+                const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n+                    const urls = imageUrls[key]\r\n+                    const base64Images = await Promise.all(urls.map((url) => toBase64(url)))\r\n+                    return { [key]: base64Images }\r\n+                })\r\n+\r\n+                // Set all images as Base64 in the state\r\n+                const base64Data = await Promise.all(imagePromises)\r\n+                const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {})\r\n+                setImagesBase64(allImages)\r\n+            } catch (error) {\r\n+                console.error(\"Error converting images to base64:\", error)\r\n+            }\r\n+        }\r\n+\r\n+        fetchImagesAsBase64()\r\n+    }, [form])\r\n+\r\n+    const handleExportWithComponent = () => {\r\n+        if (pdfExportComponent.current) {\r\n+            pdfExportComponent.current.save()\r\n+        }\r\n+    }\r\n+\r\n+    // Format date function\r\n+    const formatDate = (dateString) => {\r\n+        if (!dateString) return \"N/A\"\r\n+        return new Date(dateString).toLocaleDateString(\"en-US\", {\r\n+            year: \"numeric\",\r\n+            month: \"long\",\r\n+            day: \"numeric\",\r\n+        })\r\n+    }\r\n+\r\n+    return (\r\n+        <div>\r\n+            <Button\r\n+                variant=\"contained\"\r\n+                color=\"primary\"\r\n+                onClick={handleExportWithComponent}\r\n+                sx={{\r\n+                    marginBottom: \"20px\",\r\n+                    padding: \"10px 24px\",\r\n+                    fontSize: \"16px\",\r\n+                    fontWeight: \"bold\",\r\n+                    borderRadius: \"8px\",\r\n+                    boxShadow: \"0 4px 6px rgba(0,0,0,0.1)\",\r\n+                    textTransform: \"none\",\r\n+                }}\r\n+            >\r\n+                Download Patient Report\r\n+            </Button>\r\n+            <Box sx={{display:'none'}}>\r\n+\r\n+\r\n+                <PDFExport ref={pdfExportComponent} paperSize=\"A4\" margin=\"10px\">\r\n+                    <Card\r\n+                        sx={{\r\n+                            maxWidth: \"800px\",\r\n+                            margin: \"auto\",\r\n+                            backgroundColor: \"#ffffff\",\r\n+                            borderRadius: \"12px\",\r\n+                            boxShadow: \"0 4px 20px rgba(0,0,0,0.08)\",\r\n+                        }}\r\n+                    >\r\n+                        <CardContent sx={{ padding: \"30px\" }}>\r\n+                            {/* Header */}\r\n+                            <Box\r\n+                                sx={{\r\n+                                    textAlign: \"center\",\r\n+                                    marginBottom: \"20px\",\r\n+                                    backgroundColor: \"#f8f9fa\",\r\n+                                    padding: \"20px\",\r\n+                                    borderRadius: \"8px\",\r\n+                                }}\r\n+                            >\r\n+                                <Typography\r\n+                                    variant=\"h4\"\r\n+                                    sx={{\r\n+                                        fontWeight: \"700\",\r\n+                                        color: \"#2c3e50\",\r\n+                                        marginBottom: \"5px\",\r\n+                                    }}\r\n+                                >\r\n+                                    Patient Medical Report\r\n+                                </Typography>\r\n+                                <Typography variant=\"subtitle1\" sx={{ color: \"#5d6778\" }}>\r\n+                                    Confidential Medical Documentation\r\n+                                </Typography>\r\n+                            </Box>\r\n+\r\n+                            {/* Patient Information Section */}\r\n+                            <Paper\r\n+                                elevation={0}\r\n+                                sx={{\r\n+                                    padding: \"20px\",\r\n+                                    marginBottom: \"25px\",\r\n+                                    backgroundColor: \"#f8f9fa\",\r\n+                                    borderRadius: \"8px\",\r\n+                                    border: \"1px solid #e0e0e0\",\r\n+                                }}\r\n+                            >\r\n+                                <Typography\r\n+                                    variant=\"h6\"\r\n+                                    sx={{\r\n+                                        fontWeight: \"600\",\r\n+                                        marginBottom: \"15px\",\r\n+                                        color: \"#2c3e50\",\r\n+                                        borderBottom: \"2px solid #3498db\",\r\n+                                        paddingBottom: \"8px\",\r\n+                                        display: \"inline-block\",\r\n+                                    }}\r\n+                                >\r\n+                                    Patient Information\r\n+                                </Typography>\r\n+\r\n+                                <Grid container spacing={3}>\r\n+                                    <Grid item xs={6}>\r\n+                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                            Name:{\" \"}\r\n+                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                                                {form?.first_name} {form?.last_name}\r\n+                                            </span>\r\n+                                        </Typography>\r\n+                                    </Grid>\r\n+                                    <Grid item xs={6}>\r\n+                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                            DOB: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{formatDate(form?.dob)}</span>\r\n+                                        </Typography>\r\n+                                    </Grid>\r\n+                                    <Grid item xs={6}>\r\n+                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                            Phone: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.phone}</span>\r\n+                                        </Typography>\r\n+                                    </Grid>\r\n+                                    <Grid item xs={6}>\r\n+                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                            Email: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.email}</span>\r\n+                                        </Typography>\r\n+                                    </Grid>\r\n+                                    <Grid item xs={12}>\r\n+                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                            Address:{\" \"}\r\n+                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                                                {form?.address}, {form?.post_code}\r\n+                                            </span>\r\n+                                        </Typography>\r\n+                                    </Grid>\r\n+                                    <Grid item xs={12}>\r\n+                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                            Notes: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.notes || \"None\"}</span>\r\n+                                        </Typography>\r\n+                                    </Grid>\r\n+                                </Grid>\r\n+                            </Paper>\r\n+\r\n+                            {/* Next of Kin Information */}\r\n+                            <Paper\r\n+                                elevation={0}\r\n+                                sx={{\r\n+                                    padding: \"20px\",\r\n+                                    marginBottom: \"25px\",\r\n+                                    backgroundColor: \"#f8f9fa\",\r\n+                                    borderRadius: \"8px\",\r\n+                                    border: \"1px solid #e0e0e0\",\r\n+                                }}\r\n+                            >\r\n+                                <Typography\r\n+                                    variant=\"h6\"\r\n+                                    sx={{\r\n+                                        fontWeight: \"600\",\r\n+                                        marginBottom: \"15px\",\r\n+                                        color: \"#2c3e50\",\r\n+                                        borderBottom: \"2px solid #3498db\",\r\n+                                        paddingBottom: \"8px\",\r\n+                                        display: \"inline-block\",\r\n+                                    }}\r\n+                                >\r\n+                                    Next of Kin\r\n+                                </Typography>\r\n+\r\n+                                <Grid container spacing={3}>\r\n+                                    <Grid item xs={6}>\r\n+                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                            Name:{\" \"}\r\n+                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.name || \"N/A\"}</span>\r\n+                                        </Typography>\r\n+                                    </Grid>\r\n+                                    <Grid item xs={6}>\r\n+                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                            Phone:{\" \"}\r\n+                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.phone || \"N/A\"}</span>\r\n+                                        </Typography>\r\n+                                    </Grid>\r\n+                                    <Grid item xs={6}>\r\n+                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                            Address:{\" \"}\r\n+                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.address || \"N/A\"}</span>\r\n+                                        </Typography>\r\n+                                    </Grid>\r\n+                                    <Grid item xs={6}>\r\n+                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                            Email:{\" \"}\r\n+                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.email || \"N/A\"}</span>\r\n+                                        </Typography>\r\n+                                    </Grid>\r\n+                                </Grid>\r\n+                            </Paper>\r\n+\r\n+                            {/* General Practitioners */}\r\n+                            <Paper\r\n+                                elevation={0}\r\n+                                sx={{\r\n+                                    padding: \"20px\",\r\n+                                    marginBottom: \"25px\",\r\n+                                    backgroundColor: \"#f8f9fa\",\r\n+                                    borderRadius: \"8px\",\r\n+                                    border: \"1px solid #e0e0e0\",\r\n+                                }}\r\n+                            >\r\n+                                <Typography\r\n+                                    variant=\"h6\"\r\n+                                    sx={{\r\n+                                        fontWeight: \"600\",\r\n+                                        marginBottom: \"15px\",\r\n+                                        color: \"#2c3e50\",\r\n+                                        borderBottom: \"2px solid #3498db\",\r\n+                                        paddingBottom: \"8px\",\r\n+                                        display: \"inline-block\",\r\n+                                    }}\r\n+                                >\r\n+                                    General Practitioners\r\n+                                </Typography>\r\n+\r\n+                                <Grid container spacing={3}>\r\n+                                    <Grid item xs={6}>\r\n+                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                            Name:{\" \"}\r\n+                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                                                {form?.general_practitioner?.name || \"N/A\"}\r\n+                                            </span>\r\n+                                        </Typography>\r\n+                                    </Grid>\r\n+                                    <Grid item xs={6}>\r\n+                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                            Phone:{\" \"}\r\n+                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                                                {form?.general_practitioner?.phone || \"N/A\"}\r\n+                                            </span>\r\n+                                        </Typography>\r\n+                                    </Grid>\r\n+                                    <Grid item xs={6}>\r\n+                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                            Address:{\" \"}\r\n+                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                                                {form?.general_practitioner?.address || \"N/A\"}\r\n+                                            </span>\r\n+                                        </Typography>\r\n+                                    </Grid>\r\n+                                    <Grid item xs={6}>\r\n+                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                            Email:{\" \"}\r\n+                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                                                {form?.general_practitioner?.email || \"N/A\"}\r\n+                                            </span>\r\n+                                        </Typography>\r\n+                                    </Grid>\r\n+                                </Grid>\r\n+                            </Paper>\r\n+\r\n+                            {/* Treatment Plan */}\r\n+                            <Paper\r\n+                                elevation={0}\r\n+                                className=\"kendoPaper2\"\r\n+                                sx={{\r\n+                                    padding: \"20px\",\r\n+                                    marginBottom: \"25px\",\r\n+                                    backgroundColor: \"#f8f9fa\",\r\n+                                    borderRadius: \"8px\",\r\n+                                    border: \"1px solid #e0e0e0\",\r\n+                                }}\r\n+                            >\r\n+                                <Typography\r\n+                                    variant=\"h6\"\r\n+                                    sx={{\r\n+                                        fontWeight: \"600\",\r\n+                                        marginBottom: \"15px\",\r\n+                                        color: \"#2c3e50\",\r\n+                                        borderBottom: \"2px solid #3498db\",\r\n+                                        paddingBottom: \"8px\",\r\n+                                        display: \"inline-block\",\r\n+                                    }}\r\n+                                >\r\n+                                    Treatment Plan\r\n+                                </Typography>\r\n+\r\n+                                <Grid container spacing={3}>\r\n+                                    <Grid item xs={12}>\r\n+                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n+                                            Patient Concerns:\r\n+                                        </Typography>\r\n+                                        <Typography\r\n+                                            sx={{\r\n+                                                padding: \"10px\",\r\n+\r\n+                                                borderRadius: \"6px\",\r\n+                                                border: \"1px solid #e0e0e0\",\r\n+                                            }}\r\n+                                        >\r\n+                                            {form?.treatment_plan?.patient_concerns || \"None specified\"}\r\n+                                        </Typography>\r\n+                                    </Grid>\r\n+\r\n+                                    <Grid item xs={12}>\r\n+                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n+                                            Patient Goals:\r\n+                                        </Typography>\r\n+                                        <Typography\r\n+                                            sx={{\r\n+                                                padding: \"10px\",\r\n+\r\n+                                                borderRadius: \"6px\",\r\n+                                                border: \"1px solid #e0e0e0\",\r\n+                                            }}\r\n+                                        >\r\n+                                            {form?.treatment_plan?.patient_goals || \"None specified\"}\r\n+                                        </Typography>\r\n+                                    </Grid>\r\n+\r\n+                                    <Grid item xs={12}>\r\n+                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n+                                            Advised Plan:\r\n+                                        </Typography>\r\n+                                        <Typography\r\n+                                            sx={{\r\n+                                                padding: \"10px\",\r\n+\r\n+                                                borderRadius: \"6px\",\r\n+                                                border: \"1px solid #e0e0e0\",\r\n+                                            }}\r\n+                                        >\r\n+                                            {form?.treatment_plan?.advised_plan || \"None specified\"}\r\n+                                        </Typography>\r\n+                                    </Grid>\r\n+\r\n+                                    <Grid item xs={12}>\r\n+                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n+                                            Expected Result:\r\n+                                        </Typography>\r\n+                                        <Typography\r\n+                                            sx={{\r\n+                                                padding: \"10px\",\r\n+\r\n+                                                borderRadius: \"6px\",\r\n+                                                border: \"1px solid #e0e0e0\",\r\n+                                            }}\r\n+                                        >\r\n+                                            {form?.treatment_plan?.expected_result || \"None specified\"}\r\n+                                        </Typography>\r\n+                                    </Grid>\r\n+\r\n+                                    <Grid item xs={6}>\r\n+                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                            Date:{\" \"}\r\n+                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                                                {formatDate(form?.treatment_plan?.date)}\r\n+                                            </span>\r\n+                                        </Typography>\r\n+                                    </Grid>\r\n+\r\n+                                    <Grid item xs={6}>\r\n+                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n+                                            Patient Signature:\r\n+                                        </Typography>\r\n+                                        {imagesBase64?.patientConsent?.[0] && (\r\n+                                            <Box\r\n+                                                sx={{\r\n+                                                    border: \"1px solid #e0e0e0\",\r\n+                                                    borderRadius: \"6px\",\r\n+                                                    padding: \"10px\",\r\n+                                                    backgroundColor: \"#ffffff\",\r\n+                                                    display: \"flex\",\r\n+                                                    justifyContent: \"center\",\r\n+                                                }}\r\n+                                            >\r\n+                                                <img\r\n+                                                    src={imagesBase64?.patientConsent?.[0] || \"/placeholder.svg\"}\r\n+                                                    alt=\"Treatment Plan Sign\"\r\n+                                                    style={{\r\n+                                                        width: \"200px\",\r\n+                                                        borderRadius: \"6px\",\r\n+                                                    }}\r\n+                                                />\r\n+                                            </Box>\r\n+                                        )}\r\n+                                    </Grid>\r\n+                                </Grid>\r\n+                            </Paper>\r\n+\r\n+                            {/* Images Section */}\r\n+                            <Paper\r\n+                                elevation={0}\r\n+                                className=\"kendoPaper\"\r\n+                                sx={{\r\n+                                    padding: \"20px\",\r\n+                                    marginBottom: \"25px\",\r\n+                                    backgroundColor: \"#f8f9fa\",\r\n+                                    borderRadius: \"8px\",\r\n+                                    border: \"1px solid #e0e0e0\",\r\n+                                }}\r\n+                            >\r\n+                                <Typography\r\n+                                    variant=\"h6\"\r\n+                                    sx={{\r\n+                                        fontWeight: \"600\",\r\n+                                        marginBottom: \"15px\",\r\n+                                        color: \"#2c3e50\",\r\n+                                        borderBottom: \"2px solid #3498db\",\r\n+                                        paddingBottom: \"8px\",\r\n+                                        display: \"inline-block\",\r\n+                                        marginTop: \"25px\",\r\n+                                    }}\r\n+                                >\r\n+                                    Medical Images\r\n+                                </Typography>\r\n+\r\n+                                {/* Batch Images */}\r\n+                                <Box sx={{ marginBottom: \"20px\" }}>\r\n+                                    <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n+                                        Batch Images:\r\n+                                    </Typography>\r\n+                                    <Box\r\n+                                        sx={{\r\n+                                            display: \"flex\",\r\n+                                            gap: \"15px\",\r\n+                                            flexWrap: \"wrap\",\r\n+\r\n+                                            padding: \"15px\",\r\n+                                            borderRadius: \"6px\",\r\n+                                            border: \"1px solid #e0e0e0\",\r\n+                                        }}\r\n+                                    >\r\n+                                        {imagesBase64?.batch?.length > 0 ? (\r\n+                                            imagesBase64.batch.map((img, index) => (\r\n+                                                <Box\r\n+                                                    key={index}\r\n+                                                    sx={{\r\n+                                                        border: \"1px solid #e0e0e0\",\r\n+                                                        borderRadius: \"6px\",\r\n+                                                        padding: \"5px\",\r\n+                                                        backgroundColor: \"#ffffff\",\r\n+                                                        boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n+                                                    }}\r\n+                                                >\r\n+                                                    <img\r\n+                                                        src={img || \"/placeholder.svg\"}\r\n+                                                        style={{\r\n+                                                            width: \"70px\",\r\n+                                                            height: \"70px\",\r\n+                                                            objectFit: \"cover\",\r\n+                                                            borderRadius: \"4px\",\r\n+                                                        }}\r\n+                                                    />\r\n+                                                </Box>\r\n+                                            ))\r\n+                                        ) : (\r\n+                                            <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No batch images available</Typography>\r\n+                                        )}\r\n+                                    </Box>\r\n+                                </Box>\r\n+\r\n+                                {/* Before Images */}\r\n+                                <Box sx={{ marginBottom: \"20px\" }}>\r\n+                                    <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n+                                        Before Treatment:\r\n+                                    </Typography>\r\n+                                    <Box\r\n+                                        sx={{\r\n+                                            display: \"flex\",\r\n+                                            gap: \"15px\",\r\n+                                            flexWrap: \"wrap\",\r\n+\r\n+                                            padding: \"15px\",\r\n+                                            borderRadius: \"6px\",\r\n+                                            border: \"1px solid #e0e0e0\",\r\n+                                        }}\r\n+                                    >\r\n+                                        {imagesBase64?.before?.length > 0 ? (\r\n+                                            imagesBase64.before.map((img, index) => (\r\n+                                                <Box\r\n+                                                    key={index}\r\n+                                                    sx={{\r\n+                                                        border: \"1px solid #e0e0e0\",\r\n+                                                        borderRadius: \"6px\",\r\n+                                                        padding: \"5px\",\r\n+                                                        backgroundColor: \"#ffffff\",\r\n+                                                        boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n+                                                    }}\r\n+                                                >\r\n+                                                    <img\r\n+                                                        src={img || \"/placeholder.svg\"}\r\n+                                                        alt={`Before ${index + 1}`}\r\n+                                                        style={{\r\n+                                                            width: \"70px\",\r\n+                                                            height: \"70px\",\r\n+                                                            objectFit: \"cover\",\r\n+                                                            borderRadius: \"4px\",\r\n+                                                        }}\r\n+                                                    />\r\n+                                                </Box>\r\n+                                            ))\r\n+                                        ) : (\r\n+                                            <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No before images available</Typography>\r\n+                                        )}\r\n+                                    </Box>\r\n+                                </Box>\r\n+\r\n+                                {/* After Images */}\r\n+                                <Box>\r\n+                                    <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n+                                        After Treatment:\r\n+                                    </Typography>\r\n+                                    <Box\r\n+                                        sx={{\r\n+                                            display: \"flex\",\r\n+                                            gap: \"15px\",\r\n+                                            flexWrap: \"wrap\",\r\n+\r\n+                                            padding: \"15px\",\r\n+                                            borderRadius: \"6px\",\r\n+                                            border: \"1px solid #e0e0e0\",\r\n+                                        }}\r\n+                                    >\r\n+                                        {imagesBase64?.after?.length > 0 ? (\r\n+                                            imagesBase64.after.map((img, index) => (\r\n+                                                <Box\r\n+                                                    key={index}\r\n+                                                    sx={{\r\n+                                                        border: \"1px solid #e0e0e0\",\r\n+                                                        borderRadius: \"6px\",\r\n+                                                        padding: \"5px\",\r\n+                                                        backgroundColor: \"#ffffff\",\r\n+                                                        boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n+                                                    }}\r\n+                                                >\r\n+                                                    <img\r\n+                                                        src={img || \"/placeholder.svg\"}\r\n+                                                        alt={`After ${index + 1}`}\r\n+                                                        style={{\r\n+                                                            width: \"70px\",\r\n+                                                            height: \"70px\",\r\n+                                                            objectFit: \"cover\",\r\n+                                                            borderRadius: \"4px\",\r\n+                                                        }}\r\n+                                                    />\r\n+                                                </Box>\r\n+                                            ))\r\n+                                        ) : (\r\n+                                            <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No after images available</Typography>\r\n+                                        )}\r\n+                                    </Box>\r\n+                                </Box>\r\n+                            </Paper>\r\n+\r\n+                            {/* Treatment Records Table - Page Break */}\r\n+                            <Box sx={{ pageBreakBefore: \"always\" }}>\r\n+                                <Paper\r\n+                                    elevation={0}\r\n+                                    sx={{\r\n+                                        padding: \"20px\",\r\n+                                        marginBottom: \"25px\",\r\n+                                        backgroundColor: \"#f8f9fa\",\r\n+                                        borderRadius: \"8px\",\r\n+                                        border: \"1px solid #e0e0e0\",\r\n+                                    }}\r\n+                                >\r\n+                                    <Typography\r\n+                                        variant=\"h6\"\r\n+                                        sx={{\r\n+                                            fontWeight: \"600\",\r\n+                                            marginBottom: \"15px\",\r\n+                                            color: \"#2c3e50\",\r\n+                                            borderBottom: \"2px solid #3498db\",\r\n+                                            paddingBottom: \"8px\",\r\n+                                            display: \"inline-block\",\r\n+                                        }}\r\n+                                    >\r\n+                                        Treatment Records\r\n+                                    </Typography>\r\n+\r\n+                                    <TableContainer component={Paper} elevation={0} sx={{ border: \"1px solid #e0e0e0\" }}>\r\n+                                        <Table>\r\n+                                            <TableHead sx={{ backgroundColor: \"#f1f8ff\" }}>\r\n+                                                <TableRow>\r\n+                                                    <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Date</TableCell>\r\n+                                                    <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Description</TableCell>\r\n+                                                    <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Amount</TableCell>\r\n+                                                </TableRow>\r\n+                                            </TableHead>\r\n+                                            <TableBody>\r\n+                                                {form?.treatment_record?.length > 0 ? (\r\n+                                                    form.treatment_record.map((record, index) => (\r\n+                                                        <TableRow\r\n+                                                            key={index}\r\n+                                                            sx={{\r\n+                                                                \"&:nth-of-type(odd)\": { backgroundColor: \"#f9f9f9\" },\r\n+                                                                \"&:hover\": { backgroundColor: \"#f5f5f5\" },\r\n+                                                            }}\r\n+                                                        >\r\n+                                                            <TableCell>{formatDate(record.date)}</TableCell>\r\n+                                                            <TableCell>{record.description}</TableCell>\r\n+                                                            <TableCell>${record.amount}</TableCell>\r\n+                                                        </TableRow>\r\n+                                                    ))\r\n+                                                ) : (\r\n+                                                    <TableRow>\r\n+                                                        <TableCell colSpan={3} sx={{ textAlign: \"center\", color: \"#7f8c8d\", fontStyle: \"italic\" }}>\r\n+                                                            No treatment records available\r\n+                                                        </TableCell>\r\n+                                                    </TableRow>\r\n+                                                )}\r\n+                                            </TableBody>\r\n+                                        </Table>\r\n+                                    </TableContainer>\r\n+                                </Paper>\r\n+\r\n+                                {/* Further Treatment Section */}\r\n+                                <Paper\r\n+                                    elevation={0}\r\n+                                    sx={{\r\n+                                        padding: \"20px\",\r\n+                                        marginBottom: \"25px\",\r\n+                                        backgroundColor: \"#f8f9fa\",\r\n+                                        borderRadius: \"8px\",\r\n+                                        border: \"1px solid #e0e0e0\",\r\n+                                    }}\r\n+                                >\r\n+                                    <Typography\r\n+                                        variant=\"h6\"\r\n+                                        sx={{\r\n+                                            fontWeight: \"600\",\r\n+                                            marginBottom: \"15px\",\r\n+                                            color: \"#2c3e50\",\r\n+                                            borderBottom: \"2px solid #3498db\",\r\n+                                            paddingBottom: \"8px\",\r\n+                                            display: \"inline-block\",\r\n+                                        }}\r\n+                                    >\r\n+                                        Further Treatment\r\n+                                    </Typography>\r\n+\r\n+                                    <Grid container spacing={3}>\r\n+                                        {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n+                                            <React.Fragment key={`treatment-${index}`}>\r\n+                                                {/* Date Grid Item */}\r\n+                                                <Grid item xs={12} sm={6} md={6}>\r\n+                                                    <Box\r\n+                                                        sx={{\r\n+                                                            padding: \"15px\",\r\n+                                                            borderRadius: \"6px\",\r\n+\r\n+\r\n+                                                        }}\r\n+                                                    >\r\n+                                                        <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                                            Date:\r\n+                                                        </Typography>\r\n+                                                        <Typography variant=\"body2\" sx={{ color: \"#2c3e50\", marginTop: \"5px\" }}>\r\n+                                                            {form?.further_treatment?.[index]?.date\r\n+                                                                ? formatDate(form.further_treatment[index].date)\r\n+                                                                : \"No Date Available\"}\r\n+                                                        </Typography>\r\n+                                                    </Box>\r\n+                                                </Grid>\r\n+\r\n+                                                {/* Signature Grid Item */}\r\n+                                                <Grid item xs={12} sm={6} md={6}>\r\n+                                                    <Box\r\n+                                                        sx={{\r\n+                                                            padding: \"15px\",\r\n+                                                            borderRadius: \"6px\",\r\n+\r\n+                                                        }}\r\n+                                                    >\r\n+                                                        <Typography\r\n+                                                            variant=\"body1\"\r\n+                                                            sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}\r\n+                                                        >\r\n+                                                            Patient Signature:\r\n+                                                        </Typography>\r\n+                                                        <Box\r\n+                                                            sx={{\r\n+                                                                display: \"flex\",\r\n+                                                                justifyContent: \"center\",\r\n+                                                                border: \"1px solid #e0e0e0\",\r\n+                                                                borderRadius: \"6px\",\r\n+                                                                padding: \"10px\",\r\n+                                                                backgroundColor: \"#ffffff\",\r\n+                                                            }}\r\n+                                                        >\r\n+                                                            <img\r\n+                                                                src={treatment || \"/placeholder.svg\"}\r\n+                                                                alt=\"Further Treatment Sign\"\r\n+                                                                style={{\r\n+                                                                    width: \"200px\",\r\n+                                                                    borderRadius: \"6px\",\r\n+                                                                }}\r\n+                                                            />\r\n+                                                        </Box>\r\n+                                                    </Box>\r\n+                                                </Grid>\r\n+                                            </React.Fragment>\r\n+                                        ))}\r\n+\r\n+                                        {(!imagesBase64?.furtherTreatment || imagesBase64.furtherTreatment.length === 0) && (\r\n+                                            <Grid item xs={12}>\r\n+                                                <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\", textAlign: \"center\", padding: \"20px\" }}>\r\n+                                                    No further treatment information available\r\n+                                                </Typography>\r\n+                                            </Grid>\r\n+                                        )}\r\n+                                    </Grid>\r\n+                                </Paper>\r\n+\r\n+                                {/* Patient Consent */}\r\n+                                <Paper\r\n+                                    elevation={0}\r\n+                                    sx={{\r\n+                                        padding: \"20px\",\r\n+                                        marginBottom: \"25px\",\r\n+                                        backgroundColor: \"#f8f9fa\",\r\n+                                        borderRadius: \"8px\",\r\n+                                        border: \"1px solid #e0e0e0\",\r\n+\r\n+\r\n+                                    }}\r\n+                                >\r\n+                                    <Typography\r\n+                                        variant=\"h6\"\r\n+                                        sx={{\r\n+                                            fontWeight: \"600\",\r\n+                                            marginBottom: \"15px\",\r\n+                                            color: \"#2c3e50\",\r\n+                                            borderBottom: \"2px solid #3498db\",\r\n+                                            paddingBottom: \"8px\",\r\n+                                            display: \"inline-block\",\r\n+                                        }}\r\n+                                    >\r\n+                                        Patient Consent\r\n+                                    </Typography>\r\n+\r\n+                                    <Grid container spacing={3}>\r\n+                                        <Grid item xs={12} sm={6} md={6}>\r\n+                                            <Box\r\n+                                                sx={{\r\n+                                                    padding: \"15px\",\r\n+                                                    borderRadius: \"6px\",\r\n+\r\n+\r\n+                                                }}\r\n+                                            >\r\n+                                                <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}>\r\n+                                                    Consent Details:\r\n+                                                </Typography>\r\n+                                                <Typography variant=\"body2\" sx={{ color: \"#2c3e50\" }}>\r\n+                                                    {form?.patient_consent?.details || \"No Patient Consent Details Available\"}\r\n+                                                </Typography>\r\n+                                            </Box>\r\n+                                        </Grid>\r\n+\r\n+                                        <Grid item xs={12} sm={6} md={6}>\r\n+                                            <Box\r\n+                                                sx={{\r\n+                                                    padding: \"15px\",\r\n+                                                    borderRadius: \"6px\",\r\n+\r\n+\r\n+                                                }}\r\n+                                            >\r\n+                                                <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}>\r\n+                                                    Patient Signature:\r\n+                                                </Typography>\r\n+                                                {imagesBase64?.patientConsent?.[0] ? (\r\n+                                                    <Box\r\n+                                                        sx={{\r\n+                                                            display: \"flex\",\r\n+                                                            justifyContent: \"center\",\r\n+                                                            border: \"1px solid #e0e0e0\",\r\n+                                                            borderRadius: \"6px\",\r\n+                                                            padding: \"10px\",\r\n+                                                            backgroundColor: \"#ffffff\",\r\n+                                                        }}\r\n+                                                    >\r\n+                                                        <img\r\n+                                                            src={imagesBase64.patientConsent[0] || \"/placeholder.svg\"}\r\n+                                                            alt=\"Patient Consent Signature\"\r\n+                                                            style={{\r\n+                                                                width: \"200px\",\r\n+                                                                borderRadius: \"6px\",\r\n+                                                            }}\r\n+                                                        />\r\n+                                                    </Box>\r\n+                                                ) : (\r\n+                                                    <Typography\r\n+                                                        sx={{ color: \"#7f8c8d\", fontStyle: \"italic\", textAlign: \"center\", padding: \"20px\" }}\r\n+                                                    >\r\n+                                                        No signature available\r\n+                                                    </Typography>\r\n+                                                )}\r\n+                                            </Box>\r\n+                                        </Grid>\r\n+                                    </Grid>\r\n+                                </Paper>\r\n+\r\n+                                {/* Side Effects */}\r\n+                                <Paper\r\n+                                    elevation={0}\r\n+                                    sx={{\r\n+                                        padding: \"20px\",\r\n+                                        backgroundColor: \"#f8f9fa\",\r\n+                                        borderRadius: \"8px\",\r\n+                                        border: \"1px solid #e0e0e0\",\r\n+                                    }}\r\n+                                >\r\n+                                    <Typography\r\n+                                        variant=\"h6\"\r\n+                                        sx={{\r\n+                                            fontWeight: \"600\",\r\n+                                            marginBottom: \"15px\",\r\n+                                            color: \"#2c3e50\",\r\n+                                            borderBottom: \"2px solid #3498db\",\r\n+                                            paddingBottom: \"8px\",\r\n+                                            display: \"inline-block\",\r\n+                                        }}\r\n+                                    >\r\n+                                        Patient Side Effects\r\n+                                    </Typography>\r\n+\r\n+                                    <Box\r\n+                                        sx={{\r\n+                                            padding: \"15px\",\r\n+                                            borderRadius: \"6px\",\r\n+                                            backgroundColor: \"#ffffff\",\r\n+                                            border: \"1px solid #e0e0e0\",\r\n+                                        }}\r\n+                                    >\r\n+                                        <Typography variant=\"body2\" sx={{ color: \"#2c3e50\" }}>\r\n+                                            {form?.side_effect?.details || \"No Side Effects Reported\"}\r\n+                                        </Typography>\r\n+                                    </Box>\r\n+                                </Paper>\r\n+\r\n+                                {/* Footer */}\r\n+                                <Box\r\n+                                    sx={{\r\n+                                        marginTop: \"30px\",\r\n+                                        textAlign: \"center\",\r\n+                                        padding: \"15px\",\r\n+                                        borderTop: \"1px solid #e0e0e0\",\r\n+                                    }}\r\n+                                >\r\n+                                    <Typography variant=\"body2\" sx={{ color: \"#7f8c8d\" }}>\r\n+                                        This document is confidential and contains private medical information.\r\n+                                    </Typography>\r\n+                                    <Typography variant=\"body2\" sx={{ color: \"#7f8c8d\", marginTop: \"5px\" }}>\r\n+                                        Generated on: {new Date().toLocaleDateString()}\r\n+                                    </Typography>\r\n+                                </Box>\r\n+                            </Box>\r\n+                        </CardContent>\r\n+                    </Card>\r\n+                </PDFExport>\r\n+            </Box>\r\n+        </div>\r\n+    )\r\n+}\r\n+\r\n+export default PatientPDF\n\\ No newline at end of file\n"
                },
                {
                    "date": 1743758024232,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -105,9 +105,9 @@\n                 }}\r\n             >\r\n                 Download Patient Report\r\n             </Button>\r\n-            <Box sx={{display:'none'}}>\r\n+            <Box sx={{display:'none'}} component={'div'}>\r\n \r\n \r\n                 <PDFExport ref={pdfExportComponent} paperSize=\"A4\" margin=\"10px\">\r\n                     <Card\r\n@@ -930,936 +930,5 @@\n         </div>\r\n     )\r\n }\r\n \r\n-export default PatientPDF\n-import React, { useRef, useEffect, useState } from \"react\"\r\n-import { PDFExport } from \"@progress/kendo-react-pdf\"\r\n-import {\r\n-  Button,\r\n-  Card,\r\n-  CardContent,\r\n-  Typography,\r\n-  Grid,\r\n-  Table,\r\n-  TableBody,\r\n-  TableCell,\r\n-  TableContainer,\r\n-  TableHead,\r\n-  TableRow,\r\n-  Box,\r\n-  Paper,\r\n-} from \"@mui/material\"\r\n-\r\n-// Function to convert image URL to Base64\r\n-const toBase64 = (url) => {\r\n-  return new Promise((resolve, reject) => {\r\n-    const proxyUrl = \"https://corsproxy.io/?url=\"\r\n-    const imgUrl = proxyUrl + encodeURIComponent(url)\r\n-\r\n-    const img = new Image()\r\n-    img.crossOrigin = \"Anonymous\"\r\n-    img.onload = () => {\r\n-      const canvas = document.createElement(\"canvas\")\r\n-      canvas.width = img.width\r\n-      canvas.height = img.height\r\n-      const ctx = canvas.getContext(\"2d\")\r\n-      ctx.drawImage(img, 0, 0)\r\n-      resolve(canvas.toDataURL())\r\n-    }\r\n-    img.onerror = reject\r\n-    img.src = imgUrl\r\n-  })\r\n-}\r\n-\r\n-const PatientPDF = ({ form }) => {\r\n-  const pdfExportComponent = useRef(null)\r\n-  const [imagesBase64, setImagesBase64] = useState({})\r\n-\r\n-  useEffect(() => {\r\n-    const fetchImagesAsBase64 = async () => {\r\n-      try {\r\n-        const imageUrls = {\r\n-          batch: form?.batch_images || [],\r\n-          before: form?.before_images || [],\r\n-          after: form?.after_images || [],\r\n-          patientSign: form?.treatment_plan?.patient_sign ? [form.treatment_plan.patient_sign] : [],\r\n-          furtherTreatment: form?.further_treatment?.map((treatment) => treatment?.sign) || [],\r\n-          patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n-        }\r\n-\r\n-        // Convert each image URL to Base64\r\n-        const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n-          const urls = imageUrls[key]\r\n-          const base64Images = await Promise.all(urls.map((url) => toBase64(url)))\r\n-          return { [key]: base64Images }\r\n-        })\r\n-\r\n-        // Set all images as Base64 in the state\r\n-        const base64Data = await Promise.all(imagePromises)\r\n-        const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {})\r\n-        setImagesBase64(allImages)\r\n-      } catch (error) {\r\n-        console.error(\"Error converting images to base64:\", error)\r\n-      }\r\n-    }\r\n-\r\n-    fetchImagesAsBase64()\r\n-  }, [form])\r\n-\r\n-  const handleExportWithComponent = () => {\r\n-    if (pdfExportComponent.current) {\r\n-      pdfExportComponent.current.save()\r\n-    }\r\n-  }\r\n-\r\n-  // Format date function\r\n-  const formatDate = (dateString) => {\r\n-    if (!dateString) return \"N/A\"\r\n-    return new Date(dateString).toLocaleDateString(\"en-US\", {\r\n-      year: \"numeric\",\r\n-      month: \"long\",\r\n-      day: \"numeric\",\r\n-    })\r\n-  }\r\n-\r\n-  return (\r\n-    <div>\r\n-      <Button\r\n-        variant=\"contained\"\r\n-        color=\"primary\"\r\n-        onClick={handleExportWithComponent}\r\n-        sx={{\r\n-          marginBottom: \"20px\",\r\n-          padding: \"10px 24px\",\r\n-          fontSize: \"16px\",\r\n-          fontWeight: \"bold\",\r\n-          borderRadius: \"8px\",\r\n-          boxShadow: \"0 4px 6px rgba(0,0,0,0.1)\",\r\n-          textTransform: \"none\",\r\n-        }}\r\n-      >\r\n-        Download Patient Report\r\n-      </Button>\r\n-\r\n-      <PDFExport ref={pdfExportComponent} paperSize=\"A4\" margin=\"10px\">\r\n-        <Card\r\n-          sx={{\r\n-            maxWidth: \"800px\",\r\n-            margin: \"auto\",\r\n-            backgroundColor: \"#ffffff\",\r\n-            borderRadius: \"12px\",\r\n-            boxShadow: \"0 4px 20px rgba(0,0,0,0.08)\",\r\n-          }}\r\n-        >\r\n-          <CardContent sx={{ padding: \"30px\" }}>\r\n-            {/* Header */}\r\n-            <Box\r\n-              sx={{\r\n-                textAlign: \"center\",\r\n-                marginBottom: \"20px\",\r\n-                backgroundColor: \"#f8f9fa\",\r\n-                padding: \"20px\",\r\n-                borderRadius: \"8px\",\r\n-              }}\r\n-            >\r\n-              <Typography\r\n-                variant=\"h4\"\r\n-                sx={{\r\n-                  fontWeight: \"700\",\r\n-                  color: \"#2c3e50\",\r\n-                  marginBottom: \"5px\",\r\n-                }}\r\n-              >\r\n-                Patient Medical Report\r\n-              </Typography>\r\n-              <Typography variant=\"subtitle1\" sx={{ color: \"#5d6778\" }}>\r\n-                Confidential Medical Documentation\r\n-              </Typography>\r\n-            </Box>\r\n-\r\n-            {/* Patient Information Section */}\r\n-            <Paper\r\n-              elevation={0}\r\n-              sx={{\r\n-                padding: \"20px\",\r\n-                marginBottom: \"25px\",\r\n-                backgroundColor: \"#f8f9fa\",\r\n-                borderRadius: \"8px\",\r\n-                border: \"1px solid #e0e0e0\",\r\n-              }}\r\n-            >\r\n-              <Typography\r\n-                variant=\"h6\"\r\n-                sx={{\r\n-                  fontWeight: \"600\",\r\n-                  marginBottom: \"15px\",\r\n-                  color: \"#2c3e50\",\r\n-                  borderBottom: \"2px solid #3498db\",\r\n-                  paddingBottom: \"8px\",\r\n-                  display: \"inline-block\",\r\n-                }}\r\n-              >\r\n-                Patient Information\r\n-              </Typography>\r\n-\r\n-              <Grid container spacing={3}>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Name:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                      {form?.first_name} {form?.last_name}\r\n-                    </span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    DOB: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{formatDate(form?.dob)}</span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Phone: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.phone}</span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Email: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.email}</span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={12}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Address:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                      {form?.address}, {form?.post_code}\r\n-                    </span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={12}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Notes: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.notes || \"None\"}</span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-              </Grid>\r\n-            </Paper>\r\n-\r\n-            {/* Next of Kin Information */}\r\n-            <Paper\r\n-              elevation={0}\r\n-              sx={{\r\n-                padding: \"20px\",\r\n-                marginBottom: \"25px\",\r\n-                backgroundColor: \"#f8f9fa\",\r\n-                borderRadius: \"8px\",\r\n-                border: \"1px solid #e0e0e0\",\r\n-              }}\r\n-            >\r\n-              <Typography\r\n-                variant=\"h6\"\r\n-                sx={{\r\n-                  fontWeight: \"600\",\r\n-                  marginBottom: \"15px\",\r\n-                  color: \"#2c3e50\",\r\n-                  borderBottom: \"2px solid #3498db\",\r\n-                  paddingBottom: \"8px\",\r\n-                  display: \"inline-block\",\r\n-                }}\r\n-              >\r\n-                Next of Kin\r\n-              </Typography>\r\n-\r\n-              <Grid container spacing={3}>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Name:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.name || \"N/A\"}</span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Phone:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.phone || \"N/A\"}</span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Address:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.address || \"N/A\"}</span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Email:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.email || \"N/A\"}</span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-              </Grid>\r\n-            </Paper>\r\n-\r\n-            {/* General Practitioners */}\r\n-            <Paper\r\n-              elevation={0}\r\n-              sx={{\r\n-                padding: \"20px\",\r\n-                marginBottom: \"25px\",\r\n-                backgroundColor: \"#f8f9fa\",\r\n-                borderRadius: \"8px\",\r\n-                border: \"1px solid #e0e0e0\",\r\n-              }}\r\n-            >\r\n-              <Typography\r\n-                variant=\"h6\"\r\n-                sx={{\r\n-                  fontWeight: \"600\",\r\n-                  marginBottom: \"15px\",\r\n-                  color: \"#2c3e50\",\r\n-                  borderBottom: \"2px solid #3498db\",\r\n-                  paddingBottom: \"8px\",\r\n-                  display: \"inline-block\",\r\n-                }}\r\n-              >\r\n-                General Practitioners\r\n-              </Typography>\r\n-\r\n-              <Grid container spacing={3}>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Name:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                      {form?.general_practitioner?.name || \"N/A\"}\r\n-                    </span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Phone:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                      {form?.general_practitioner?.phone || \"N/A\"}\r\n-                    </span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Address:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                      {form?.general_practitioner?.address || \"N/A\"}\r\n-                    </span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Email:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                      {form?.general_practitioner?.email || \"N/A\"}\r\n-                    </span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-              </Grid>\r\n-            </Paper>\r\n-\r\n-            {/* Treatment Plan */}\r\n-            <Paper\r\n-              elevation={0}\r\n-              className=\"kendoPaper2\"\r\n-              sx={{\r\n-                padding: \"20px\",\r\n-                marginBottom: \"25px\",\r\n-                backgroundColor: \"#f8f9fa\",\r\n-                borderRadius: \"8px\",\r\n-                border: \"1px solid #e0e0e0\",\r\n-              }}\r\n-            >\r\n-              <Typography\r\n-                variant=\"h6\"\r\n-                sx={{\r\n-                  fontWeight: \"600\",\r\n-                  marginBottom: \"15px\",\r\n-                  color: \"#2c3e50\",\r\n-                  borderBottom: \"2px solid #3498db\",\r\n-                  paddingBottom: \"8px\",\r\n-                  display: \"inline-block\",\r\n-                }}\r\n-              >\r\n-                Treatment Plan\r\n-              </Typography>\r\n-\r\n-              <Grid container spacing={3}>\r\n-                <Grid item xs={12}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n-                    Patient Concerns:\r\n-                  </Typography>\r\n-                  <Typography\r\n-                    sx={{\r\n-                      padding: \"10px\",\r\n-                      \r\n-                      borderRadius: \"6px\",\r\n-                      border: \"1px solid #e0e0e0\",\r\n-                    }}\r\n-                  >\r\n-                    {form?.treatment_plan?.patient_concerns || \"None specified\"}\r\n-                  </Typography>\r\n-                </Grid>\r\n-\r\n-                <Grid item xs={12}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n-                    Patient Goals:\r\n-                  </Typography>\r\n-                  <Typography\r\n-                    sx={{\r\n-                      padding: \"10px\",\r\n-                     \r\n-                      borderRadius: \"6px\",\r\n-                      border: \"1px solid #e0e0e0\",\r\n-                    }}\r\n-                  >\r\n-                    {form?.treatment_plan?.patient_goals || \"None specified\"}\r\n-                  </Typography>\r\n-                </Grid>\r\n-\r\n-                <Grid item xs={12}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n-                    Advised Plan:\r\n-                  </Typography>\r\n-                  <Typography\r\n-                    sx={{\r\n-                      padding: \"10px\",\r\n-                     \r\n-                      borderRadius: \"6px\",\r\n-                      border: \"1px solid #e0e0e0\",\r\n-                    }}\r\n-                  >\r\n-                    {form?.treatment_plan?.advised_plan || \"None specified\"}\r\n-                  </Typography>\r\n-                </Grid>\r\n-\r\n-                <Grid item xs={12}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n-                    Expected Result:\r\n-                  </Typography>\r\n-                  <Typography\r\n-                    sx={{\r\n-                      padding: \"10px\",\r\n-                     \r\n-                      borderRadius: \"6px\",\r\n-                      border: \"1px solid #e0e0e0\",\r\n-                    }}\r\n-                  >\r\n-                    {form?.treatment_plan?.expected_result || \"None specified\"}\r\n-                  </Typography>\r\n-                </Grid>\r\n-\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Date:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                      {formatDate(form?.treatment_plan?.date)}\r\n-                    </span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n-                    Patient Signature:\r\n-                  </Typography>\r\n-                  {imagesBase64?.patientConsent?.[0] && (\r\n-                    <Box\r\n-                      sx={{\r\n-                        border: \"1px solid #e0e0e0\",\r\n-                        borderRadius: \"6px\",\r\n-                        padding: \"10px\",\r\n-                        backgroundColor: \"#ffffff\",\r\n-                        display: \"flex\",\r\n-                        justifyContent: \"center\",\r\n-                      }}\r\n-                    >\r\n-                      <img\r\n-                        src={imagesBase64?.patientConsent?.[0] || \"/placeholder.svg\"}\r\n-                        alt=\"Treatment Plan Sign\"\r\n-                        style={{\r\n-                          width: \"200px\",\r\n-                          borderRadius: \"6px\",\r\n-                        }}\r\n-                      />\r\n-                    </Box>\r\n-                  )}\r\n-                </Grid>\r\n-              </Grid>\r\n-            </Paper>\r\n-\r\n-            {/* Images Section */}\r\n-            <Paper\r\n-              elevation={0}\r\n-              className=\"kendoPaper\"\r\n-              sx={{\r\n-                padding: \"20px\",\r\n-                marginBottom: \"25px\",\r\n-                backgroundColor: \"#f8f9fa\",\r\n-                borderRadius: \"8px\",\r\n-                border: \"1px solid #e0e0e0\",\r\n-              }}\r\n-            >\r\n-              <Typography\r\n-                variant=\"h6\"\r\n-                sx={{\r\n-                  fontWeight: \"600\",\r\n-                  marginBottom: \"15px\",\r\n-                  color: \"#2c3e50\",\r\n-                  borderBottom: \"2px solid #3498db\",\r\n-                  paddingBottom: \"8px\",\r\n-                  display: \"inline-block\",\r\n-                  marginTop: \"25px\",\r\n-                }}\r\n-              >\r\n-                Medical Images\r\n-              </Typography>\r\n-\r\n-              {/* Batch Images */}\r\n-              <Box sx={{ marginBottom: \"20px\" }}>\r\n-                <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n-                  Batch Images:\r\n-                </Typography>\r\n-                <Box\r\n-                  sx={{\r\n-                    display: \"flex\",\r\n-                    gap: \"15px\",\r\n-                    flexWrap: \"wrap\",\r\n-                    \r\n-                    padding: \"15px\",\r\n-                    borderRadius: \"6px\",\r\n-                    border: \"1px solid #e0e0e0\",\r\n-                  }}\r\n-                >\r\n-                  {imagesBase64?.batch?.length > 0 ? (\r\n-                    imagesBase64.batch.map((img, index) => (\r\n-                      <Box\r\n-                        key={index}\r\n-                        sx={{\r\n-                          border: \"1px solid #e0e0e0\",\r\n-                          borderRadius: \"6px\",\r\n-                          padding: \"5px\",\r\n-                          backgroundColor: \"#ffffff\",\r\n-                          boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n-                        }}\r\n-                      >\r\n-                        <img\r\n-                          src={img || \"/placeholder.svg\"}\r\n-                          style={{\r\n-                            width: \"70px\",\r\n-                            height: \"70px\",\r\n-                            objectFit: \"cover\",\r\n-                            borderRadius: \"4px\",\r\n-                          }}\r\n-                        />\r\n-                      </Box>\r\n-                    ))\r\n-                  ) : (\r\n-                    <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No batch images available</Typography>\r\n-                  )}\r\n-                </Box>\r\n-              </Box>\r\n-\r\n-              {/* Before Images */}\r\n-              <Box sx={{ marginBottom: \"20px\" }}>\r\n-                <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n-                  Before Treatment:\r\n-                </Typography>\r\n-                <Box\r\n-                  sx={{\r\n-                    display: \"flex\",\r\n-                    gap: \"15px\",\r\n-                    flexWrap: \"wrap\",\r\n-                  \r\n-                    padding: \"15px\",\r\n-                    borderRadius: \"6px\",\r\n-                    border: \"1px solid #e0e0e0\",\r\n-                  }}\r\n-                >\r\n-                  {imagesBase64?.before?.length > 0 ? (\r\n-                    imagesBase64.before.map((img, index) => (\r\n-                      <Box\r\n-                        key={index}\r\n-                        sx={{\r\n-                          border: \"1px solid #e0e0e0\",\r\n-                          borderRadius: \"6px\",\r\n-                          padding: \"5px\",\r\n-                          backgroundColor: \"#ffffff\",\r\n-                          boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n-                        }}\r\n-                      >\r\n-                        <img\r\n-                          src={img || \"/placeholder.svg\"}\r\n-                          alt={`Before ${index + 1}`}\r\n-                          style={{\r\n-                            width: \"70px\",\r\n-                            height: \"70px\",\r\n-                            objectFit: \"cover\",\r\n-                            borderRadius: \"4px\",\r\n-                          }}\r\n-                        />\r\n-                      </Box>\r\n-                    ))\r\n-                  ) : (\r\n-                    <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No before images available</Typography>\r\n-                  )}\r\n-                </Box>\r\n-              </Box>\r\n-\r\n-              {/* After Images */}\r\n-              <Box>\r\n-                <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n-                  After Treatment:\r\n-                </Typography>\r\n-                <Box\r\n-                  sx={{\r\n-                    display: \"flex\",\r\n-                    gap: \"15px\",\r\n-                    flexWrap: \"wrap\",\r\n-                 \r\n-                    padding: \"15px\",\r\n-                    borderRadius: \"6px\",\r\n-                    border: \"1px solid #e0e0e0\",\r\n-                  }}\r\n-                >\r\n-                  {imagesBase64?.after?.length > 0 ? (\r\n-                    imagesBase64.after.map((img, index) => (\r\n-                      <Box\r\n-                        key={index}\r\n-                        sx={{\r\n-                          border: \"1px solid #e0e0e0\",\r\n-                          borderRadius: \"6px\",\r\n-                          padding: \"5px\",\r\n-                          backgroundColor: \"#ffffff\",\r\n-                          boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n-                        }}\r\n-                      >\r\n-                        <img\r\n-                          src={img || \"/placeholder.svg\"}\r\n-                          alt={`After ${index + 1}`}\r\n-                          style={{\r\n-                            width: \"70px\",\r\n-                            height: \"70px\",\r\n-                            objectFit: \"cover\",\r\n-                            borderRadius: \"4px\",\r\n-                          }}\r\n-                        />\r\n-                      </Box>\r\n-                    ))\r\n-                  ) : (\r\n-                    <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No after images available</Typography>\r\n-                  )}\r\n-                </Box>\r\n-              </Box>\r\n-            </Paper>\r\n-\r\n-            {/* Treatment Records Table - Page Break */}\r\n-            <Box sx={{ pageBreakBefore: \"always\" }}>\r\n-              <Paper\r\n-                elevation={0}\r\n-                sx={{\r\n-                  padding: \"20px\",\r\n-                  marginBottom: \"25px\",\r\n-                  backgroundColor: \"#f8f9fa\",\r\n-                  borderRadius: \"8px\",\r\n-                  border: \"1px solid #e0e0e0\",\r\n-                }}\r\n-              >\r\n-                <Typography\r\n-                  variant=\"h6\"\r\n-                  sx={{\r\n-                    fontWeight: \"600\",\r\n-                    marginBottom: \"15px\",\r\n-                    color: \"#2c3e50\",\r\n-                    borderBottom: \"2px solid #3498db\",\r\n-                    paddingBottom: \"8px\",\r\n-                    display: \"inline-block\",\r\n-                  }}\r\n-                >\r\n-                  Treatment Records\r\n-                </Typography>\r\n-\r\n-                <TableContainer component={Paper} elevation={0} sx={{ border: \"1px solid #e0e0e0\" }}>\r\n-                  <Table>\r\n-                    <TableHead sx={{ backgroundColor: \"#f1f8ff\" }}>\r\n-                      <TableRow>\r\n-                        <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Date</TableCell>\r\n-                        <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Description</TableCell>\r\n-                        <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Amount</TableCell>\r\n-                      </TableRow>\r\n-                    </TableHead>\r\n-                    <TableBody>\r\n-                      {form?.treatment_record?.length > 0 ? (\r\n-                        form.treatment_record.map((record, index) => (\r\n-                          <TableRow\r\n-                            key={index}\r\n-                            sx={{\r\n-                              \"&:nth-of-type(odd)\": { backgroundColor: \"#f9f9f9\" },\r\n-                              \"&:hover\": { backgroundColor: \"#f5f5f5\" },\r\n-                            }}\r\n-                          >\r\n-                            <TableCell>{formatDate(record.date)}</TableCell>\r\n-                            <TableCell>{record.description}</TableCell>\r\n-                            <TableCell>${record.amount}</TableCell>\r\n-                          </TableRow>\r\n-                        ))\r\n-                      ) : (\r\n-                        <TableRow>\r\n-                          <TableCell colSpan={3} sx={{ textAlign: \"center\", color: \"#7f8c8d\", fontStyle: \"italic\" }}>\r\n-                            No treatment records available\r\n-                          </TableCell>\r\n-                        </TableRow>\r\n-                      )}\r\n-                    </TableBody>\r\n-                  </Table>\r\n-                </TableContainer>\r\n-              </Paper>\r\n-\r\n-              {/* Further Treatment Section */}\r\n-              <Paper\r\n-                elevation={0}\r\n-                sx={{\r\n-                  padding: \"20px\",\r\n-                  marginBottom: \"25px\",\r\n-                  backgroundColor: \"#f8f9fa\",\r\n-                  borderRadius: \"8px\",\r\n-                  border: \"1px solid #e0e0e0\",\r\n-                }}\r\n-              >\r\n-                <Typography\r\n-                  variant=\"h6\"\r\n-                  sx={{\r\n-                    fontWeight: \"600\",\r\n-                    marginBottom: \"15px\",\r\n-                    color: \"#2c3e50\",\r\n-                    borderBottom: \"2px solid #3498db\",\r\n-                    paddingBottom: \"8px\",\r\n-                    display: \"inline-block\",\r\n-                  }}\r\n-                >\r\n-                  Further Treatment\r\n-                </Typography>\r\n-\r\n-                <Grid container spacing={3}>\r\n-                  {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                    <React.Fragment key={`treatment-${index}`}>\r\n-                      {/* Date Grid Item */}\r\n-                      <Grid item xs={12} sm={6} md={6}>\r\n-                        <Box\r\n-                          sx={{\r\n-                            padding: \"15px\",\r\n-                            borderRadius: \"6px\",\r\n-                            \r\n-                            \r\n-                          }}\r\n-                        >\r\n-                          <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                            Date:\r\n-                          </Typography>\r\n-                          <Typography variant=\"body2\" sx={{ color: \"#2c3e50\", marginTop: \"5px\" }}>\r\n-                            {form?.further_treatment?.[index]?.date\r\n-                              ? formatDate(form.further_treatment[index].date)\r\n-                              : \"No Date Available\"}\r\n-                          </Typography>\r\n-                        </Box>\r\n-                      </Grid>\r\n-\r\n-                      {/* Signature Grid Item */}\r\n-                      <Grid item xs={12} sm={6} md={6}>\r\n-                        <Box\r\n-                          sx={{\r\n-                            padding: \"15px\",\r\n-                            borderRadius: \"6px\",\r\n-                            \r\n-                          }}\r\n-                        >\r\n-                          <Typography\r\n-                            variant=\"body1\"\r\n-                            sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}\r\n-                          >\r\n-                            Patient Signature:\r\n-                          </Typography>\r\n-                          <Box\r\n-                            sx={{\r\n-                              display: \"flex\",\r\n-                              justifyContent: \"center\",\r\n-                              border: \"1px solid #e0e0e0\",\r\n-                              borderRadius: \"6px\",\r\n-                              padding: \"10px\",\r\n-                              backgroundColor: \"#ffffff\",\r\n-                            }}\r\n-                          >\r\n-                            <img\r\n-                              src={treatment || \"/placeholder.svg\"}\r\n-                              alt=\"Further Treatment Sign\"\r\n-                              style={{\r\n-                                width: \"200px\",\r\n-                                borderRadius: \"6px\",\r\n-                              }}\r\n-                            />\r\n-                          </Box>\r\n-                        </Box>\r\n-                      </Grid>\r\n-                    </React.Fragment>\r\n-                  ))}\r\n-\r\n-                  {(!imagesBase64?.furtherTreatment || imagesBase64.furtherTreatment.length === 0) && (\r\n-                    <Grid item xs={12}>\r\n-                      <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\", textAlign: \"center\", padding: \"20px\" }}>\r\n-                        No further treatment information available\r\n-                      </Typography>\r\n-                    </Grid>\r\n-                  )}\r\n-                </Grid>\r\n-              </Paper>\r\n-\r\n-              {/* Patient Consent */}\r\n-              <Paper\r\n-                elevation={0}\r\n-                sx={{\r\n-                  padding: \"20px\",\r\n-                  marginBottom: \"25px\",\r\n-                  backgroundColor: \"#f8f9fa\",\r\n-                  borderRadius: \"8px\",\r\n-                  border: \"1px solid #e0e0e0\",\r\n-               \r\n-          \r\n-                }}\r\n-              >\r\n-                <Typography\r\n-                  variant=\"h6\"\r\n-                  sx={{\r\n-                    fontWeight: \"600\",\r\n-                    marginBottom: \"15px\",\r\n-                    color: \"#2c3e50\",\r\n-                    borderBottom: \"2px solid #3498db\",\r\n-                    paddingBottom: \"8px\",\r\n-                    display: \"inline-block\",\r\n-                  }}\r\n-                >\r\n-                  Patient Consent\r\n-                </Typography>\r\n-\r\n-                <Grid container spacing={3}>\r\n-                  <Grid item xs={12} sm={6} md={6}>\r\n-                    <Box\r\n-                      sx={{\r\n-                        padding: \"15px\",\r\n-                        borderRadius: \"6px\",\r\n-                    \r\n-               \r\n-                      }}\r\n-                    >\r\n-                      <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}>\r\n-                        Consent Details:\r\n-                      </Typography>\r\n-                      <Typography variant=\"body2\" sx={{ color: \"#2c3e50\" }}>\r\n-                        {form?.patient_consent?.details || \"No Patient Consent Details Available\"}\r\n-                      </Typography>\r\n-                    </Box>\r\n-                  </Grid>\r\n-\r\n-                  <Grid item xs={12} sm={6} md={6}>\r\n-                    <Box\r\n-                      sx={{\r\n-                        padding: \"15px\",\r\n-                        borderRadius: \"6px\",\r\n-                  \r\n-                \r\n-                      }}\r\n-                    >\r\n-                      <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}>\r\n-                        Patient Signature:\r\n-                      </Typography>\r\n-                      {imagesBase64?.patientConsent?.[0] ? (\r\n-                        <Box\r\n-                          sx={{\r\n-                            display: \"flex\",\r\n-                            justifyContent: \"center\",\r\n-                            border: \"1px solid #e0e0e0\",\r\n-                            borderRadius: \"6px\",\r\n-                            padding: \"10px\",\r\n-                            backgroundColor: \"#ffffff\",\r\n-                          }}\r\n-                        >\r\n-                          <img\r\n-                            src={imagesBase64.patientConsent[0] || \"/placeholder.svg\"}\r\n-                            alt=\"Patient Consent Signature\"\r\n-                            style={{\r\n-                              width: \"200px\",\r\n-                              borderRadius: \"6px\",\r\n-                            }}\r\n-                          />\r\n-                        </Box>\r\n-                      ) : (\r\n-                        <Typography\r\n-                          sx={{ color: \"#7f8c8d\", fontStyle: \"italic\", textAlign: \"center\", padding: \"20px\" }}\r\n-                        >\r\n-                          No signature available\r\n-                        </Typography>\r\n-                      )}\r\n-                    </Box>\r\n-                  </Grid>\r\n-                </Grid>\r\n-              </Paper>\r\n-\r\n-              {/* Side Effects */}\r\n-              <Paper\r\n-                elevation={0}\r\n-                sx={{\r\n-                  padding: \"20px\",\r\n-                  backgroundColor: \"#f8f9fa\",\r\n-                  borderRadius: \"8px\",\r\n-                  border: \"1px solid #e0e0e0\",\r\n-                }}\r\n-              >\r\n-                <Typography\r\n-                  variant=\"h6\"\r\n-                  sx={{\r\n-                    fontWeight: \"600\",\r\n-                    marginBottom: \"15px\",\r\n-                    color: \"#2c3e50\",\r\n-                    borderBottom: \"2px solid #3498db\",\r\n-                    paddingBottom: \"8px\",\r\n-                    display: \"inline-block\",\r\n-                  }}\r\n-                >\r\n-                  Patient Side Effects\r\n-                </Typography>\r\n-\r\n-                <Box\r\n-                  sx={{\r\n-                    padding: \"15px\",\r\n-                    borderRadius: \"6px\",\r\n-                    backgroundColor: \"#ffffff\",\r\n-                    border: \"1px solid #e0e0e0\",\r\n-                  }}\r\n-                >\r\n-                  <Typography variant=\"body2\" sx={{ color: \"#2c3e50\" }}>\r\n-                    {form?.side_effect?.details || \"No Side Effects Reported\"}\r\n-                  </Typography>\r\n-                </Box>\r\n-              </Paper>\r\n-\r\n-              {/* Footer */}\r\n-              <Box\r\n-                sx={{\r\n-                  marginTop: \"30px\",\r\n-                  textAlign: \"center\",\r\n-                  padding: \"15px\",\r\n-                  borderTop: \"1px solid #e0e0e0\",\r\n-                }}\r\n-              >\r\n-                <Typography variant=\"body2\" sx={{ color: \"#7f8c8d\" }}>\r\n-                  This document is confidential and contains private medical information.\r\n-                </Typography>\r\n-                <Typography variant=\"body2\" sx={{ color: \"#7f8c8d\", marginTop: \"5px\" }}>\r\n-                  Generated on: {new Date().toLocaleDateString()}\r\n-                </Typography>\r\n-              </Box>\r\n-            </Box>\r\n-          </CardContent>\r\n-        </Card>\r\n-      </PDFExport>\r\n-    </div>\r\n-  )\r\n-}\r\n-\r\n export default PatientPDF\n\\ No newline at end of file\n"
                },
                {
                    "date": 1743758030744,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -105,9 +105,9 @@\n                 }}\r\n             >\r\n                 Download Patient Report\r\n             </Button>\r\n-            <Box sx={{display:'none'}} component={'div'}>\r\n+            <Box sx={{display:'none'}} component={'div'} className=\"pdfShow\">\r\n \r\n \r\n                 <PDFExport ref={pdfExportComponent} paperSize=\"A4\" margin=\"10px\">\r\n                     <Card\r\n"
                },
                {
                    "date": 1743758213747,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -105,9 +105,9 @@\n                 }}\r\n             >\r\n                 Download Patient Report\r\n             </Button>\r\n-            <Box sx={{display:'none'}} component={'div'} className=\"pdfShow\">\r\n+            <Box>\r\n \r\n \r\n                 <PDFExport ref={pdfExportComponent} paperSize=\"A4\" margin=\"10px\">\r\n                     <Card\r\n"
                },
                {
                    "date": 1743758434565,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,934 +1,928 @@\n+\"use client\"\r\n+\r\n import React, { useRef, useEffect, useState } from \"react\"\r\n import { PDFExport } from \"@progress/kendo-react-pdf\"\r\n import {\r\n-    Button,\r\n-    Card,\r\n-    CardContent,\r\n-    Typography,\r\n-    Grid,\r\n-    Table,\r\n-    TableBody,\r\n-    TableCell,\r\n-    TableContainer,\r\n-    TableHead,\r\n-    TableRow,\r\n-    Box,\r\n-    Paper,\r\n+  Button,\r\n+  Card,\r\n+  CardContent,\r\n+  Typography,\r\n+  Grid,\r\n+  Table,\r\n+  TableBody,\r\n+  TableCell,\r\n+  TableContainer,\r\n+  TableHead,\r\n+  TableRow,\r\n+  Box,\r\n+  Paper,\r\n } from \"@mui/material\"\r\n \r\n // Function to convert image URL to Base64\r\n const toBase64 = (url) => {\r\n-    return new Promise((resolve, reject) => {\r\n-        const proxyUrl = \"https://corsproxy.io/?url=\"\r\n-        const imgUrl = proxyUrl + encodeURIComponent(url)\r\n+  return new Promise((resolve, reject) => {\r\n+    const proxyUrl = \"https://corsproxy.io/?url=\"\r\n+    const imgUrl = proxyUrl + encodeURIComponent(url)\r\n \r\n-        const img = new Image()\r\n-        img.crossOrigin = \"Anonymous\"\r\n-        img.onload = () => {\r\n-            const canvas = document.createElement(\"canvas\")\r\n-            canvas.width = img.width\r\n-            canvas.height = img.height\r\n-            const ctx = canvas.getContext(\"2d\")\r\n-            ctx.drawImage(img, 0, 0)\r\n-            resolve(canvas.toDataURL())\r\n-        }\r\n-        img.onerror = reject\r\n-        img.src = imgUrl\r\n-    })\r\n+    const img = new Image()\r\n+    img.crossOrigin = \"Anonymous\"\r\n+    img.onload = () => {\r\n+      const canvas = document.createElement(\"canvas\")\r\n+      canvas.width = img.width\r\n+      canvas.height = img.height\r\n+      const ctx = canvas.getContext(\"2d\")\r\n+      ctx.drawImage(img, 0, 0)\r\n+      resolve(canvas.toDataURL())\r\n+    }\r\n+    img.onerror = reject\r\n+    img.src = imgUrl\r\n+  })\r\n }\r\n \r\n const PatientPDF = ({ form }) => {\r\n-    const pdfExportComponent = useRef(null)\r\n-    const [imagesBase64, setImagesBase64] = useState({})\r\n+  const pdfExportComponent = useRef(null)\r\n+  const [imagesBase64, setImagesBase64] = useState({})\r\n+  const [isLoading, setIsLoading] = useState(true)\r\n \r\n-    useEffect(() => {\r\n-        const fetchImagesAsBase64 = async () => {\r\n-            try {\r\n-                const imageUrls = {\r\n-                    batch: form?.batch_images || [],\r\n-                    before: form?.before_images || [],\r\n-                    after: form?.after_images || [],\r\n-                    patientSign: form?.treatment_plan?.patient_sign ? [form.treatment_plan.patient_sign] : [],\r\n-                    furtherTreatment: form?.further_treatment?.map((treatment) => treatment?.sign) || [],\r\n-                    patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n-                }\r\n+  useEffect(() => {\r\n+    const fetchImagesAsBase64 = async () => {\r\n+      try {\r\n+        setIsLoading(true)\r\n+        const imageUrls = {\r\n+          batch: form?.batch_images || [],\r\n+          before: form?.before_images || [],\r\n+          after: form?.after_images || [],\r\n+          patientSign: form?.treatment_plan?.patient_sign ? [form.treatment_plan.patient_sign] : [],\r\n+          furtherTreatment: form?.further_treatment?.map((treatment) => treatment?.sign) || [],\r\n+          patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n+        }\r\n \r\n-                // Convert each image URL to Base64\r\n-                const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n-                    const urls = imageUrls[key]\r\n-                    const base64Images = await Promise.all(urls.map((url) => toBase64(url)))\r\n-                    return { [key]: base64Images }\r\n-                })\r\n+        // Convert each image URL to Base64\r\n+        const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n+          const urls = imageUrls[key]\r\n+          const base64Images = await Promise.all(urls.map((url) => toBase64(url)))\r\n+          return { [key]: base64Images }\r\n+        })\r\n \r\n-                // Set all images as Base64 in the state\r\n-                const base64Data = await Promise.all(imagePromises)\r\n-                const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {})\r\n-                setImagesBase64(allImages)\r\n-            } catch (error) {\r\n-                console.error(\"Error converting images to base64:\", error)\r\n-            }\r\n-        }\r\n+        // Set all images as Base64 in the state\r\n+        const base64Data = await Promise.all(imagePromises)\r\n+        const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {})\r\n+        setImagesBase64(allImages)\r\n+        setIsLoading(false)\r\n \r\n-        fetchImagesAsBase64()\r\n-    }, [form])\r\n-\r\n-    const handleExportWithComponent = () => {\r\n-        if (pdfExportComponent.current) {\r\n+        // Auto-download PDF once images are loaded\r\n+        setTimeout(() => {\r\n+          if (pdfExportComponent.current) {\r\n             pdfExportComponent.current.save()\r\n-        }\r\n+          }\r\n+        }, 500)\r\n+      } catch (error) {\r\n+        console.error(\"Error converting images to base64:\", error)\r\n+        setIsLoading(false)\r\n+      }\r\n     }\r\n \r\n-    // Format date function\r\n-    const formatDate = (dateString) => {\r\n-        if (!dateString) return \"N/A\"\r\n-        return new Date(dateString).toLocaleDateString(\"en-US\", {\r\n-            year: \"numeric\",\r\n-            month: \"long\",\r\n-            day: \"numeric\",\r\n-        })\r\n+    fetchImagesAsBase64()\r\n+  }, [form])\r\n+\r\n+  // Format date function\r\n+  const formatDate = (dateString) => {\r\n+    if (!dateString) return \"N/A\"\r\n+    return new Date(dateString).toLocaleDateString(\"en-US\", {\r\n+      year: \"numeric\",\r\n+      month: \"long\",\r\n+      day: \"numeric\",\r\n+    })\r\n+  }\r\n+\r\n+  // Function to manually trigger PDF download\r\n+  const handleExportWithComponent = () => {\r\n+    if (pdfExportComponent.current) {\r\n+      pdfExportComponent.current.save()\r\n     }\r\n+  }\r\n \r\n-    return (\r\n-        <div>\r\n-            <Button\r\n-                variant=\"contained\"\r\n-                color=\"primary\"\r\n-                onClick={handleExportWithComponent}\r\n+  return (\r\n+    <div style={{ position: \"fixed\", left: \"-9999px\" }}>\r\n+      {isLoading ? (\r\n+        <Button variant=\"contained\" color=\"primary\" disabled>\r\n+          Preparing PDF...\r\n+        </Button>\r\n+      ) : (\r\n+        <Button variant=\"contained\" color=\"primary\" onClick={handleExportWithComponent}>\r\n+          Download Patient Report\r\n+        </Button>\r\n+      )}\r\n+\r\n+      <PDFExport\r\n+        ref={pdfExportComponent}\r\n+        paperSize=\"A4\"\r\n+        margin=\"10px\"\r\n+        fileName={`Patient_Report_${form?.first_name || \"\"}_${form?.last_name || \"\"}`}\r\n+      >\r\n+        <Card\r\n+          sx={{\r\n+            maxWidth: \"800px\",\r\n+            margin: \"auto\",\r\n+            backgroundColor: \"#ffffff\",\r\n+            borderRadius: \"12px\",\r\n+            boxShadow: \"0 4px 20px rgba(0,0,0,0.08)\",\r\n+          }}\r\n+        >\r\n+          <CardContent sx={{ padding: \"30px\" }}>\r\n+            {/* Header */}\r\n+            <Box\r\n+              sx={{\r\n+                textAlign: \"center\",\r\n+                marginBottom: \"20px\",\r\n+                backgroundColor: \"#f8f9fa\",\r\n+                padding: \"20px\",\r\n+                borderRadius: \"8px\",\r\n+              }}\r\n+            >\r\n+              <Typography\r\n+                variant=\"h4\"\r\n                 sx={{\r\n-                    marginBottom: \"20px\",\r\n-                    padding: \"10px 24px\",\r\n-                    fontSize: \"16px\",\r\n-                    fontWeight: \"bold\",\r\n-                    borderRadius: \"8px\",\r\n-                    boxShadow: \"0 4px 6px rgba(0,0,0,0.1)\",\r\n-                    textTransform: \"none\",\r\n+                  fontWeight: \"700\",\r\n+                  color: \"#2c3e50\",\r\n+                  marginBottom: \"5px\",\r\n                 }}\r\n+              >\r\n+                Patient Medical Report\r\n+              </Typography>\r\n+              <Typography variant=\"subtitle1\" sx={{ color: \"#5d6778\" }}>\r\n+                Confidential Medical Documentation\r\n+              </Typography>\r\n+            </Box>\r\n+\r\n+            {/* Patient Information Section */}\r\n+            <Paper\r\n+              elevation={0}\r\n+              sx={{\r\n+                padding: \"20px\",\r\n+                marginBottom: \"25px\",\r\n+                backgroundColor: \"#f8f9fa\",\r\n+                borderRadius: \"8px\",\r\n+                border: \"1px solid #e0e0e0\",\r\n+              }}\r\n             >\r\n-                Download Patient Report\r\n-            </Button>\r\n-            <Box>\r\n+              <Typography\r\n+                variant=\"h6\"\r\n+                sx={{\r\n+                  fontWeight: \"600\",\r\n+                  marginBottom: \"15px\",\r\n+                  color: \"#2c3e50\",\r\n+                  borderBottom: \"2px solid #3498db\",\r\n+                  paddingBottom: \"8px\",\r\n+                  display: \"inline-block\",\r\n+                }}\r\n+              >\r\n+                Patient Information\r\n+              </Typography>\r\n \r\n+              <Grid container spacing={3}>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Name:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                      {form?.first_name} {form?.last_name}\r\n+                    </span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    DOB: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{formatDate(form?.dob)}</span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Phone: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.phone}</span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Email: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.email}</span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={12}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Address:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                      {form?.address}, {form?.post_code}\r\n+                    </span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={12}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Notes: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.notes || \"None\"}</span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+              </Grid>\r\n+            </Paper>\r\n \r\n-                <PDFExport ref={pdfExportComponent} paperSize=\"A4\" margin=\"10px\">\r\n-                    <Card\r\n-                        sx={{\r\n-                            maxWidth: \"800px\",\r\n-                            margin: \"auto\",\r\n-                            backgroundColor: \"#ffffff\",\r\n-                            borderRadius: \"12px\",\r\n-                            boxShadow: \"0 4px 20px rgba(0,0,0,0.08)\",\r\n-                        }}\r\n-                    >\r\n-                        <CardContent sx={{ padding: \"30px\" }}>\r\n-                            {/* Header */}\r\n-                            <Box\r\n-                                sx={{\r\n-                                    textAlign: \"center\",\r\n-                                    marginBottom: \"20px\",\r\n-                                    backgroundColor: \"#f8f9fa\",\r\n-                                    padding: \"20px\",\r\n-                                    borderRadius: \"8px\",\r\n-                                }}\r\n-                            >\r\n-                                <Typography\r\n-                                    variant=\"h4\"\r\n-                                    sx={{\r\n-                                        fontWeight: \"700\",\r\n-                                        color: \"#2c3e50\",\r\n-                                        marginBottom: \"5px\",\r\n-                                    }}\r\n-                                >\r\n-                                    Patient Medical Report\r\n-                                </Typography>\r\n-                                <Typography variant=\"subtitle1\" sx={{ color: \"#5d6778\" }}>\r\n-                                    Confidential Medical Documentation\r\n-                                </Typography>\r\n-                            </Box>\r\n+            {/* Next of Kin Information */}\r\n+            <Paper\r\n+              elevation={0}\r\n+              sx={{\r\n+                padding: \"20px\",\r\n+                marginBottom: \"25px\",\r\n+                backgroundColor: \"#f8f9fa\",\r\n+                borderRadius: \"8px\",\r\n+                border: \"1px solid #e0e0e0\",\r\n+              }}\r\n+            >\r\n+              <Typography\r\n+                variant=\"h6\"\r\n+                sx={{\r\n+                  fontWeight: \"600\",\r\n+                  marginBottom: \"15px\",\r\n+                  color: \"#2c3e50\",\r\n+                  borderBottom: \"2px solid #3498db\",\r\n+                  paddingBottom: \"8px\",\r\n+                  display: \"inline-block\",\r\n+                }}\r\n+              >\r\n+                Next of Kin\r\n+              </Typography>\r\n \r\n-                            {/* Patient Information Section */}\r\n-                            <Paper\r\n-                                elevation={0}\r\n-                                sx={{\r\n-                                    padding: \"20px\",\r\n-                                    marginBottom: \"25px\",\r\n-                                    backgroundColor: \"#f8f9fa\",\r\n-                                    borderRadius: \"8px\",\r\n-                                    border: \"1px solid #e0e0e0\",\r\n-                                }}\r\n-                            >\r\n-                                <Typography\r\n-                                    variant=\"h6\"\r\n-                                    sx={{\r\n-                                        fontWeight: \"600\",\r\n-                                        marginBottom: \"15px\",\r\n-                                        color: \"#2c3e50\",\r\n-                                        borderBottom: \"2px solid #3498db\",\r\n-                                        paddingBottom: \"8px\",\r\n-                                        display: \"inline-block\",\r\n-                                    }}\r\n-                                >\r\n-                                    Patient Information\r\n-                                </Typography>\r\n+              <Grid container spacing={3}>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Name:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.name || \"N/A\"}</span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Phone:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.phone || \"N/A\"}</span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Address:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.address || \"N/A\"}</span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Email:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.email || \"N/A\"}</span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+              </Grid>\r\n+            </Paper>\r\n \r\n-                                <Grid container spacing={3}>\r\n-                                    <Grid item xs={6}>\r\n-                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                                            Name:{\" \"}\r\n-                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                                                {form?.first_name} {form?.last_name}\r\n-                                            </span>\r\n-                                        </Typography>\r\n-                                    </Grid>\r\n-                                    <Grid item xs={6}>\r\n-                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                                            DOB: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{formatDate(form?.dob)}</span>\r\n-                                        </Typography>\r\n-                                    </Grid>\r\n-                                    <Grid item xs={6}>\r\n-                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                                            Phone: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.phone}</span>\r\n-                                        </Typography>\r\n-                                    </Grid>\r\n-                                    <Grid item xs={6}>\r\n-                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                                            Email: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.email}</span>\r\n-                                        </Typography>\r\n-                                    </Grid>\r\n-                                    <Grid item xs={12}>\r\n-                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                                            Address:{\" \"}\r\n-                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                                                {form?.address}, {form?.post_code}\r\n-                                            </span>\r\n-                                        </Typography>\r\n-                                    </Grid>\r\n-                                    <Grid item xs={12}>\r\n-                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                                            Notes: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.notes || \"None\"}</span>\r\n-                                        </Typography>\r\n-                                    </Grid>\r\n-                                </Grid>\r\n-                            </Paper>\r\n+            {/* General Practitioners */}\r\n+            <Paper\r\n+              elevation={0}\r\n+              sx={{\r\n+                padding: \"20px\",\r\n+                marginBottom: \"25px\",\r\n+                backgroundColor: \"#f8f9fa\",\r\n+                borderRadius: \"8px\",\r\n+                border: \"1px solid #e0e0e0\",\r\n+              }}\r\n+            >\r\n+              <Typography\r\n+                variant=\"h6\"\r\n+                sx={{\r\n+                  fontWeight: \"600\",\r\n+                  marginBottom: \"15px\",\r\n+                  color: \"#2c3e50\",\r\n+                  borderBottom: \"2px solid #3498db\",\r\n+                  paddingBottom: \"8px\",\r\n+                  display: \"inline-block\",\r\n+                }}\r\n+              >\r\n+                General Practitioners\r\n+              </Typography>\r\n \r\n-                            {/* Next of Kin Information */}\r\n-                            <Paper\r\n-                                elevation={0}\r\n-                                sx={{\r\n-                                    padding: \"20px\",\r\n-                                    marginBottom: \"25px\",\r\n-                                    backgroundColor: \"#f8f9fa\",\r\n-                                    borderRadius: \"8px\",\r\n-                                    border: \"1px solid #e0e0e0\",\r\n-                                }}\r\n-                            >\r\n-                                <Typography\r\n-                                    variant=\"h6\"\r\n-                                    sx={{\r\n-                                        fontWeight: \"600\",\r\n-                                        marginBottom: \"15px\",\r\n-                                        color: \"#2c3e50\",\r\n-                                        borderBottom: \"2px solid #3498db\",\r\n-                                        paddingBottom: \"8px\",\r\n-                                        display: \"inline-block\",\r\n-                                    }}\r\n-                                >\r\n-                                    Next of Kin\r\n-                                </Typography>\r\n+              <Grid container spacing={3}>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Name:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                      {form?.general_practitioner?.name || \"N/A\"}\r\n+                    </span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Phone:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                      {form?.general_practitioner?.phone || \"N/A\"}\r\n+                    </span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Address:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                      {form?.general_practitioner?.address || \"N/A\"}\r\n+                    </span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Email:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                      {form?.general_practitioner?.email || \"N/A\"}\r\n+                    </span>\r\n+                  </Typography>\r\n+                </Grid>\r\n+              </Grid>\r\n+            </Paper>\r\n \r\n-                                <Grid container spacing={3}>\r\n-                                    <Grid item xs={6}>\r\n-                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                                            Name:{\" \"}\r\n-                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.name || \"N/A\"}</span>\r\n-                                        </Typography>\r\n-                                    </Grid>\r\n-                                    <Grid item xs={6}>\r\n-                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                                            Phone:{\" \"}\r\n-                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.phone || \"N/A\"}</span>\r\n-                                        </Typography>\r\n-                                    </Grid>\r\n-                                    <Grid item xs={6}>\r\n-                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                                            Address:{\" \"}\r\n-                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.address || \"N/A\"}</span>\r\n-                                        </Typography>\r\n-                                    </Grid>\r\n-                                    <Grid item xs={6}>\r\n-                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                                            Email:{\" \"}\r\n-                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.email || \"N/A\"}</span>\r\n-                                        </Typography>\r\n-                                    </Grid>\r\n-                                </Grid>\r\n-                            </Paper>\r\n+            {/* Treatment Plan */}\r\n+            <Paper\r\n+              elevation={0}\r\n+              className=\"kendoPaper2\"\r\n+              sx={{\r\n+                padding: \"20px\",\r\n+                marginBottom: \"25px\",\r\n+                backgroundColor: \"#f8f9fa\",\r\n+                borderRadius: \"8px\",\r\n+                border: \"1px solid #e0e0e0\",\r\n+              }}\r\n+            >\r\n+              <Typography\r\n+                variant=\"h6\"\r\n+                sx={{\r\n+                  fontWeight: \"600\",\r\n+                  marginBottom: \"15px\",\r\n+                  color: \"#2c3e50\",\r\n+                  borderBottom: \"2px solid #3498db\",\r\n+                  paddingBottom: \"8px\",\r\n+                  display: \"inline-block\",\r\n+                }}\r\n+              >\r\n+                Treatment Plan\r\n+              </Typography>\r\n \r\n-                            {/* General Practitioners */}\r\n-                            <Paper\r\n-                                elevation={0}\r\n-                                sx={{\r\n-                                    padding: \"20px\",\r\n-                                    marginBottom: \"25px\",\r\n-                                    backgroundColor: \"#f8f9fa\",\r\n-                                    borderRadius: \"8px\",\r\n-                                    border: \"1px solid #e0e0e0\",\r\n-                                }}\r\n-                            >\r\n-                                <Typography\r\n-                                    variant=\"h6\"\r\n-                                    sx={{\r\n-                                        fontWeight: \"600\",\r\n-                                        marginBottom: \"15px\",\r\n-                                        color: \"#2c3e50\",\r\n-                                        borderBottom: \"2px solid #3498db\",\r\n-                                        paddingBottom: \"8px\",\r\n-                                        display: \"inline-block\",\r\n-                                    }}\r\n-                                >\r\n-                                    General Practitioners\r\n-                                </Typography>\r\n+              <Grid container spacing={3}>\r\n+                <Grid item xs={12}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n+                    Patient Concerns:\r\n+                  </Typography>\r\n+                  <Typography\r\n+                    sx={{\r\n+                      padding: \"10px\",\r\n+                      borderRadius: \"6px\",\r\n+                      border: \"1px solid #e0e0e0\",\r\n+                    }}\r\n+                  >\r\n+                    {form?.treatment_plan?.patient_concerns || \"None specified\"}\r\n+                  </Typography>\r\n+                </Grid>\r\n \r\n-                                <Grid container spacing={3}>\r\n-                                    <Grid item xs={6}>\r\n-                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                                            Name:{\" \"}\r\n-                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                                                {form?.general_practitioner?.name || \"N/A\"}\r\n-                                            </span>\r\n-                                        </Typography>\r\n-                                    </Grid>\r\n-                                    <Grid item xs={6}>\r\n-                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                                            Phone:{\" \"}\r\n-                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                                                {form?.general_practitioner?.phone || \"N/A\"}\r\n-                                            </span>\r\n-                                        </Typography>\r\n-                                    </Grid>\r\n-                                    <Grid item xs={6}>\r\n-                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                                            Address:{\" \"}\r\n-                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                                                {form?.general_practitioner?.address || \"N/A\"}\r\n-                                            </span>\r\n-                                        </Typography>\r\n-                                    </Grid>\r\n-                                    <Grid item xs={6}>\r\n-                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                                            Email:{\" \"}\r\n-                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                                                {form?.general_practitioner?.email || \"N/A\"}\r\n-                                            </span>\r\n-                                        </Typography>\r\n-                                    </Grid>\r\n-                                </Grid>\r\n-                            </Paper>\r\n+                <Grid item xs={12}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n+                    Patient Goals:\r\n+                  </Typography>\r\n+                  <Typography\r\n+                    sx={{\r\n+                      padding: \"10px\",\r\n+                      borderRadius: \"6px\",\r\n+                      border: \"1px solid #e0e0e0\",\r\n+                    }}\r\n+                  >\r\n+                    {form?.treatment_plan?.patient_goals || \"None specified\"}\r\n+                  </Typography>\r\n+                </Grid>\r\n \r\n-                            {/* Treatment Plan */}\r\n-                            <Paper\r\n-                                elevation={0}\r\n-                                className=\"kendoPaper2\"\r\n-                                sx={{\r\n-                                    padding: \"20px\",\r\n-                                    marginBottom: \"25px\",\r\n-                                    backgroundColor: \"#f8f9fa\",\r\n-                                    borderRadius: \"8px\",\r\n-                                    border: \"1px solid #e0e0e0\",\r\n-                                }}\r\n-                            >\r\n-                                <Typography\r\n-                                    variant=\"h6\"\r\n-                                    sx={{\r\n-                                        fontWeight: \"600\",\r\n-                                        marginBottom: \"15px\",\r\n-                                        color: \"#2c3e50\",\r\n-                                        borderBottom: \"2px solid #3498db\",\r\n-                                        paddingBottom: \"8px\",\r\n-                                        display: \"inline-block\",\r\n-                                    }}\r\n-                                >\r\n-                                    Treatment Plan\r\n-                                </Typography>\r\n+                <Grid item xs={12}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n+                    Advised Plan:\r\n+                  </Typography>\r\n+                  <Typography\r\n+                    sx={{\r\n+                      padding: \"10px\",\r\n+                      borderRadius: \"6px\",\r\n+                      border: \"1px solid #e0e0e0\",\r\n+                    }}\r\n+                  >\r\n+                    {form?.treatment_plan?.advised_plan || \"None specified\"}\r\n+                  </Typography>\r\n+                </Grid>\r\n \r\n-                                <Grid container spacing={3}>\r\n-                                    <Grid item xs={12}>\r\n-                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n-                                            Patient Concerns:\r\n-                                        </Typography>\r\n-                                        <Typography\r\n-                                            sx={{\r\n-                                                padding: \"10px\",\r\n+                <Grid item xs={12}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n+                    Expected Result:\r\n+                  </Typography>\r\n+                  <Typography\r\n+                    sx={{\r\n+                      padding: \"10px\",\r\n+                      borderRadius: \"6px\",\r\n+                      border: \"1px solid #e0e0e0\",\r\n+                    }}\r\n+                  >\r\n+                    {form?.treatment_plan?.expected_result || \"None specified\"}\r\n+                  </Typography>\r\n+                </Grid>\r\n \r\n-                                                borderRadius: \"6px\",\r\n-                                                border: \"1px solid #e0e0e0\",\r\n-                                            }}\r\n-                                        >\r\n-                                            {form?.treatment_plan?.patient_concerns || \"None specified\"}\r\n-                                        </Typography>\r\n-                                    </Grid>\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                    Date:{\" \"}\r\n+                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                      {formatDate(form?.treatment_plan?.date)}\r\n+                    </span>\r\n+                  </Typography>\r\n+                </Grid>\r\n \r\n-                                    <Grid item xs={12}>\r\n-                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n-                                            Patient Goals:\r\n-                                        </Typography>\r\n-                                        <Typography\r\n-                                            sx={{\r\n-                                                padding: \"10px\",\r\n+                <Grid item xs={6}>\r\n+                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n+                    Patient Signature:\r\n+                  </Typography>\r\n+                  {imagesBase64?.patientConsent?.[0] && (\r\n+                    <Box\r\n+                      sx={{\r\n+                        border: \"1px solid #e0e0e0\",\r\n+                        borderRadius: \"6px\",\r\n+                        padding: \"10px\",\r\n+                        backgroundColor: \"#ffffff\",\r\n+                        display: \"flex\",\r\n+                        justifyContent: \"center\",\r\n+                      }}\r\n+                    >\r\n+                      <img\r\n+                        src={imagesBase64?.patientConsent?.[0] || \"/placeholder.svg\"}\r\n+                        alt=\"Treatment Plan Sign\"\r\n+                        style={{\r\n+                          width: \"200px\",\r\n+                          borderRadius: \"6px\",\r\n+                        }}\r\n+                      />\r\n+                    </Box>\r\n+                  )}\r\n+                </Grid>\r\n+              </Grid>\r\n+            </Paper>\r\n \r\n-                                                borderRadius: \"6px\",\r\n-                                                border: \"1px solid #e0e0e0\",\r\n-                                            }}\r\n-                                        >\r\n-                                            {form?.treatment_plan?.patient_goals || \"None specified\"}\r\n-                                        </Typography>\r\n-                                    </Grid>\r\n+            {/* Images Section */}\r\n+            <Paper\r\n+              elevation={0}\r\n+              className=\"kendoPaper\"\r\n+              sx={{\r\n+                padding: \"20px\",\r\n+                marginBottom: \"25px\",\r\n+                backgroundColor: \"#f8f9fa\",\r\n+                borderRadius: \"8px\",\r\n+                border: \"1px solid #e0e0e0\",\r\n+              }}\r\n+            >\r\n+              <Typography\r\n+                variant=\"h6\"\r\n+                sx={{\r\n+                  fontWeight: \"600\",\r\n+                  marginBottom: \"15px\",\r\n+                  color: \"#2c3e50\",\r\n+                  borderBottom: \"2px solid #3498db\",\r\n+                  paddingBottom: \"8px\",\r\n+                  display: \"inline-block\",\r\n+                  marginTop: \"25px\",\r\n+                }}\r\n+              >\r\n+                Medical Images\r\n+              </Typography>\r\n \r\n-                                    <Grid item xs={12}>\r\n-                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n-                                            Advised Plan:\r\n-                                        </Typography>\r\n-                                        <Typography\r\n-                                            sx={{\r\n-                                                padding: \"10px\",\r\n+              {/* Batch Images */}\r\n+              <Box sx={{ marginBottom: \"20px\" }}>\r\n+                <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n+                  Batch Images:\r\n+                </Typography>\r\n+                <Box\r\n+                  sx={{\r\n+                    display: \"flex\",\r\n+                    gap: \"15px\",\r\n+                    flexWrap: \"wrap\",\r\n+                    padding: \"15px\",\r\n+                    borderRadius: \"6px\",\r\n+                    border: \"1px solid #e0e0e0\",\r\n+                  }}\r\n+                >\r\n+                  {imagesBase64?.batch?.length > 0 ? (\r\n+                    imagesBase64.batch.map((img, index) => (\r\n+                      <Box\r\n+                        key={index}\r\n+                        sx={{\r\n+                          border: \"1px solid #e0e0e0\",\r\n+                          borderRadius: \"6px\",\r\n+                          padding: \"5px\",\r\n+                          backgroundColor: \"#ffffff\",\r\n+                          boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n+                        }}\r\n+                      >\r\n+                        <img\r\n+                          src={img || \"/placeholder.svg\"}\r\n+                          style={{\r\n+                            width: \"70px\",\r\n+                            height: \"70px\",\r\n+                            objectFit: \"cover\",\r\n+                            borderRadius: \"4px\",\r\n+                          }}\r\n+                        />\r\n+                      </Box>\r\n+                    ))\r\n+                  ) : (\r\n+                    <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No batch images available</Typography>\r\n+                  )}\r\n+                </Box>\r\n+              </Box>\r\n \r\n-                                                borderRadius: \"6px\",\r\n-                                                border: \"1px solid #e0e0e0\",\r\n-                                            }}\r\n-                                        >\r\n-                                            {form?.treatment_plan?.advised_plan || \"None specified\"}\r\n-                                        </Typography>\r\n-                                    </Grid>\r\n+              {/* Before Images */}\r\n+              <Box sx={{ marginBottom: \"20px\" }}>\r\n+                <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n+                  Before Treatment:\r\n+                </Typography>\r\n+                <Box\r\n+                  sx={{\r\n+                    display: \"flex\",\r\n+                    gap: \"15px\",\r\n+                    flexWrap: \"wrap\",\r\n+                    padding: \"15px\",\r\n+                    borderRadius: \"6px\",\r\n+                    border: \"1px solid #e0e0e0\",\r\n+                  }}\r\n+                >\r\n+                  {imagesBase64?.before?.length > 0 ? (\r\n+                    imagesBase64.before.map((img, index) => (\r\n+                      <Box\r\n+                        key={index}\r\n+                        sx={{\r\n+                          border: \"1px solid #e0e0e0\",\r\n+                          borderRadius: \"6px\",\r\n+                          padding: \"5px\",\r\n+                          backgroundColor: \"#ffffff\",\r\n+                          boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n+                        }}\r\n+                      >\r\n+                        <img\r\n+                          src={img || \"/placeholder.svg\"}\r\n+                          alt={`Before ${index + 1}`}\r\n+                          style={{\r\n+                            width: \"70px\",\r\n+                            height: \"70px\",\r\n+                            objectFit: \"cover\",\r\n+                            borderRadius: \"4px\",\r\n+                          }}\r\n+                        />\r\n+                      </Box>\r\n+                    ))\r\n+                  ) : (\r\n\\ No newline at end of file\n+                    <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No before images available</Typography>\r\n+                  )}\r\n+                </Box>\r\n+              </Box>\r\n \r\n-                                    <Grid item xs={12}>\r\n-                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n-                                            Expected Result:\r\n-                                        </Typography>\r\n-                                        <Typography\r\n-                                            sx={{\r\n-                                                padding: \"10px\",\r\n+              {/* After Images */}\r\n+              <Box>\r\n+                <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n+                  After Treatment:\r\n+                </Typography>\r\n+                <Box\r\n+                  sx={{\r\n+                    display: \"flex\",\r\n+                    gap: \"15px\",\r\n+                    flexWrap: \"wrap\",\r\n+                    padding: \"15px\",\r\n+                    borderRadius: \"6px\",\r\n+                    border: \"1px solid #e0e0e0\",\r\n+                  }}\r\n+                >\r\n+                  {imagesBase64?.after?.length > 0 ? (\r\n+                    imagesBase64.after.map((img, index) => (\r\n+                      <Box\r\n+                        key={index}\r\n+                        sx={{\r\n+                          border: \"1px solid #e0e0e0\",\r\n+                          borderRadius: \"6px\",\r\n+                          padding: \"5px\",\r\n+                          backgroundColor: \"#ffffff\",\r\n+                          boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n+                        }}\r\n+                      >\r\n+                        <img\r\n+                          src={img || \"/placeholder.svg\"}\r\n+                          alt={`After ${index + 1}`}\r\n+                          style={{\r\n+                            width: \"70px\",\r\n+                            height: \"70px\",\r\n+                            objectFit: \"cover\",\r\n+                            borderRadius: \"4px\",\r\n+                          }}\r\n+                        />\r\n+                      </Box>\r\n+                    ))\r\n+                  ) : (\r\n+                    <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No after images available</Typography>\r\n+                  )}\r\n+                </Box>\r\n+              </Box>\r\n+            </Paper>\r\n \r\n-                                                borderRadius: \"6px\",\r\n-                                                border: \"1px solid #e0e0e0\",\r\n-                                            }}\r\n-                                        >\r\n-                                            {form?.treatment_plan?.expected_result || \"None specified\"}\r\n-                                        </Typography>\r\n-                                    </Grid>\r\n+            {/* Treatment Records Table - Page Break */}\r\n+            <Box sx={{ pageBreakBefore: \"always\" }}>\r\n+              <Paper\r\n+                elevation={0}\r\n+                sx={{\r\n+                  padding: \"20px\",\r\n+                  marginBottom: \"25px\",\r\n+                  backgroundColor: \"#f8f9fa\",\r\n+                  borderRadius: \"8px\",\r\n+                  border: \"1px solid #e0e0e0\",\r\n+                }}\r\n+              >\r\n+                <Typography\r\n+                  variant=\"h6\"\r\n+                  sx={{\r\n+                    fontWeight: \"600\",\r\n+                    marginBottom: \"15px\",\r\n+                    color: \"#2c3e50\",\r\n+                    borderBottom: \"2px solid #3498db\",\r\n+                    paddingBottom: \"8px\",\r\n+                    display: \"inline-block\",\r\n+                  }}\r\n+                >\r\n+                  Treatment Records\r\n+                </Typography>\r\n \r\n-                                    <Grid item xs={6}>\r\n-                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                                            Date:{\" \"}\r\n-                                            <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                                                {formatDate(form?.treatment_plan?.date)}\r\n-                                            </span>\r\n-                                        </Typography>\r\n-                                    </Grid>\r\n+                <TableContainer component={Paper} elevation={0} sx={{ border: \"1px solid #e0e0e0\" }}>\r\n+                  <Table>\r\n+                    <TableHead sx={{ backgroundColor: \"#f1f8ff\" }}>\r\n+                      <TableRow>\r\n+                        <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Date</TableCell>\r\n+                        <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Description</TableCell>\r\n+                        <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Amount</TableCell>\r\n+                      </TableRow>\r\n+                    </TableHead>\r\n+                    <TableBody>\r\n+                      {form?.treatment_record?.length > 0 ? (\r\n+                        form.treatment_record.map((record, index) => (\r\n+                          <TableRow\r\n+                            key={index}\r\n+                            sx={{\r\n+                              \"&:nth-of-type(odd)\": { backgroundColor: \"#f9f9f9\" },\r\n+                              \"&:hover\": { backgroundColor: \"#f5f5f5\" },\r\n+                            }}\r\n+                          >\r\n+                            <TableCell>{formatDate(record.date)}</TableCell>\r\n+                            <TableCell>{record.description}</TableCell>\r\n+                            <TableCell>${record.amount}</TableCell>\r\n+                          </TableRow>\r\n+                        ))\r\n+                      ) : (\r\n+                        <TableRow>\r\n+                          <TableCell colSpan={3} sx={{ textAlign: \"center\", color: \"#7f8c8d\", fontStyle: \"italic\" }}>\r\n+                            No treatment records available\r\n+                          </TableCell>\r\n+                        </TableRow>\r\n+                      )}\r\n+                    </TableBody>\r\n+                  </Table>\r\n+                </TableContainer>\r\n+              </Paper>\r\n \r\n-                                    <Grid item xs={6}>\r\n-                                        <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n-                                            Patient Signature:\r\n-                                        </Typography>\r\n-                                        {imagesBase64?.patientConsent?.[0] && (\r\n-                                            <Box\r\n-                                                sx={{\r\n-                                                    border: \"1px solid #e0e0e0\",\r\n-                                                    borderRadius: \"6px\",\r\n-                                                    padding: \"10px\",\r\n-                                                    backgroundColor: \"#ffffff\",\r\n-                                                    display: \"flex\",\r\n-                                                    justifyContent: \"center\",\r\n-                                                }}\r\n-                                            >\r\n-                                                <img\r\n-                                                    src={imagesBase64?.patientConsent?.[0] || \"/placeholder.svg\"}\r\n-                                                    alt=\"Treatment Plan Sign\"\r\n-                                                    style={{\r\n-                                                        width: \"200px\",\r\n-                                                        borderRadius: \"6px\",\r\n-                                                    }}\r\n-                                                />\r\n-                                            </Box>\r\n-                                        )}\r\n-                                    </Grid>\r\n-                                </Grid>\r\n-                            </Paper>\r\n+              {/* Further Treatment Section */}\r\n+              <Paper\r\n+                elevation={0}\r\n+                sx={{\r\n+                  padding: \"20px\",\r\n+                  marginBottom: \"25px\",\r\n+                  backgroundColor: \"#f8f9fa\",\r\n+                  borderRadius: \"8px\",\r\n+                  border: \"1px solid #e0e0e0\",\r\n+                }}\r\n+              >\r\n+                <Typography\r\n+                  variant=\"h6\"\r\n+                  sx={{\r\n+                    fontWeight: \"600\",\r\n+                    marginBottom: \"15px\",\r\n+                    color: \"#2c3e50\",\r\n+                    borderBottom: \"2px solid #3498db\",\r\n+                    paddingBottom: \"8px\",\r\n+                    display: \"inline-block\",\r\n+                  }}\r\n+                >\r\n+                  Further Treatment\r\n+                </Typography>\r\n \r\n-                            {/* Images Section */}\r\n-                            <Paper\r\n-                                elevation={0}\r\n-                                className=\"kendoPaper\"\r\n-                                sx={{\r\n-                                    padding: \"20px\",\r\n-                                    marginBottom: \"25px\",\r\n-                                    backgroundColor: \"#f8f9fa\",\r\n-                                    borderRadius: \"8px\",\r\n-                                    border: \"1px solid #e0e0e0\",\r\n-                                }}\r\n-                            >\r\n-                                <Typography\r\n-                                    variant=\"h6\"\r\n-                                    sx={{\r\n-                                        fontWeight: \"600\",\r\n-                                        marginBottom: \"15px\",\r\n-                                        color: \"#2c3e50\",\r\n-                                        borderBottom: \"2px solid #3498db\",\r\n-                                        paddingBottom: \"8px\",\r\n-                                        display: \"inline-block\",\r\n-                                        marginTop: \"25px\",\r\n-                                    }}\r\n-                                >\r\n-                                    Medical Images\r\n-                                </Typography>\r\n+                <Grid container spacing={3}>\r\n+                  {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n+                    <React.Fragment key={`treatment-${index}`}>\r\n+                      {/* Date Grid Item */}\r\n+                      <Grid item xs={12} sm={6} md={6}>\r\n+                        <Box\r\n+                          sx={{\r\n+                            padding: \"15px\",\r\n+                            borderRadius: \"6px\",\r\n+                          }}\r\n+                        >\r\n+                          <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                            Date:\r\n+                          </Typography>\r\n+                          <Typography variant=\"body2\" sx={{ color: \"#2c3e50\", marginTop: \"5px\" }}>\r\n+                            {form?.further_treatment?.[index]?.date\r\n+                              ? formatDate(form.further_treatment[index].date)\r\n+                              : \"No Date Available\"}\r\n+                          </Typography>\r\n+                        </Box>\r\n+                      </Grid>\r\n \r\n-                                {/* Batch Images */}\r\n-                                <Box sx={{ marginBottom: \"20px\" }}>\r\n-                                    <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n-                                        Batch Images:\r\n-                                    </Typography>\r\n-                                    <Box\r\n-                                        sx={{\r\n-                                            display: \"flex\",\r\n-                                            gap: \"15px\",\r\n-                                            flexWrap: \"wrap\",\r\n+                      {/* Signature Grid Item */}\r\n+                      <Grid item xs={12} sm={6} md={6}>\r\n+                        <Box\r\n+                          sx={{\r\n+                            padding: \"15px\",\r\n+                            borderRadius: \"6px\",\r\n+                          }}\r\n+                        >\r\n+                          <Typography\r\n+                            variant=\"body1\"\r\n+                            sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}\r\n+                          >\r\n+                            Patient Signature:\r\n+                          </Typography>\r\n+                          <Box\r\n+                            sx={{\r\n+                              display: \"flex\",\r\n+                              justifyContent: \"center\",\r\n+                              border: \"1px solid #e0e0e0\",\r\n+                              borderRadius: \"6px\",\r\n+                              padding: \"10px\",\r\n+                              backgroundColor: \"#ffffff\",\r\n+                            }}\r\n+                          >\r\n+                            <img\r\n+                              src={treatment || \"/placeholder.svg\"}\r\n+                              alt=\"Further Treatment Sign\"\r\n+                              style={{\r\n+                                width: \"200px\",\r\n+                                borderRadius: \"6px\",\r\n+                              }}\r\n+                            />\r\n+                          </Box>\r\n+                        </Box>\r\n+                      </Grid>\r\n+                    </React.Fragment>\r\n+                  ))}\r\n \r\n-                                            padding: \"15px\",\r\n-                                            borderRadius: \"6px\",\r\n-                                            border: \"1px solid #e0e0e0\",\r\n-                                        }}\r\n-                                    >\r\n-                                        {imagesBase64?.batch?.length > 0 ? (\r\n-                                            imagesBase64.batch.map((img, index) => (\r\n-                                                <Box\r\n-                                                    key={index}\r\n-                                                    sx={{\r\n-                                                        border: \"1px solid #e0e0e0\",\r\n-                                                        borderRadius: \"6px\",\r\n-                                                        padding: \"5px\",\r\n-                                                        backgroundColor: \"#ffffff\",\r\n-                                                        boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n-                                                    }}\r\n-                                                >\r\n-                                                    <img\r\n-                                                        src={img || \"/placeholder.svg\"}\r\n-                                                        style={{\r\n-                                                            width: \"70px\",\r\n-                                                            height: \"70px\",\r\n-                                                            objectFit: \"cover\",\r\n-                                                            borderRadius: \"4px\",\r\n-                                                        }}\r\n-                                                    />\r\n-                                                </Box>\r\n-                                            ))\r\n-                                        ) : (\r\n-                                            <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No batch images available</Typography>\r\n-                                        )}\r\n-                                    </Box>\r\n-                                </Box>\r\n+                  {(!imagesBase64?.furtherTreatment || imagesBase64.furtherTreatment.length === 0) && (\r\n+                    <Grid item xs={12}>\r\n+                      <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\", textAlign: \"center\", padding: \"20px\" }}>\r\n+                        No further treatment information available\r\n+                      </Typography>\r\n+                    </Grid>\r\n+                  )}\r\n+                </Grid>\r\n+              </Paper>\r\n \r\n-                                {/* Before Images */}\r\n-                                <Box sx={{ marginBottom: \"20px\" }}>\r\n-                                    <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n-                                        Before Treatment:\r\n-                                    </Typography>\r\n-                                    <Box\r\n-                                        sx={{\r\n-                                            display: \"flex\",\r\n-                                            gap: \"15px\",\r\n-                                            flexWrap: \"wrap\",\r\n+              {/* Patient Consent */}\r\n+              <Paper\r\n+                elevation={0}\r\n+                sx={{\r\n+                  padding: \"20px\",\r\n+                  marginBottom: \"25px\",\r\n+                  backgroundColor: \"#f8f9fa\",\r\n+                  borderRadius: \"8px\",\r\n+                  border: \"1px solid #e0e0e0\",\r\n+                }}\r\n+              >\r\n+                <Typography\r\n+                  variant=\"h6\"\r\n+                  sx={{\r\n+                    fontWeight: \"600\",\r\n+                    marginBottom: \"15px\",\r\n+                    color: \"#2c3e50\",\r\n+                    borderBottom: \"2px solid #3498db\",\r\n+                    paddingBottom: \"8px\",\r\n+                    display: \"inline-block\",\r\n+                  }}\r\n+                >\r\n+                  Patient Consent\r\n+                </Typography>\r\n \r\n-                                            padding: \"15px\",\r\n-                                            borderRadius: \"6px\",\r\n-                                            border: \"1px solid #e0e0e0\",\r\n-                                        }}\r\n-                                    >\r\n-                                        {imagesBase64?.before?.length > 0 ? (\r\n-                                            imagesBase64.before.map((img, index) => (\r\n-                                                <Box\r\n-                                                    key={index}\r\n-                                                    sx={{\r\n-                                                        border: \"1px solid #e0e0e0\",\r\n-                                                        borderRadius: \"6px\",\r\n-                                                        padding: \"5px\",\r\n-                                                        backgroundColor: \"#ffffff\",\r\n-                                                        boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n-                                                    }}\r\n-                                                >\r\n-                                                    <img\r\n-                                                        src={img || \"/placeholder.svg\"}\r\n-                                                        alt={`Before ${index + 1}`}\r\n-                                                        style={{\r\n-                                                            width: \"70px\",\r\n-                                                            height: \"70px\",\r\n-                                                            objectFit: \"cover\",\r\n-                                                            borderRadius: \"4px\",\r\n-                                                        }}\r\n-                                                    />\r\n-                                                </Box>\r\n-                                            ))\r\n-                                        ) : (\r\n-                                            <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No before images available</Typography>\r\n-                                        )}\r\n-                                    </Box>\r\n-                                </Box>\r\n+                <Grid container spacing={3}>\r\n+                  <Grid item xs={12} sm={6} md={6}>\r\n+                    <Box\r\n+                      sx={{\r\n+                        padding: \"15px\",\r\n+                        borderRadius: \"6px\",\r\n+                      }}\r\n+                    >\r\n+                      <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}>\r\n+                        Consent Details:\r\n+                      </Typography>\r\n+                      <Typography variant=\"body2\" sx={{ color: \"#2c3e50\" }}>\r\n+                        {form?.patient_consent?.details || \"No Patient Consent Details Available\"}\r\n+                      </Typography>\r\n+                    </Box>\r\n+                  </Grid>\r\n \r\n-                                {/* After Images */}\r\n-                                <Box>\r\n-                                    <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n-                                        After Treatment:\r\n-                                    </Typography>\r\n-                                    <Box\r\n-                                        sx={{\r\n-                                            display: \"flex\",\r\n-                                            gap: \"15px\",\r\n-                                            flexWrap: \"wrap\",\r\n+                  <Grid item xs={12} sm={6} md={6}>\r\n+                    <Box\r\n+                      sx={{\r\n+                        padding: \"15px\",\r\n+                        borderRadius: \"6px\",\r\n+                      }}\r\n+                    >\r\n+                      <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}>\r\n+                        Patient Signature:\r\n+                      </Typography>\r\n+                      {imagesBase64?.patientConsent?.[0] ? (\r\n+                        <Box\r\n+                          sx={{\r\n+                            display: \"flex\",\r\n+                            justifyContent: \"center\",\r\n+                            border: \"1px solid #e0e0e0\",\r\n+                            borderRadius: \"6px\",\r\n+                            padding: \"10px\",\r\n+                            backgroundColor: \"#ffffff\",\r\n+                          }}\r\n+                        >\r\n+                          <img\r\n+                            src={imagesBase64.patientConsent[0] || \"/placeholder.svg\"}\r\n+                            alt=\"Patient Consent Signature\"\r\n+                            style={{\r\n+                              width: \"200px\",\r\n+                              borderRadius: \"6px\",\r\n+                            }}\r\n+                          />\r\n+                        </Box>\r\n+                      ) : (\r\n+                        <Typography\r\n+                          sx={{ color: \"#7f8c8d\", fontStyle: \"italic\", textAlign: \"center\", padding: \"20px\" }}\r\n+                        >\r\n+                          No signature available\r\n+                        </Typography>\r\n+                      )}\r\n+                    </Box>\r\n+                  </Grid>\r\n+                </Grid>\r\n+              </Paper>\r\n \r\n-                                            padding: \"15px\",\r\n-                                            borderRadius: \"6px\",\r\n-                                            border: \"1px solid #e0e0e0\",\r\n-                                        }}\r\n-                                    >\r\n-                                        {imagesBase64?.after?.length > 0 ? (\r\n-                                            imagesBase64.after.map((img, index) => (\r\n-                                                <Box\r\n-                                                    key={index}\r\n-                                                    sx={{\r\n-                                                        border: \"1px solid #e0e0e0\",\r\n-                                                        borderRadius: \"6px\",\r\n-                                                        padding: \"5px\",\r\n-                                                        backgroundColor: \"#ffffff\",\r\n-                                                        boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n-                                                    }}\r\n-                                                >\r\n-                                                    <img\r\n-                                                        src={img || \"/placeholder.svg\"}\r\n-                                                        alt={`After ${index + 1}`}\r\n-                                                        style={{\r\n-                                                            width: \"70px\",\r\n-                                                            height: \"70px\",\r\n-                                                            objectFit: \"cover\",\r\n-                                                            borderRadius: \"4px\",\r\n-                                                        }}\r\n-                                                    />\r\n-                                                </Box>\r\n-                                            ))\r\n-                                        ) : (\r\n-                                            <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No after images available</Typography>\r\n-                                        )}\r\n-                                    </Box>\r\n-                                </Box>\r\n-                            </Paper>\r\n+              {/* Side Effects */}\r\n+              <Paper\r\n+                elevation={0}\r\n+                sx={{\r\n+                  padding: \"20px\",\r\n+                  backgroundColor: \"#f8f9fa\",\r\n+                  borderRadius: \"8px\",\r\n+                  border: \"1px solid #e0e0e0\",\r\n+                }}\r\n+              >\r\n+                <Typography\r\n+                  variant=\"h6\"\r\n+                  sx={{\r\n+                    fontWeight: \"600\",\r\n+                    marginBottom: \"15px\",\r\n+                    color: \"#2c3e50\",\r\n+                    borderBottom: \"2px solid #3498db\",\r\n+                    paddingBottom: \"8px\",\r\n+                    display: \"inline-block\",\r\n+                  }}\r\n+                >\r\n+                  Patient Side Effects\r\n+                </Typography>\r\n \r\n-                            {/* Treatment Records Table - Page Break */}\r\n-                            <Box sx={{ pageBreakBefore: \"always\" }}>\r\n-                                <Paper\r\n-                                    elevation={0}\r\n-                                    sx={{\r\n-                                        padding: \"20px\",\r\n-                                        marginBottom: \"25px\",\r\n-                                        backgroundColor: \"#f8f9fa\",\r\n-                                        borderRadius: \"8px\",\r\n-                                        border: \"1px solid #e0e0e0\",\r\n-                                    }}\r\n-                                >\r\n-                                    <Typography\r\n-                                        variant=\"h6\"\r\n-                                        sx={{\r\n-                                            fontWeight: \"600\",\r\n-                                            marginBottom: \"15px\",\r\n-                                            color: \"#2c3e50\",\r\n-                                            borderBottom: \"2px solid #3498db\",\r\n-                                            paddingBottom: \"8px\",\r\n-                                            display: \"inline-block\",\r\n-                                        }}\r\n-                                    >\r\n-                                        Treatment Records\r\n-                                    </Typography>\r\n+                <Box\r\n+                  sx={{\r\n+                    padding: \"15px\",\r\n+                    borderRadius: \"6px\",\r\n+                    backgroundColor: \"#ffffff\",\r\n+                    border: \"1px solid #e0e0e0\",\r\n+                  }}\r\n+                >\r\n+                  <Typography variant=\"body2\" sx={{ color: \"#2c3e50\" }}>\r\n+                    {form?.side_effect?.details || \"No Side Effects Reported\"}\r\n+                  </Typography>\r\n+                </Box>\r\n+              </Paper>\r\n \r\n-                                    <TableContainer component={Paper} elevation={0} sx={{ border: \"1px solid #e0e0e0\" }}>\r\n-                                        <Table>\r\n-                                            <TableHead sx={{ backgroundColor: \"#f1f8ff\" }}>\r\n-                                                <TableRow>\r\n-                                                    <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Date</TableCell>\r\n-                                                    <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Description</TableCell>\r\n-                                                    <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Amount</TableCell>\r\n-                                                </TableRow>\r\n-                                            </TableHead>\r\n-                                            <TableBody>\r\n-                                                {form?.treatment_record?.length > 0 ? (\r\n-                                                    form.treatment_record.map((record, index) => (\r\n-                                                        <TableRow\r\n-                                                            key={index}\r\n-                                                            sx={{\r\n-                                                                \"&:nth-of-type(odd)\": { backgroundColor: \"#f9f9f9\" },\r\n-                                                                \"&:hover\": { backgroundColor: \"#f5f5f5\" },\r\n-                                                            }}\r\n-                                                        >\r\n-                                                            <TableCell>{formatDate(record.date)}</TableCell>\r\n-                                                            <TableCell>{record.description}</TableCell>\r\n-                                                            <TableCell>${record.amount}</TableCell>\r\n-                                                        </TableRow>\r\n-                                                    ))\r\n-                                                ) : (\r\n-                                                    <TableRow>\r\n-                                                        <TableCell colSpan={3} sx={{ textAlign: \"center\", color: \"#7f8c8d\", fontStyle: \"italic\" }}>\r\n-                                                            No treatment records available\r\n-                                                        </TableCell>\r\n-                                                    </TableRow>\r\n-                                                )}\r\n-                                            </TableBody>\r\n-                                        </Table>\r\n-                                    </TableContainer>\r\n-                                </Paper>\r\n-\r\n-                                {/* Further Treatment Section */}\r\n-                                <Paper\r\n-                                    elevation={0}\r\n-                                    sx={{\r\n-                                        padding: \"20px\",\r\n-                                        marginBottom: \"25px\",\r\n-                                        backgroundColor: \"#f8f9fa\",\r\n-                                        borderRadius: \"8px\",\r\n-                                        border: \"1px solid #e0e0e0\",\r\n-                                    }}\r\n-                                >\r\n-                                    <Typography\r\n-                                        variant=\"h6\"\r\n-                                        sx={{\r\n-                                            fontWeight: \"600\",\r\n-                                            marginBottom: \"15px\",\r\n-                                            color: \"#2c3e50\",\r\n-                                            borderBottom: \"2px solid #3498db\",\r\n-                                            paddingBottom: \"8px\",\r\n-                                            display: \"inline-block\",\r\n-                                        }}\r\n-                                    >\r\n-                                        Further Treatment\r\n-                                    </Typography>\r\n-\r\n-                                    <Grid container spacing={3}>\r\n-                                        {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                                            <React.Fragment key={`treatment-${index}`}>\r\n-                                                {/* Date Grid Item */}\r\n-                                                <Grid item xs={12} sm={6} md={6}>\r\n-                                                    <Box\r\n-                                                        sx={{\r\n-                                                            padding: \"15px\",\r\n-                                                            borderRadius: \"6px\",\r\n-\r\n-\r\n-                                                        }}\r\n-                                                    >\r\n-                                                        <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                                                            Date:\r\n-                                                        </Typography>\r\n-                                                        <Typography variant=\"body2\" sx={{ color: \"#2c3e50\", marginTop: \"5px\" }}>\r\n-                                                            {form?.further_treatment?.[index]?.date\r\n-                                                                ? formatDate(form.further_treatment[index].date)\r\n-                                                                : \"No Date Available\"}\r\n-                                                        </Typography>\r\n-                                                    </Box>\r\n-                                                </Grid>\r\n-\r\n-                                                {/* Signature Grid Item */}\r\n-                                                <Grid item xs={12} sm={6} md={6}>\r\n-                                                    <Box\r\n-                                                        sx={{\r\n-                                                            padding: \"15px\",\r\n-                                                            borderRadius: \"6px\",\r\n-\r\n-                                                        }}\r\n-                                                    >\r\n-                                                        <Typography\r\n-                                                            variant=\"body1\"\r\n-                                                            sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}\r\n-                                                        >\r\n-                                                            Patient Signature:\r\n-                                                        </Typography>\r\n-                                                        <Box\r\n-                                                            sx={{\r\n-                                                                display: \"flex\",\r\n-                                                                justifyContent: \"center\",\r\n-                                                                border: \"1px solid #e0e0e0\",\r\n-                                                                borderRadius: \"6px\",\r\n-                                                                padding: \"10px\",\r\n-                                                                backgroundColor: \"#ffffff\",\r\n-                                                            }}\r\n-                                                        >\r\n-                                                            <img\r\n-                                                                src={treatment || \"/placeholder.svg\"}\r\n-                                                                alt=\"Further Treatment Sign\"\r\n-                                                                style={{\r\n-                                                                    width: \"200px\",\r\n-                                                                    borderRadius: \"6px\",\r\n-                                                                }}\r\n-                                                            />\r\n-                                                        </Box>\r\n-                                                    </Box>\r\n-                                                </Grid>\r\n-                                            </React.Fragment>\r\n-                                        ))}\r\n-\r\n-                                        {(!imagesBase64?.furtherTreatment || imagesBase64.furtherTreatment.length === 0) && (\r\n-                                            <Grid item xs={12}>\r\n-                                                <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\", textAlign: \"center\", padding: \"20px\" }}>\r\n-                                                    No further treatment information available\r\n-                                                </Typography>\r\n-                                            </Grid>\r\n-                                        )}\r\n-                                    </Grid>\r\n-                                </Paper>\r\n-\r\n-                                {/* Patient Consent */}\r\n-                                <Paper\r\n-                                    elevation={0}\r\n-                                    sx={{\r\n-                                        padding: \"20px\",\r\n-                                        marginBottom: \"25px\",\r\n-                                        backgroundColor: \"#f8f9fa\",\r\n-                                        borderRadius: \"8px\",\r\n-                                        border: \"1px solid #e0e0e0\",\r\n-\r\n-\r\n-                                    }}\r\n-                                >\r\n-                                    <Typography\r\n-                                        variant=\"h6\"\r\n-                                        sx={{\r\n-                                            fontWeight: \"600\",\r\n-                                            marginBottom: \"15px\",\r\n-                                            color: \"#2c3e50\",\r\n-                                            borderBottom: \"2px solid #3498db\",\r\n-                                            paddingBottom: \"8px\",\r\n-                                            display: \"inline-block\",\r\n-                                        }}\r\n-                                    >\r\n-                                        Patient Consent\r\n-                                    </Typography>\r\n-\r\n-                                    <Grid container spacing={3}>\r\n-                                        <Grid item xs={12} sm={6} md={6}>\r\n-                                            <Box\r\n-                                                sx={{\r\n-                                                    padding: \"15px\",\r\n-                                                    borderRadius: \"6px\",\r\n-\r\n-\r\n-                                                }}\r\n-                                            >\r\n-                                                <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}>\r\n-                                                    Consent Details:\r\n-                                                </Typography>\r\n-                                                <Typography variant=\"body2\" sx={{ color: \"#2c3e50\" }}>\r\n-                                                    {form?.patient_consent?.details || \"No Patient Consent Details Available\"}\r\n-                                                </Typography>\r\n-                                            </Box>\r\n-                                        </Grid>\r\n-\r\n-                                        <Grid item xs={12} sm={6} md={6}>\r\n-                                            <Box\r\n-                                                sx={{\r\n-                                                    padding: \"15px\",\r\n-                                                    borderRadius: \"6px\",\r\n-\r\n-\r\n-                                                }}\r\n-                                            >\r\n-                                                <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}>\r\n-                                                    Patient Signature:\r\n-                                                </Typography>\r\n-                                                {imagesBase64?.patientConsent?.[0] ? (\r\n-                                                    <Box\r\n-                                                        sx={{\r\n-                                                            display: \"flex\",\r\n-                                                            justifyContent: \"center\",\r\n-                                                            border: \"1px solid #e0e0e0\",\r\n-                                                            borderRadius: \"6px\",\r\n-                                                            padding: \"10px\",\r\n-                                                            backgroundColor: \"#ffffff\",\r\n-                                                        }}\r\n-                                                    >\r\n-                                                        <img\r\n-                                                            src={imagesBase64.patientConsent[0] || \"/placeholder.svg\"}\r\n-                                                            alt=\"Patient Consent Signature\"\r\n-                                                            style={{\r\n-                                                                width: \"200px\",\r\n-                                                                borderRadius: \"6px\",\r\n-                                                            }}\r\n-                                                        />\r\n-                                                    </Box>\r\n-                                                ) : (\r\n-                                                    <Typography\r\n-                                                        sx={{ color: \"#7f8c8d\", fontStyle: \"italic\", textAlign: \"center\", padding: \"20px\" }}\r\n-                                                    >\r\n-                                                        No signature available\r\n-                                                    </Typography>\r\n-                                                )}\r\n-                                            </Box>\r\n-                                        </Grid>\r\n-                                    </Grid>\r\n-                                </Paper>\r\n-\r\n-                                {/* Side Effects */}\r\n-                                <Paper\r\n-                                    elevation={0}\r\n-                                    sx={{\r\n-                                        padding: \"20px\",\r\n-                                        backgroundColor: \"#f8f9fa\",\r\n-                                        borderRadius: \"8px\",\r\n-                                        border: \"1px solid #e0e0e0\",\r\n-                                    }}\r\n-                                >\r\n-                                    <Typography\r\n-                                        variant=\"h6\"\r\n-                                        sx={{\r\n-                                            fontWeight: \"600\",\r\n-                                            marginBottom: \"15px\",\r\n-                                            color: \"#2c3e50\",\r\n-                                            borderBottom: \"2px solid #3498db\",\r\n-                                            paddingBottom: \"8px\",\r\n-                                            display: \"inline-block\",\r\n-                                        }}\r\n-                                    >\r\n-                                        Patient Side Effects\r\n-                                    </Typography>\r\n-\r\n-                                    <Box\r\n-                                        sx={{\r\n-                                            padding: \"15px\",\r\n-                                            borderRadius: \"6px\",\r\n-                                            backgroundColor: \"#ffffff\",\r\n-                                            border: \"1px solid #e0e0e0\",\r\n-                                        }}\r\n-                                    >\r\n-                                        <Typography variant=\"body2\" sx={{ color: \"#2c3e50\" }}>\r\n-                                            {form?.side_effect?.details || \"No Side Effects Reported\"}\r\n-                                        </Typography>\r\n-                                    </Box>\r\n-                                </Paper>\r\n-\r\n-                                {/* Footer */}\r\n-                                <Box\r\n-                                    sx={{\r\n-                                        marginTop: \"30px\",\r\n-                                        textAlign: \"center\",\r\n-                                        padding: \"15px\",\r\n-                                        borderTop: \"1px solid #e0e0e0\",\r\n-                                    }}\r\n-                                >\r\n-                                    <Typography variant=\"body2\" sx={{ color: \"#7f8c8d\" }}>\r\n-                                        This document is confidential and contains private medical information.\r\n-                                    </Typography>\r\n-                                    <Typography variant=\"body2\" sx={{ color: \"#7f8c8d\", marginTop: \"5px\" }}>\r\n-                                        Generated on: {new Date().toLocaleDateString()}\r\n-                                    </Typography>\r\n-                                </Box>\r\n-                            </Box>\r\n-                        </CardContent>\r\n-                    </Card>\r\n-                </PDFExport>\r\n+              {/* Footer */}\r\n+              <Box\r\n+                sx={{\r\n+                  marginTop: \"30px\",\r\n+                  textAlign: \"center\",\r\n+                  padding: \"15px\",\r\n+                  borderTop: \"1px solid #e0e0e0\",\r\n+                }}\r\n+              >\r\n+                <Typography variant=\"body2\" sx={{ color: \"#7f8c8d\" }}>\r\n+                  This document is confidential and contains private medical information.\r\n+                </Typography>\r\n+                <Typography variant=\"body2\" sx={{ color: \"#7f8c8d\", marginTop: \"5px\" }}>\r\n+                  Generated on: {new Date().toLocaleDateString()}\r\n+                </Typography>\r\n+              </Box>\r\n             </Box>\r\n-        </div>\r\n-    )\r\n+          </CardContent>\r\n+        </Card>\r\n+      </PDFExport>\r\n+    </div>\r\n+  )\r\n }\r\n \r\n-export default PatientPDF\n+export default PatientPDF\r\n+\r\n"
                },
                {
                    "date": 1743758467944,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -95,9 +95,9 @@\n     })\r\n   }\r\n \r\n   // Function to manually trigger PDF download\r\n-  const handleExportWithComponent = () => {\r\n+  const handleExportWithComponent = (pdfExportComponent) => {\r\n     if (pdfExportComponent.current) {\r\n       pdfExportComponent.current.save()\r\n     }\r\n   }\r\n@@ -923,5 +923,6 @@\n     </div>\r\n   )\r\n }\r\n \r\n-export default PatientPDF\n\\ No newline at end of file\n+export default PatientPDF\r\n+\r\n"
                },
                {
                    "date": 1743758628326,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,9 @@\n     img.src = imgUrl\r\n   })\r\n }\r\n \r\n-const PatientPDF = ({ form }) => {\r\n+const PatientPDF = ({ form ,ref}) => {\r\n   const pdfExportComponent = useRef(null)\r\n   const [imagesBase64, setImagesBase64] = useState({})\r\n   const [isLoading, setIsLoading] = useState(true)\r\n \r\n"
                },
                {
                    "date": 1743758695183,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -94,14 +94,8 @@\n       day: \"numeric\",\r\n     })\r\n   }\r\n \r\n-  // Function to manually trigger PDF download\r\n-  const handleExportWithComponent = (pdfExportComponent) => {\r\n-    if (pdfExportComponent.current) {\r\n-      pdfExportComponent.current.save()\r\n-    }\r\n-  }\r\n \r\n   return (\r\n     <div style={{ position: \"fixed\", left: \"-9999px\" }}>\r\n       {isLoading ? (\r\n"
                },
                {
                    "date": 1743758704966,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -102,9 +102,9 @@\n         <Button variant=\"contained\" color=\"primary\" disabled>\r\n           Preparing PDF...\r\n         </Button>\r\n       ) : (\r\n-        <Button variant=\"contained\" color=\"primary\" onClick={handleExportWithComponent}>\r\n+        <Button variant=\"contained\" color=\"primary\" >\r\n           Download Patient Report\r\n         </Button>\r\n       )}\r\n \r\n"
                },
                {
                    "date": 1743758721503,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,9 +108,9 @@\n         </Button>\r\n       )}\r\n \r\n       <PDFExport\r\n-        ref={pdfExportComponent}\r\n+        ref={ref}\r\n         paperSize=\"A4\"\r\n         margin=\"10px\"\r\n         fileName={`Patient_Report_${form?.first_name || \"\"}_${form?.last_name || \"\"}`}\r\n       >\r\n"
                },
                {
                    "date": 1743758731386,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,9 +39,9 @@\n   })\r\n }\r\n \r\n const PatientPDF = ({ form ,ref}) => {\r\n-  const pdfExportComponent = useRef(null)\r\n+\r\n   const [imagesBase64, setImagesBase64] = useState({})\r\n   const [isLoading, setIsLoading] = useState(true)\r\n \r\n   useEffect(() => {\r\n"
                },
                {
                    "date": 1743758918391,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,8 +16,9 @@\n   TableRow,\r\n   Box,\r\n   Paper,\r\n } from \"@mui/material\"\r\n+import { handleExportWithComponent } from \"../../.lh/src/utils\"\r\n \r\n // Function to convert image URL to Base64\r\n const toBase64 = (url) => {\r\n   return new Promise((resolve, reject) => {\r\n@@ -82,8 +83,10 @@\n       }\r\n     }\r\n \r\n     fetchImagesAsBase64()\r\n+\r\n+    handleExportWithComponent(ref)\r\n   }, [form])\r\n \r\n   // Format date function\r\n   const formatDate = (dateString) => {\r\n"
                },
                {
                    "date": 1743758962096,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,924 +2,926 @@\n \r\n import React, { useRef, useEffect, useState } from \"react\"\r\n import { PDFExport } from \"@progress/kendo-react-pdf\"\r\n import {\r\n-  Button,\r\n-  Card,\r\n-  CardContent,\r\n-  Typography,\r\n-  Grid,\r\n-  Table,\r\n-  TableBody,\r\n-  TableCell,\r\n-  TableContainer,\r\n-  TableHead,\r\n-  TableRow,\r\n-  Box,\r\n-  Paper,\r\n+    Button,\r\n+    Card,\r\n+    CardContent,\r\n+    Typography,\r\n+    Grid,\r\n+    Table,\r\n+    TableBody,\r\n+    TableCell,\r\n+    TableContainer,\r\n+    TableHead,\r\n+    TableRow,\r\n+    Box,\r\n+    Paper,\r\n } from \"@mui/material\"\r\n import { handleExportWithComponent } from \"../../.lh/src/utils\"\r\n \r\n // Function to convert image URL to Base64\r\n const toBase64 = (url) => {\r\n-  return new Promise((resolve, reject) => {\r\n-    const proxyUrl = \"https://corsproxy.io/?url=\"\r\n-    const imgUrl = proxyUrl + encodeURIComponent(url)\r\n+    return new Promise((resolve, reject) => {\r\n+        const proxyUrl = \"https://corsproxy.io/?url=\"\r\n+        const imgUrl = proxyUrl + encodeURIComponent(url)\r\n \r\n-    const img = new Image()\r\n-    img.crossOrigin = \"Anonymous\"\r\n-    img.onload = () => {\r\n-      const canvas = document.createElement(\"canvas\")\r\n-      canvas.width = img.width\r\n-      canvas.height = img.height\r\n-      const ctx = canvas.getContext(\"2d\")\r\n-      ctx.drawImage(img, 0, 0)\r\n-      resolve(canvas.toDataURL())\r\n-    }\r\n-    img.onerror = reject\r\n-    img.src = imgUrl\r\n-  })\r\n+        const img = new Image()\r\n+        img.crossOrigin = \"Anonymous\"\r\n+        img.onload = () => {\r\n+            const canvas = document.createElement(\"canvas\")\r\n+            canvas.width = img.width\r\n+            canvas.height = img.height\r\n+            const ctx = canvas.getContext(\"2d\")\r\n+            ctx.drawImage(img, 0, 0)\r\n+            resolve(canvas.toDataURL())\r\n+        }\r\n+        img.onerror = reject\r\n+        img.src = imgUrl\r\n+    })\r\n }\r\n \r\n-const PatientPDF = ({ form ,ref}) => {\r\n+const PatientPDF = ({ form, ref }) => {\r\n \r\n-  const [imagesBase64, setImagesBase64] = useState({})\r\n-  const [isLoading, setIsLoading] = useState(true)\r\n+    const [imagesBase64, setImagesBase64] = useState({})\r\n+    const [isLoading, setIsLoading] = useState(true)\r\n \r\n-  useEffect(() => {\r\n-    const fetchImagesAsBase64 = async () => {\r\n-      try {\r\n-        setIsLoading(true)\r\n-        const imageUrls = {\r\n-          batch: form?.batch_images || [],\r\n-          before: form?.before_images || [],\r\n-          after: form?.after_images || [],\r\n-          patientSign: form?.treatment_plan?.patient_sign ? [form.treatment_plan.patient_sign] : [],\r\n-          furtherTreatment: form?.further_treatment?.map((treatment) => treatment?.sign) || [],\r\n-          patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n-        }\r\n+    useEffect(() => {\r\n+        const fetchImagesAsBase64 = async () => {\r\n+            try {\r\n+                setIsLoading(true)\r\n+                const imageUrls = {\r\n+                    batch: form?.batch_images || [],\r\n+                    before: form?.before_images || [],\r\n+                    after: form?.after_images || [],\r\n+                    patientSign: form?.treatment_plan?.patient_sign ? [form.treatment_plan.patient_sign] : [],\r\n+                    furtherTreatment: form?.further_treatment?.map((treatment) => treatment?.sign) || [],\r\n+                    patientConsent: form?.patient_consent?.sign ? [form.patient_consent.sign] : [],\r\n+                }\r\n \r\n-        // Convert each image URL to Base64\r\n-        const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n-          const urls = imageUrls[key]\r\n-          const base64Images = await Promise.all(urls.map((url) => toBase64(url)))\r\n-          return { [key]: base64Images }\r\n-        })\r\n+                // Convert each image URL to Base64\r\n+                const imagePromises = Object.keys(imageUrls).map(async (key) => {\r\n+                    const urls = imageUrls[key]\r\n+                    const base64Images = await Promise.all(urls.map((url) => toBase64(url)))\r\n+                    return { [key]: base64Images }\r\n+                })\r\n \r\n-        // Set all images as Base64 in the state\r\n-        const base64Data = await Promise.all(imagePromises)\r\n-        const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {})\r\n-        setImagesBase64(allImages)\r\n-        setIsLoading(false)\r\n+                // Set all images as Base64 in the state\r\n+                const base64Data = await Promise.all(imagePromises)\r\n+                const allImages = base64Data.reduce((acc, curr) => ({ ...acc, ...curr }), {})\r\n+                setImagesBase64(allImages)\r\n+                setIsLoading(false)\r\n \r\n-        // Auto-download PDF once images are loaded\r\n-        setTimeout(() => {\r\n-          if (pdfExportComponent.current) {\r\n-            pdfExportComponent.current.save()\r\n-          }\r\n-        }, 500)\r\n-      } catch (error) {\r\n-        console.error(\"Error converting images to base64:\", error)\r\n-        setIsLoading(false)\r\n-      }\r\n-    }\r\n+                // Auto-download PDF once images are loaded\r\n+                setTimeout(() => {\r\n+                    if (pdfExportComponent.current) {\r\n+                        pdfExportComponent.current.save()\r\n+                    }\r\n+                }, 500)\r\n+            } catch (error) {\r\n+                console.error(\"Error converting images to base64:\", error)\r\n+                setIsLoading(false)\r\n+            }\r\n+        }\r\n \r\n-    fetchImagesAsBase64()\r\n+        fetchImagesAsBase64()\r\n+        if (form) {\r\n+            handleExportWithComponent(ref)\r\n+        }\r\n+       \r\n+    }, [form])\r\n \r\n-    handleExportWithComponent(ref)\r\n-  }, [form])\r\n+    // Format date function\r\n+    const formatDate = (dateString) => {\r\n+        if (!dateString) return \"N/A\"\r\n+        return new Date(dateString).toLocaleDateString(\"en-US\", {\r\n+            year: \"numeric\",\r\n+            month: \"long\",\r\n+            day: \"numeric\",\r\n+        })\r\n+    }\r\n \r\n-  // Format date function\r\n-  const formatDate = (dateString) => {\r\n-    if (!dateString) return \"N/A\"\r\n-    return new Date(dateString).toLocaleDateString(\"en-US\", {\r\n-      year: \"numeric\",\r\n-      month: \"long\",\r\n-      day: \"numeric\",\r\n-    })\r\n-  }\r\n \r\n+    return (\r\n+        <div style={{ position: \"fixed\", left: \"-9999px\" }}>\r\n+            {isLoading ? (\r\n+                <Button variant=\"contained\" color=\"primary\" disabled>\r\n+                    Preparing PDF...\r\n+                </Button>\r\n+            ) : (\r\n+                <Button variant=\"contained\" color=\"primary\" >\r\n+                    Download Patient Report\r\n+                </Button>\r\n+            )}\r\n \r\n-  return (\r\n-    <div style={{ position: \"fixed\", left: \"-9999px\" }}>\r\n-      {isLoading ? (\r\n-        <Button variant=\"contained\" color=\"primary\" disabled>\r\n-          Preparing PDF...\r\n-        </Button>\r\n-      ) : (\r\n-        <Button variant=\"contained\" color=\"primary\" >\r\n-          Download Patient Report\r\n-        </Button>\r\n-      )}\r\n-\r\n-      <PDFExport\r\n-        ref={ref}\r\n-        paperSize=\"A4\"\r\n-        margin=\"10px\"\r\n-        fileName={`Patient_Report_${form?.first_name || \"\"}_${form?.last_name || \"\"}`}\r\n-      >\r\n-        <Card\r\n-          sx={{\r\n-            maxWidth: \"800px\",\r\n-            margin: \"auto\",\r\n-            backgroundColor: \"#ffffff\",\r\n-            borderRadius: \"12px\",\r\n-            boxShadow: \"0 4px 20px rgba(0,0,0,0.08)\",\r\n-          }}\r\n-        >\r\n-          <CardContent sx={{ padding: \"30px\" }}>\r\n-            {/* Header */}\r\n-            <Box\r\n-              sx={{\r\n-                textAlign: \"center\",\r\n-                marginBottom: \"20px\",\r\n-                backgroundColor: \"#f8f9fa\",\r\n-                padding: \"20px\",\r\n-                borderRadius: \"8px\",\r\n-              }}\r\n+            <PDFExport\r\n+                ref={ref}\r\n+                paperSize=\"A4\"\r\n+                margin=\"10px\"\r\n+                fileName={`Patient_Report_${form?.first_name || \"\"}_${form?.last_name || \"\"}`}\r\n             >\r\n-              <Typography\r\n-                variant=\"h4\"\r\n-                sx={{\r\n-                  fontWeight: \"700\",\r\n-                  color: \"#2c3e50\",\r\n-                  marginBottom: \"5px\",\r\n-                }}\r\n-              >\r\n-                Patient Medical Report\r\n-              </Typography>\r\n-              <Typography variant=\"subtitle1\" sx={{ color: \"#5d6778\" }}>\r\n-                Confidential Medical Documentation\r\n-              </Typography>\r\n-            </Box>\r\n+                <Card\r\n+                    sx={{\r\n+                        maxWidth: \"800px\",\r\n+                        margin: \"auto\",\r\n+                        backgroundColor: \"#ffffff\",\r\n+                        borderRadius: \"12px\",\r\n+                        boxShadow: \"0 4px 20px rgba(0,0,0,0.08)\",\r\n+                    }}\r\n+                >\r\n+                    <CardContent sx={{ padding: \"30px\" }}>\r\n+                        {/* Header */}\r\n+                        <Box\r\n+                            sx={{\r\n+                                textAlign: \"center\",\r\n+                                marginBottom: \"20px\",\r\n+                                backgroundColor: \"#f8f9fa\",\r\n+                                padding: \"20px\",\r\n+                                borderRadius: \"8px\",\r\n+                            }}\r\n+                        >\r\n+                            <Typography\r\n+                                variant=\"h4\"\r\n+                                sx={{\r\n+                                    fontWeight: \"700\",\r\n+                                    color: \"#2c3e50\",\r\n+                                    marginBottom: \"5px\",\r\n+                                }}\r\n+                            >\r\n+                                Patient Medical Report\r\n+                            </Typography>\r\n+                            <Typography variant=\"subtitle1\" sx={{ color: \"#5d6778\" }}>\r\n+                                Confidential Medical Documentation\r\n+                            </Typography>\r\n+                        </Box>\r\n \r\n-            {/* Patient Information Section */}\r\n-            <Paper\r\n-              elevation={0}\r\n-              sx={{\r\n-                padding: \"20px\",\r\n-                marginBottom: \"25px\",\r\n-                backgroundColor: \"#f8f9fa\",\r\n-                borderRadius: \"8px\",\r\n-                border: \"1px solid #e0e0e0\",\r\n-              }}\r\n-            >\r\n-              <Typography\r\n-                variant=\"h6\"\r\n-                sx={{\r\n-                  fontWeight: \"600\",\r\n-                  marginBottom: \"15px\",\r\n-                  color: \"#2c3e50\",\r\n-                  borderBottom: \"2px solid #3498db\",\r\n-                  paddingBottom: \"8px\",\r\n-                  display: \"inline-block\",\r\n-                }}\r\n-              >\r\n-                Patient Information\r\n-              </Typography>\r\n+                        {/* Patient Information Section */}\r\n+                        <Paper\r\n+                            elevation={0}\r\n+                            sx={{\r\n+                                padding: \"20px\",\r\n+                                marginBottom: \"25px\",\r\n+                                backgroundColor: \"#f8f9fa\",\r\n+                                borderRadius: \"8px\",\r\n+                                border: \"1px solid #e0e0e0\",\r\n+                            }}\r\n+                        >\r\n+                            <Typography\r\n+                                variant=\"h6\"\r\n+                                sx={{\r\n+                                    fontWeight: \"600\",\r\n+                                    marginBottom: \"15px\",\r\n+                                    color: \"#2c3e50\",\r\n+                                    borderBottom: \"2px solid #3498db\",\r\n+                                    paddingBottom: \"8px\",\r\n+                                    display: \"inline-block\",\r\n+                                }}\r\n+                            >\r\n+                                Patient Information\r\n+                            </Typography>\r\n \r\n-              <Grid container spacing={3}>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Name:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                      {form?.first_name} {form?.last_name}\r\n-                    </span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    DOB: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{formatDate(form?.dob)}</span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Phone: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.phone}</span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Email: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.email}</span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={12}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Address:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                      {form?.address}, {form?.post_code}\r\n-                    </span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={12}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Notes: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.notes || \"None\"}</span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-              </Grid>\r\n-            </Paper>\r\n+                            <Grid container spacing={3}>\r\n+                                <Grid item xs={6}>\r\n+                                    <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                        Name:{\" \"}\r\n+                                        <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                                            {form?.first_name} {form?.last_name}\r\n+                                        </span>\r\n+                                    </Typography>\r\n+                                </Grid>\r\n+                                <Grid item xs={6}>\r\n+                                    <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                        DOB: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{formatDate(form?.dob)}</span>\r\n+                                    </Typography>\r\n+                                </Grid>\r\n+                                <Grid item xs={6}>\r\n+                                    <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                        Phone: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.phone}</span>\r\n+                                    </Typography>\r\n+                                </Grid>\r\n+                                <Grid item xs={6}>\r\n+                                    <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                        Email: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.email}</span>\r\n+                                    </Typography>\r\n+                                </Grid>\r\n+                                <Grid item xs={12}>\r\n+                                    <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                        Address:{\" \"}\r\n+                                        <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                                            {form?.address}, {form?.post_code}\r\n+                                        </span>\r\n+                                    </Typography>\r\n+                                </Grid>\r\n+                                <Grid item xs={12}>\r\n+                                    <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                        Notes: <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.notes || \"None\"}</span>\r\n+                                    </Typography>\r\n+                                </Grid>\r\n+                            </Grid>\r\n+                        </Paper>\r\n \r\n-            {/* Next of Kin Information */}\r\n-            <Paper\r\n-              elevation={0}\r\n-              sx={{\r\n-                padding: \"20px\",\r\n-                marginBottom: \"25px\",\r\n-                backgroundColor: \"#f8f9fa\",\r\n-                borderRadius: \"8px\",\r\n-                border: \"1px solid #e0e0e0\",\r\n-              }}\r\n-            >\r\n-              <Typography\r\n-                variant=\"h6\"\r\n-                sx={{\r\n-                  fontWeight: \"600\",\r\n-                  marginBottom: \"15px\",\r\n-                  color: \"#2c3e50\",\r\n-                  borderBottom: \"2px solid #3498db\",\r\n-                  paddingBottom: \"8px\",\r\n-                  display: \"inline-block\",\r\n-                }}\r\n-              >\r\n-                Next of Kin\r\n-              </Typography>\r\n+                        {/* Next of Kin Information */}\r\n+                        <Paper\r\n+                            elevation={0}\r\n+                            sx={{\r\n+                                padding: \"20px\",\r\n+                                marginBottom: \"25px\",\r\n+                                backgroundColor: \"#f8f9fa\",\r\n+                                borderRadius: \"8px\",\r\n+                                border: \"1px solid #e0e0e0\",\r\n+                            }}\r\n+                        >\r\n+                            <Typography\r\n+                                variant=\"h6\"\r\n+                                sx={{\r\n+                                    fontWeight: \"600\",\r\n+                                    marginBottom: \"15px\",\r\n+                                    color: \"#2c3e50\",\r\n+                                    borderBottom: \"2px solid #3498db\",\r\n+                                    paddingBottom: \"8px\",\r\n+                                    display: \"inline-block\",\r\n+                                }}\r\n+                            >\r\n+                                Next of Kin\r\n+                            </Typography>\r\n \r\n-              <Grid container spacing={3}>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Name:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.name || \"N/A\"}</span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Phone:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.phone || \"N/A\"}</span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Address:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.address || \"N/A\"}</span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Email:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.email || \"N/A\"}</span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-              </Grid>\r\n-            </Paper>\r\n+                            <Grid container spacing={3}>\r\n+                                <Grid item xs={6}>\r\n+                                    <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                        Name:{\" \"}\r\n+                                        <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.name || \"N/A\"}</span>\r\n+                                    </Typography>\r\n+                                </Grid>\r\n+                                <Grid item xs={6}>\r\n+                                    <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                        Phone:{\" \"}\r\n+                                        <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.phone || \"N/A\"}</span>\r\n+                                    </Typography>\r\n+                                </Grid>\r\n+                                <Grid item xs={6}>\r\n+                                    <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                        Address:{\" \"}\r\n+                                        <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.address || \"N/A\"}</span>\r\n+                                    </Typography>\r\n+                                </Grid>\r\n+                                <Grid item xs={6}>\r\n+                                    <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                        Email:{\" \"}\r\n+                                        <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>{form?.kin_details?.email || \"N/A\"}</span>\r\n+                                    </Typography>\r\n+                                </Grid>\r\n+                            </Grid>\r\n+                        </Paper>\r\n \r\n-            {/* General Practitioners */}\r\n-            <Paper\r\n-              elevation={0}\r\n-              sx={{\r\n-                padding: \"20px\",\r\n-                marginBottom: \"25px\",\r\n-                backgroundColor: \"#f8f9fa\",\r\n-                borderRadius: \"8px\",\r\n-                border: \"1px solid #e0e0e0\",\r\n-              }}\r\n-            >\r\n-              <Typography\r\n-                variant=\"h6\"\r\n-                sx={{\r\n-                  fontWeight: \"600\",\r\n-                  marginBottom: \"15px\",\r\n-                  color: \"#2c3e50\",\r\n-                  borderBottom: \"2px solid #3498db\",\r\n-                  paddingBottom: \"8px\",\r\n-                  display: \"inline-block\",\r\n-                }}\r\n-              >\r\n-                General Practitioners\r\n-              </Typography>\r\n+                        {/* General Practitioners */}\r\n+                        <Paper\r\n+                            elevation={0}\r\n+                            sx={{\r\n+                                padding: \"20px\",\r\n+                                marginBottom: \"25px\",\r\n+                                backgroundColor: \"#f8f9fa\",\r\n+                                borderRadius: \"8px\",\r\n+                                border: \"1px solid #e0e0e0\",\r\n+                            }}\r\n+                        >\r\n+                            <Typography\r\n+                                variant=\"h6\"\r\n+                                sx={{\r\n+                                    fontWeight: \"600\",\r\n+                                    marginBottom: \"15px\",\r\n+                                    color: \"#2c3e50\",\r\n+                                    borderBottom: \"2px solid #3498db\",\r\n+                                    paddingBottom: \"8px\",\r\n+                                    display: \"inline-block\",\r\n+                                }}\r\n+                            >\r\n+                                General Practitioners\r\n+                            </Typography>\r\n \r\n-              <Grid container spacing={3}>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Name:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                      {form?.general_practitioner?.name || \"N/A\"}\r\n-                    </span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Phone:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                      {form?.general_practitioner?.phone || \"N/A\"}\r\n-                    </span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Address:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                      {form?.general_practitioner?.address || \"N/A\"}\r\n-                    </span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Email:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                      {form?.general_practitioner?.email || \"N/A\"}\r\n-                    </span>\r\n-                  </Typography>\r\n-                </Grid>\r\n-              </Grid>\r\n-            </Paper>\r\n+                            <Grid container spacing={3}>\r\n+                                <Grid item xs={6}>\r\n+                                    <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                        Name:{\" \"}\r\n+                                        <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                                            {form?.general_practitioner?.name || \"N/A\"}\r\n+                                        </span>\r\n+                                    </Typography>\r\n+                                </Grid>\r\n+                                <Grid item xs={6}>\r\n+                                    <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                        Phone:{\" \"}\r\n+                                        <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                                            {form?.general_practitioner?.phone || \"N/A\"}\r\n+                                        </span>\r\n+                                    </Typography>\r\n+                                </Grid>\r\n+                                <Grid item xs={6}>\r\n+                                    <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                        Address:{\" \"}\r\n+                                        <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                                            {form?.general_practitioner?.address || \"N/A\"}\r\n+                                        </span>\r\n+                                    </Typography>\r\n+                                </Grid>\r\n+                                <Grid item xs={6}>\r\n+                                    <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                        Email:{\" \"}\r\n+                                        <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                                            {form?.general_practitioner?.email || \"N/A\"}\r\n+                                        </span>\r\n+                                    </Typography>\r\n+                                </Grid>\r\n+                            </Grid>\r\n+                        </Paper>\r\n \r\n-            {/* Treatment Plan */}\r\n-            <Paper\r\n-              elevation={0}\r\n-              className=\"kendoPaper2\"\r\n-              sx={{\r\n-                padding: \"20px\",\r\n-                marginBottom: \"25px\",\r\n-                backgroundColor: \"#f8f9fa\",\r\n-                borderRadius: \"8px\",\r\n-                border: \"1px solid #e0e0e0\",\r\n-              }}\r\n-            >\r\n-              <Typography\r\n-                variant=\"h6\"\r\n-                sx={{\r\n-                  fontWeight: \"600\",\r\n-                  marginBottom: \"15px\",\r\n-                  color: \"#2c3e50\",\r\n-                  borderBottom: \"2px solid #3498db\",\r\n-                  paddingBottom: \"8px\",\r\n-                  display: \"inline-block\",\r\n-                }}\r\n-              >\r\n-                Treatment Plan\r\n-              </Typography>\r\n+                        {/* Treatment Plan */}\r\n+                        <Paper\r\n+                            elevation={0}\r\n+                            className=\"kendoPaper2\"\r\n+                            sx={{\r\n+                                padding: \"20px\",\r\n+                                marginBottom: \"25px\",\r\n+                                backgroundColor: \"#f8f9fa\",\r\n+                                borderRadius: \"8px\",\r\n+                                border: \"1px solid #e0e0e0\",\r\n+                            }}\r\n+                        >\r\n+                            <Typography\r\n+                                variant=\"h6\"\r\n+                                sx={{\r\n+                                    fontWeight: \"600\",\r\n+                                    marginBottom: \"15px\",\r\n+                                    color: \"#2c3e50\",\r\n+                                    borderBottom: \"2px solid #3498db\",\r\n+                                    paddingBottom: \"8px\",\r\n+                                    display: \"inline-block\",\r\n+                                }}\r\n+                            >\r\n+                                Treatment Plan\r\n+                            </Typography>\r\n \r\n-              <Grid container spacing={3}>\r\n-                <Grid item xs={12}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n-                    Patient Concerns:\r\n-                  </Typography>\r\n-                  <Typography\r\n-                    sx={{\r\n-                      padding: \"10px\",\r\n-                      borderRadius: \"6px\",\r\n-                      border: \"1px solid #e0e0e0\",\r\n-                    }}\r\n-                  >\r\n-                    {form?.treatment_plan?.patient_concerns || \"None specified\"}\r\n-                  </Typography>\r\n-                </Grid>\r\n+                            <Grid container spacing={3}>\r\n+                                <Grid item xs={12}>\r\n+                                    <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n+                                        Patient Concerns:\r\n+                                    </Typography>\r\n+                                    <Typography\r\n+                                        sx={{\r\n+                                            padding: \"10px\",\r\n+                                            borderRadius: \"6px\",\r\n+                                            border: \"1px solid #e0e0e0\",\r\n+                                        }}\r\n+                                    >\r\n+                                        {form?.treatment_plan?.patient_concerns || \"None specified\"}\r\n+                                    </Typography>\r\n+                                </Grid>\r\n \r\n-                <Grid item xs={12}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n-                    Patient Goals:\r\n-                  </Typography>\r\n-                  <Typography\r\n-                    sx={{\r\n-                      padding: \"10px\",\r\n-                      borderRadius: \"6px\",\r\n-                      border: \"1px solid #e0e0e0\",\r\n-                    }}\r\n-                  >\r\n-                    {form?.treatment_plan?.patient_goals || \"None specified\"}\r\n-                  </Typography>\r\n-                </Grid>\r\n+                                <Grid item xs={12}>\r\n+                                    <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n+                                        Patient Goals:\r\n+                                    </Typography>\r\n+                                    <Typography\r\n+                                        sx={{\r\n+                                            padding: \"10px\",\r\n+                                            borderRadius: \"6px\",\r\n+                                            border: \"1px solid #e0e0e0\",\r\n+                                        }}\r\n+                                    >\r\n+                                        {form?.treatment_plan?.patient_goals || \"None specified\"}\r\n+                                    </Typography>\r\n+                                </Grid>\r\n \r\n-                <Grid item xs={12}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n-                    Advised Plan:\r\n-                  </Typography>\r\n-                  <Typography\r\n-                    sx={{\r\n-                      padding: \"10px\",\r\n-                      borderRadius: \"6px\",\r\n-                      border: \"1px solid #e0e0e0\",\r\n-                    }}\r\n-                  >\r\n-                    {form?.treatment_plan?.advised_plan || \"None specified\"}\r\n-                  </Typography>\r\n-                </Grid>\r\n+                                <Grid item xs={12}>\r\n+                                    <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n+                                        Advised Plan:\r\n+                                    </Typography>\r\n+                                    <Typography\r\n+                                        sx={{\r\n+                                            padding: \"10px\",\r\n+                                            borderRadius: \"6px\",\r\n+                                            border: \"1px solid #e0e0e0\",\r\n+                                        }}\r\n+                                    >\r\n+                                        {form?.treatment_plan?.advised_plan || \"None specified\"}\r\n+                                    </Typography>\r\n+                                </Grid>\r\n \r\n-                <Grid item xs={12}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n-                    Expected Result:\r\n-                  </Typography>\r\n-                  <Typography\r\n-                    sx={{\r\n-                      padding: \"10px\",\r\n-                      borderRadius: \"6px\",\r\n-                      border: \"1px solid #e0e0e0\",\r\n-                    }}\r\n-                  >\r\n-                    {form?.treatment_plan?.expected_result || \"None specified\"}\r\n-                  </Typography>\r\n-                </Grid>\r\n+                                <Grid item xs={12}>\r\n+                                    <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n+                                        Expected Result:\r\n+                                    </Typography>\r\n+                                    <Typography\r\n+                                        sx={{\r\n+                                            padding: \"10px\",\r\n+                                            borderRadius: \"6px\",\r\n+                                            border: \"1px solid #e0e0e0\",\r\n+                                        }}\r\n+                                    >\r\n+                                        {form?.treatment_plan?.expected_result || \"None specified\"}\r\n+                                    </Typography>\r\n+                                </Grid>\r\n \r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                    Date:{\" \"}\r\n-                    <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n-                      {formatDate(form?.treatment_plan?.date)}\r\n-                    </span>\r\n-                  </Typography>\r\n-                </Grid>\r\n+                                <Grid item xs={6}>\r\n+                                    <Typography sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                        Date:{\" \"}\r\n+                                        <span style={{ fontWeight: \"400\", color: \"#2c3e50\" }}>\r\n+                                            {formatDate(form?.treatment_plan?.date)}\r\n+                                        </span>\r\n+                                    </Typography>\r\n+                                </Grid>\r\n \r\n-                <Grid item xs={6}>\r\n-                  <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n-                    Patient Signature:\r\n-                  </Typography>\r\n-                  {imagesBase64?.patientConsent?.[0] && (\r\n-                    <Box\r\n-                      sx={{\r\n-                        border: \"1px solid #e0e0e0\",\r\n-                        borderRadius: \"6px\",\r\n-                        padding: \"10px\",\r\n-                        backgroundColor: \"#ffffff\",\r\n-                        display: \"flex\",\r\n-                        justifyContent: \"center\",\r\n-                      }}\r\n-                    >\r\n-                      <img\r\n-                        src={imagesBase64?.patientConsent?.[0] || \"/placeholder.svg\"}\r\n-                        alt=\"Treatment Plan Sign\"\r\n-                        style={{\r\n-                          width: \"200px\",\r\n-                          borderRadius: \"6px\",\r\n-                        }}\r\n-                      />\r\n-                    </Box>\r\n-                  )}\r\n-                </Grid>\r\n-              </Grid>\r\n-            </Paper>\r\n+                                <Grid item xs={6}>\r\n+                                    <Typography sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"8px\" }}>\r\n+                                        Patient Signature:\r\n+                                    </Typography>\r\n+                                    {imagesBase64?.patientConsent?.[0] && (\r\n+                                        <Box\r\n+                                            sx={{\r\n+                                                border: \"1px solid #e0e0e0\",\r\n+                                                borderRadius: \"6px\",\r\n+                                                padding: \"10px\",\r\n+                                                backgroundColor: \"#ffffff\",\r\n+                                                display: \"flex\",\r\n+                                                justifyContent: \"center\",\r\n+                                            }}\r\n+                                        >\r\n+                                            <img\r\n+                                                src={imagesBase64?.patientConsent?.[0] || \"/placeholder.svg\"}\r\n+                                                alt=\"Treatment Plan Sign\"\r\n+                                                style={{\r\n+                                                    width: \"200px\",\r\n+                                                    borderRadius: \"6px\",\r\n+                                                }}\r\n+                                            />\r\n+                                        </Box>\r\n+                                    )}\r\n+                                </Grid>\r\n+                            </Grid>\r\n+                        </Paper>\r\n \r\n-            {/* Images Section */}\r\n-            <Paper\r\n-              elevation={0}\r\n-              className=\"kendoPaper\"\r\n-              sx={{\r\n-                padding: \"20px\",\r\n-                marginBottom: \"25px\",\r\n-                backgroundColor: \"#f8f9fa\",\r\n-                borderRadius: \"8px\",\r\n-                border: \"1px solid #e0e0e0\",\r\n-              }}\r\n-            >\r\n-              <Typography\r\n-                variant=\"h6\"\r\n-                sx={{\r\n-                  fontWeight: \"600\",\r\n-                  marginBottom: \"15px\",\r\n-                  color: \"#2c3e50\",\r\n-                  borderBottom: \"2px solid #3498db\",\r\n-                  paddingBottom: \"8px\",\r\n-                  display: \"inline-block\",\r\n-                  marginTop: \"25px\",\r\n-                }}\r\n-              >\r\n-                Medical Images\r\n-              </Typography>\r\n+                        {/* Images Section */}\r\n+                        <Paper\r\n+                            elevation={0}\r\n+                            className=\"kendoPaper\"\r\n+                            sx={{\r\n+                                padding: \"20px\",\r\n+                                marginBottom: \"25px\",\r\n+                                backgroundColor: \"#f8f9fa\",\r\n+                                borderRadius: \"8px\",\r\n+                                border: \"1px solid #e0e0e0\",\r\n+                            }}\r\n+                        >\r\n+                            <Typography\r\n+                                variant=\"h6\"\r\n+                                sx={{\r\n+                                    fontWeight: \"600\",\r\n+                                    marginBottom: \"15px\",\r\n+                                    color: \"#2c3e50\",\r\n+                                    borderBottom: \"2px solid #3498db\",\r\n+                                    paddingBottom: \"8px\",\r\n+                                    display: \"inline-block\",\r\n+                                    marginTop: \"25px\",\r\n+                                }}\r\n+                            >\r\n+                                Medical Images\r\n+                            </Typography>\r\n \r\n-              {/* Batch Images */}\r\n-              <Box sx={{ marginBottom: \"20px\" }}>\r\n-                <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n-                  Batch Images:\r\n-                </Typography>\r\n-                <Box\r\n-                  sx={{\r\n-                    display: \"flex\",\r\n-                    gap: \"15px\",\r\n-                    flexWrap: \"wrap\",\r\n-                    padding: \"15px\",\r\n-                    borderRadius: \"6px\",\r\n-                    border: \"1px solid #e0e0e0\",\r\n-                  }}\r\n-                >\r\n-                  {imagesBase64?.batch?.length > 0 ? (\r\n-                    imagesBase64.batch.map((img, index) => (\r\n-                      <Box\r\n-                        key={index}\r\n-                        sx={{\r\n-                          border: \"1px solid #e0e0e0\",\r\n-                          borderRadius: \"6px\",\r\n-                          padding: \"5px\",\r\n-                          backgroundColor: \"#ffffff\",\r\n-                          boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n-                        }}\r\n-                      >\r\n-                        <img\r\n-                          src={img || \"/placeholder.svg\"}\r\n-                          style={{\r\n-                            width: \"70px\",\r\n-                            height: \"70px\",\r\n-                            objectFit: \"cover\",\r\n-                            borderRadius: \"4px\",\r\n-                          }}\r\n-                        />\r\n-                      </Box>\r\n-                    ))\r\n-                  ) : (\r\n-                    <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No batch images available</Typography>\r\n-                  )}\r\n-                </Box>\r\n-              </Box>\r\n+                            {/* Batch Images */}\r\n+                            <Box sx={{ marginBottom: \"20px\" }}>\r\n+                                <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n+                                    Batch Images:\r\n+                                </Typography>\r\n+                                <Box\r\n+                                    sx={{\r\n+                                        display: \"flex\",\r\n+                                        gap: \"15px\",\r\n+                                        flexWrap: \"wrap\",\r\n+                                        padding: \"15px\",\r\n+                                        borderRadius: \"6px\",\r\n+                                        border: \"1px solid #e0e0e0\",\r\n+                                    }}\r\n+                                >\r\n+                                    {imagesBase64?.batch?.length > 0 ? (\r\n+                                        imagesBase64.batch.map((img, index) => (\r\n+                                            <Box\r\n+                                                key={index}\r\n+                                                sx={{\r\n+                                                    border: \"1px solid #e0e0e0\",\r\n+                                                    borderRadius: \"6px\",\r\n+                                                    padding: \"5px\",\r\n+                                                    backgroundColor: \"#ffffff\",\r\n+                                                    boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n+                                                }}\r\n+                                            >\r\n+                                                <img\r\n+                                                    src={img || \"/placeholder.svg\"}\r\n+                                                    style={{\r\n+                                                        width: \"70px\",\r\n+                                                        height: \"70px\",\r\n+                                                        objectFit: \"cover\",\r\n+                                                        borderRadius: \"4px\",\r\n+                                                    }}\r\n+                                                />\r\n+                                            </Box>\r\n+                                        ))\r\n+                                    ) : (\r\n+                                        <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No batch images available</Typography>\r\n+                                    )}\r\n+                                </Box>\r\n+                            </Box>\r\n \r\n-              {/* Before Images */}\r\n-              <Box sx={{ marginBottom: \"20px\" }}>\r\n-                <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n-                  Before Treatment:\r\n-                </Typography>\r\n-                <Box\r\n-                  sx={{\r\n-                    display: \"flex\",\r\n-                    gap: \"15px\",\r\n-                    flexWrap: \"wrap\",\r\n-                    padding: \"15px\",\r\n-                    borderRadius: \"6px\",\r\n-                    border: \"1px solid #e0e0e0\",\r\n-                  }}\r\n-                >\r\n-                  {imagesBase64?.before?.length > 0 ? (\r\n-                    imagesBase64.before.map((img, index) => (\r\n-                      <Box\r\n-                        key={index}\r\n-                        sx={{\r\n-                          border: \"1px solid #e0e0e0\",\r\n-                          borderRadius: \"6px\",\r\n-                          padding: \"5px\",\r\n-                          backgroundColor: \"#ffffff\",\r\n-                          boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n-                        }}\r\n-                      >\r\n-                        <img\r\n-                          src={img || \"/placeholder.svg\"}\r\n-                          alt={`Before ${index + 1}`}\r\n-                          style={{\r\n-                            width: \"70px\",\r\n-                            height: \"70px\",\r\n-                            objectFit: \"cover\",\r\n-                            borderRadius: \"4px\",\r\n-                          }}\r\n-                        />\r\n-                      </Box>\r\n-                    ))\r\n-                  ) : (\r\n-                    <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No before images available</Typography>\r\n-                  )}\r\n-                </Box>\r\n-              </Box>\r\n+                            {/* Before Images */}\r\n+                            <Box sx={{ marginBottom: \"20px\" }}>\r\n+                                <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n+                                    Before Treatment:\r\n+                                </Typography>\r\n+                                <Box\r\n+                                    sx={{\r\n+                                        display: \"flex\",\r\n+                                        gap: \"15px\",\r\n+                                        flexWrap: \"wrap\",\r\n+                                        padding: \"15px\",\r\n+                                        borderRadius: \"6px\",\r\n+                                        border: \"1px solid #e0e0e0\",\r\n+                                    }}\r\n+                                >\r\n+                                    {imagesBase64?.before?.length > 0 ? (\r\n+                                        imagesBase64.before.map((img, index) => (\r\n+                                            <Box\r\n+                                                key={index}\r\n+                                                sx={{\r\n+                                                    border: \"1px solid #e0e0e0\",\r\n+                                                    borderRadius: \"6px\",\r\n+                                                    padding: \"5px\",\r\n+                                                    backgroundColor: \"#ffffff\",\r\n+                                                    boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n+                                                }}\r\n+                                            >\r\n+                                                <img\r\n+                                                    src={img || \"/placeholder.svg\"}\r\n+                                                    alt={`Before ${index + 1}`}\r\n+                                                    style={{\r\n+                                                        width: \"70px\",\r\n+                                                        height: \"70px\",\r\n+                                                        objectFit: \"cover\",\r\n+                                                        borderRadius: \"4px\",\r\n+                                                    }}\r\n+                                                />\r\n+                                            </Box>\r\n+                                        ))\r\n+                                    ) : (\r\n+                                        <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No before images available</Typography>\r\n+                                    )}\r\n+                                </Box>\r\n+                            </Box>\r\n \r\n-              {/* After Images */}\r\n-              <Box>\r\n-                <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n-                  After Treatment:\r\n-                </Typography>\r\n-                <Box\r\n-                  sx={{\r\n-                    display: \"flex\",\r\n-                    gap: \"15px\",\r\n-                    flexWrap: \"wrap\",\r\n-                    padding: \"15px\",\r\n-                    borderRadius: \"6px\",\r\n-                    border: \"1px solid #e0e0e0\",\r\n-                  }}\r\n-                >\r\n-                  {imagesBase64?.after?.length > 0 ? (\r\n-                    imagesBase64.after.map((img, index) => (\r\n-                      <Box\r\n-                        key={index}\r\n-                        sx={{\r\n-                          border: \"1px solid #e0e0e0\",\r\n-                          borderRadius: \"6px\",\r\n-                          padding: \"5px\",\r\n-                          backgroundColor: \"#ffffff\",\r\n-                          boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n-                        }}\r\n-                      >\r\n-                        <img\r\n-                          src={img || \"/placeholder.svg\"}\r\n-                          alt={`After ${index + 1}`}\r\n-                          style={{\r\n-                            width: \"70px\",\r\n-                            height: \"70px\",\r\n-                            objectFit: \"cover\",\r\n-                            borderRadius: \"4px\",\r\n-                          }}\r\n-                        />\r\n-                      </Box>\r\n-                    ))\r\n-                  ) : (\r\n-                    <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No after images available</Typography>\r\n-                  )}\r\n-                </Box>\r\n-              </Box>\r\n-            </Paper>\r\n+                            {/* After Images */}\r\n+                            <Box>\r\n+                                <Typography variant=\"subtitle1\" sx={{ fontWeight: \"500\", marginBottom: \"10px\", color: \"#34495e\" }}>\r\n+                                    After Treatment:\r\n+                                </Typography>\r\n+                                <Box\r\n+                                    sx={{\r\n+                                        display: \"flex\",\r\n+                                        gap: \"15px\",\r\n+                                        flexWrap: \"wrap\",\r\n+                                        padding: \"15px\",\r\n+                                        borderRadius: \"6px\",\r\n+                                        border: \"1px solid #e0e0e0\",\r\n+                                    }}\r\n+                                >\r\n+                                    {imagesBase64?.after?.length > 0 ? (\r\n+                                        imagesBase64.after.map((img, index) => (\r\n+                                            <Box\r\n+                                                key={index}\r\n+                                                sx={{\r\n+                                                    border: \"1px solid #e0e0e0\",\r\n+                                                    borderRadius: \"6px\",\r\n+                                                    padding: \"5px\",\r\n+                                                    backgroundColor: \"#ffffff\",\r\n+                                                    boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\r\n+                                                }}\r\n+                                            >\r\n+                                                <img\r\n+                                                    src={img || \"/placeholder.svg\"}\r\n+                                                    alt={`After ${index + 1}`}\r\n+                                                    style={{\r\n+                                                        width: \"70px\",\r\n+                                                        height: \"70px\",\r\n+                                                        objectFit: \"cover\",\r\n+                                                        borderRadius: \"4px\",\r\n+                                                    }}\r\n+                                                />\r\n+                                            </Box>\r\n+                                        ))\r\n+                                    ) : (\r\n+                                        <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\" }}>No after images available</Typography>\r\n+                                    )}\r\n+                                </Box>\r\n+                            </Box>\r\n+                        </Paper>\r\n \r\n-            {/* Treatment Records Table - Page Break */}\r\n-            <Box sx={{ pageBreakBefore: \"always\" }}>\r\n-              <Paper\r\n-                elevation={0}\r\n-                sx={{\r\n-                  padding: \"20px\",\r\n-                  marginBottom: \"25px\",\r\n-                  backgroundColor: \"#f8f9fa\",\r\n-                  borderRadius: \"8px\",\r\n-                  border: \"1px solid #e0e0e0\",\r\n-                }}\r\n-              >\r\n-                <Typography\r\n-                  variant=\"h6\"\r\n-                  sx={{\r\n-                    fontWeight: \"600\",\r\n-                    marginBottom: \"15px\",\r\n-                    color: \"#2c3e50\",\r\n-                    borderBottom: \"2px solid #3498db\",\r\n-                    paddingBottom: \"8px\",\r\n-                    display: \"inline-block\",\r\n-                  }}\r\n-                >\r\n-                  Treatment Records\r\n-                </Typography>\r\n+                        {/* Treatment Records Table - Page Break */}\r\n+                        <Box sx={{ pageBreakBefore: \"always\" }}>\r\n+                            <Paper\r\n+                                elevation={0}\r\n+                                sx={{\r\n+                                    padding: \"20px\",\r\n+                                    marginBottom: \"25px\",\r\n+                                    backgroundColor: \"#f8f9fa\",\r\n+                                    borderRadius: \"8px\",\r\n+                                    border: \"1px solid #e0e0e0\",\r\n+                                }}\r\n+                            >\r\n+                                <Typography\r\n+                                    variant=\"h6\"\r\n+                                    sx={{\r\n+                                        fontWeight: \"600\",\r\n+                                        marginBottom: \"15px\",\r\n+                                        color: \"#2c3e50\",\r\n+                                        borderBottom: \"2px solid #3498db\",\r\n+                                        paddingBottom: \"8px\",\r\n+                                        display: \"inline-block\",\r\n+                                    }}\r\n+                                >\r\n+                                    Treatment Records\r\n+                                </Typography>\r\n \r\n-                <TableContainer component={Paper} elevation={0} sx={{ border: \"1px solid #e0e0e0\" }}>\r\n-                  <Table>\r\n-                    <TableHead sx={{ backgroundColor: \"#f1f8ff\" }}>\r\n-                      <TableRow>\r\n-                        <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Date</TableCell>\r\n-                        <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Description</TableCell>\r\n-                        <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Amount</TableCell>\r\n-                      </TableRow>\r\n-                    </TableHead>\r\n-                    <TableBody>\r\n-                      {form?.treatment_record?.length > 0 ? (\r\n-                        form.treatment_record.map((record, index) => (\r\n-                          <TableRow\r\n-                            key={index}\r\n-                            sx={{\r\n-                              \"&:nth-of-type(odd)\": { backgroundColor: \"#f9f9f9\" },\r\n-                              \"&:hover\": { backgroundColor: \"#f5f5f5\" },\r\n-                            }}\r\n-                          >\r\n-                            <TableCell>{formatDate(record.date)}</TableCell>\r\n-                            <TableCell>{record.description}</TableCell>\r\n-                            <TableCell>${record.amount}</TableCell>\r\n-                          </TableRow>\r\n-                        ))\r\n-                      ) : (\r\n-                        <TableRow>\r\n-                          <TableCell colSpan={3} sx={{ textAlign: \"center\", color: \"#7f8c8d\", fontStyle: \"italic\" }}>\r\n-                            No treatment records available\r\n-                          </TableCell>\r\n-                        </TableRow>\r\n-                      )}\r\n-                    </TableBody>\r\n-                  </Table>\r\n-                </TableContainer>\r\n-              </Paper>\r\n+                                <TableContainer component={Paper} elevation={0} sx={{ border: \"1px solid #e0e0e0\" }}>\r\n+                                    <Table>\r\n+                                        <TableHead sx={{ backgroundColor: \"#f1f8ff\" }}>\r\n+                                            <TableRow>\r\n+                                                <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Date</TableCell>\r\n+                                                <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Description</TableCell>\r\n+                                                <TableCell sx={{ fontWeight: \"600\", color: \"#2c3e50\" }}>Amount</TableCell>\r\n+                                            </TableRow>\r\n+                                        </TableHead>\r\n+                                        <TableBody>\r\n+                                            {form?.treatment_record?.length > 0 ? (\r\n+                                                form.treatment_record.map((record, index) => (\r\n+                                                    <TableRow\r\n+                                                        key={index}\r\n+                                                        sx={{\r\n+                                                            \"&:nth-of-type(odd)\": { backgroundColor: \"#f9f9f9\" },\r\n+                                                            \"&:hover\": { backgroundColor: \"#f5f5f5\" },\r\n+                                                        }}\r\n+                                                    >\r\n+                                                        <TableCell>{formatDate(record.date)}</TableCell>\r\n+                                                        <TableCell>{record.description}</TableCell>\r\n+                                                        <TableCell>${record.amount}</TableCell>\r\n+                                                    </TableRow>\r\n+                                                ))\r\n+                                            ) : (\r\n+                                                <TableRow>\r\n+                                                    <TableCell colSpan={3} sx={{ textAlign: \"center\", color: \"#7f8c8d\", fontStyle: \"italic\" }}>\r\n+                                                        No treatment records available\r\n+                                                    </TableCell>\r\n+                                                </TableRow>\r\n+                                            )}\r\n+                                        </TableBody>\r\n+                                    </Table>\r\n+                                </TableContainer>\r\n+                            </Paper>\r\n \r\n-              {/* Further Treatment Section */}\r\n-              <Paper\r\n-                elevation={0}\r\n-                sx={{\r\n-                  padding: \"20px\",\r\n-                  marginBottom: \"25px\",\r\n-                  backgroundColor: \"#f8f9fa\",\r\n-                  borderRadius: \"8px\",\r\n-                  border: \"1px solid #e0e0e0\",\r\n-                }}\r\n-              >\r\n-                <Typography\r\n-                  variant=\"h6\"\r\n-                  sx={{\r\n-                    fontWeight: \"600\",\r\n-                    marginBottom: \"15px\",\r\n-                    color: \"#2c3e50\",\r\n-                    borderBottom: \"2px solid #3498db\",\r\n-                    paddingBottom: \"8px\",\r\n-                    display: \"inline-block\",\r\n-                  }}\r\n-                >\r\n-                  Further Treatment\r\n-                </Typography>\r\n+                            {/* Further Treatment Section */}\r\n+                            <Paper\r\n+                                elevation={0}\r\n+                                sx={{\r\n+                                    padding: \"20px\",\r\n+                                    marginBottom: \"25px\",\r\n+                                    backgroundColor: \"#f8f9fa\",\r\n+                                    borderRadius: \"8px\",\r\n+                                    border: \"1px solid #e0e0e0\",\r\n+                                }}\r\n+                            >\r\n+                                <Typography\r\n+                                    variant=\"h6\"\r\n+                                    sx={{\r\n+                                        fontWeight: \"600\",\r\n+                                        marginBottom: \"15px\",\r\n+                                        color: \"#2c3e50\",\r\n+                                        borderBottom: \"2px solid #3498db\",\r\n+                                        paddingBottom: \"8px\",\r\n+                                        display: \"inline-block\",\r\n+                                    }}\r\n+                                >\r\n+                                    Further Treatment\r\n+                                </Typography>\r\n \r\n-                <Grid container spacing={3}>\r\n-                  {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n-                    <React.Fragment key={`treatment-${index}`}>\r\n-                      {/* Date Grid Item */}\r\n-                      <Grid item xs={12} sm={6} md={6}>\r\n-                        <Box\r\n-                          sx={{\r\n-                            padding: \"15px\",\r\n-                            borderRadius: \"6px\",\r\n-                          }}\r\n-                        >\r\n-                          <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n-                            Date:\r\n-                          </Typography>\r\n-                          <Typography variant=\"body2\" sx={{ color: \"#2c3e50\", marginTop: \"5px\" }}>\r\n-                            {form?.further_treatment?.[index]?.date\r\n-                              ? formatDate(form.further_treatment[index].date)\r\n-                              : \"No Date Available\"}\r\n-                          </Typography>\r\n-                        </Box>\r\n-                      </Grid>\r\n+                                <Grid container spacing={3}>\r\n+                                    {imagesBase64?.furtherTreatment?.map((treatment, index) => (\r\n+                                        <React.Fragment key={`treatment-${index}`}>\r\n+                                            {/* Date Grid Item */}\r\n+                                            <Grid item xs={12} sm={6} md={6}>\r\n+                                                <Box\r\n+                                                    sx={{\r\n+                                                        padding: \"15px\",\r\n+                                                        borderRadius: \"6px\",\r\n+                                                    }}\r\n+                                                >\r\n+                                                    <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\" }}>\r\n+                                                        Date:\r\n+                                                    </Typography>\r\n+                                                    <Typography variant=\"body2\" sx={{ color: \"#2c3e50\", marginTop: \"5px\" }}>\r\n+                                                        {form?.further_treatment?.[index]?.date\r\n+                                                            ? formatDate(form.further_treatment[index].date)\r\n+                                                            : \"No Date Available\"}\r\n+                                                    </Typography>\r\n+                                                </Box>\r\n+                                            </Grid>\r\n \r\n-                      {/* Signature Grid Item */}\r\n-                      <Grid item xs={12} sm={6} md={6}>\r\n-                        <Box\r\n-                          sx={{\r\n-                            padding: \"15px\",\r\n-                            borderRadius: \"6px\",\r\n-                          }}\r\n-                        >\r\n-                          <Typography\r\n-                            variant=\"body1\"\r\n-                            sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}\r\n-                          >\r\n-                            Patient Signature:\r\n-                          </Typography>\r\n-                          <Box\r\n-                            sx={{\r\n-                              display: \"flex\",\r\n-                              justifyContent: \"center\",\r\n-                              border: \"1px solid #e0e0e0\",\r\n-                              borderRadius: \"6px\",\r\n-                              padding: \"10px\",\r\n-                              backgroundColor: \"#ffffff\",\r\n-                            }}\r\n-                          >\r\n-                            <img\r\n-                              src={treatment || \"/placeholder.svg\"}\r\n-                              alt=\"Further Treatment Sign\"\r\n-                              style={{\r\n-                                width: \"200px\",\r\n-                                borderRadius: \"6px\",\r\n-                              }}\r\n-                            />\r\n-                          </Box>\r\n-                        </Box>\r\n-                      </Grid>\r\n-                    </React.Fragment>\r\n-                  ))}\r\n+                                            {/* Signature Grid Item */}\r\n+                                            <Grid item xs={12} sm={6} md={6}>\r\n+                                                <Box\r\n+                                                    sx={{\r\n+                                                        padding: \"15px\",\r\n+                                                        borderRadius: \"6px\",\r\n+                                                    }}\r\n+                                                >\r\n+                                                    <Typography\r\n+                                                        variant=\"body1\"\r\n+                                                        sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}\r\n+                                                    >\r\n+                                                        Patient Signature:\r\n+                                                    </Typography>\r\n+                                                    <Box\r\n+                                                        sx={{\r\n+                                                            display: \"flex\",\r\n+                                                            justifyContent: \"center\",\r\n+                                                            border: \"1px solid #e0e0e0\",\r\n+                                                            borderRadius: \"6px\",\r\n+                                                            padding: \"10px\",\r\n+                                                            backgroundColor: \"#ffffff\",\r\n+                                                        }}\r\n+                                                    >\r\n+                                                        <img\r\n+                                                            src={treatment || \"/placeholder.svg\"}\r\n+                                                            alt=\"Further Treatment Sign\"\r\n+                                                            style={{\r\n+                                                                width: \"200px\",\r\n+                                                                borderRadius: \"6px\",\r\n+                                                            }}\r\n+                                                        />\r\n+                                                    </Box>\r\n+                                                </Box>\r\n+                                            </Grid>\r\n+                                        </React.Fragment>\r\n+                                    ))}\r\n \r\n-                  {(!imagesBase64?.furtherTreatment || imagesBase64.furtherTreatment.length === 0) && (\r\n-                    <Grid item xs={12}>\r\n-                      <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\", textAlign: \"center\", padding: \"20px\" }}>\r\n-                        No further treatment information available\r\n-                      </Typography>\r\n-                    </Grid>\r\n-                  )}\r\n-                </Grid>\r\n-              </Paper>\r\n+                                    {(!imagesBase64?.furtherTreatment || imagesBase64.furtherTreatment.length === 0) && (\r\n+                                        <Grid item xs={12}>\r\n+                                            <Typography sx={{ color: \"#7f8c8d\", fontStyle: \"italic\", textAlign: \"center\", padding: \"20px\" }}>\r\n+                                                No further treatment information available\r\n+                                            </Typography>\r\n+                                        </Grid>\r\n+                                    )}\r\n+                                </Grid>\r\n+                            </Paper>\r\n \r\n-              {/* Patient Consent */}\r\n-              <Paper\r\n-                elevation={0}\r\n-                sx={{\r\n-                  padding: \"20px\",\r\n-                  marginBottom: \"25px\",\r\n-                  backgroundColor: \"#f8f9fa\",\r\n-                  borderRadius: \"8px\",\r\n-                  border: \"1px solid #e0e0e0\",\r\n-                }}\r\n-              >\r\n-                <Typography\r\n-                  variant=\"h6\"\r\n-                  sx={{\r\n-                    fontWeight: \"600\",\r\n-                    marginBottom: \"15px\",\r\n-                    color: \"#2c3e50\",\r\n-                    borderBottom: \"2px solid #3498db\",\r\n-                    paddingBottom: \"8px\",\r\n-                    display: \"inline-block\",\r\n-                  }}\r\n-                >\r\n-                  Patient Consent\r\n-                </Typography>\r\n+                            {/* Patient Consent */}\r\n+                            <Paper\r\n+                                elevation={0}\r\n+                                sx={{\r\n+                                    padding: \"20px\",\r\n+                                    marginBottom: \"25px\",\r\n+                                    backgroundColor: \"#f8f9fa\",\r\n+                                    borderRadius: \"8px\",\r\n+                                    border: \"1px solid #e0e0e0\",\r\n+                                }}\r\n+                            >\r\n+                                <Typography\r\n+                                    variant=\"h6\"\r\n+                                    sx={{\r\n+                                        fontWeight: \"600\",\r\n+                                        marginBottom: \"15px\",\r\n+                                        color: \"#2c3e50\",\r\n+                                        borderBottom: \"2px solid #3498db\",\r\n+                                        paddingBottom: \"8px\",\r\n+                                        display: \"inline-block\",\r\n+                                    }}\r\n+                                >\r\n+                                    Patient Consent\r\n+                                </Typography>\r\n \r\n-                <Grid container spacing={3}>\r\n-                  <Grid item xs={12} sm={6} md={6}>\r\n-                    <Box\r\n-                      sx={{\r\n-                        padding: \"15px\",\r\n-                        borderRadius: \"6px\",\r\n-                      }}\r\n-                    >\r\n-                      <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}>\r\n-                        Consent Details:\r\n-                      </Typography>\r\n-                      <Typography variant=\"body2\" sx={{ color: \"#2c3e50\" }}>\r\n-                        {form?.patient_consent?.details || \"No Patient Consent Details Available\"}\r\n-                      </Typography>\r\n-                    </Box>\r\n-                  </Grid>\r\n+                                <Grid container spacing={3}>\r\n+                                    <Grid item xs={12} sm={6} md={6}>\r\n+                                        <Box\r\n+                                            sx={{\r\n+                                                padding: \"15px\",\r\n+                                                borderRadius: \"6px\",\r\n+                                            }}\r\n+                                        >\r\n+                                            <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}>\r\n+                                                Consent Details:\r\n+                                            </Typography>\r\n+                                            <Typography variant=\"body2\" sx={{ color: \"#2c3e50\" }}>\r\n+                                                {form?.patient_consent?.details || \"No Patient Consent Details Available\"}\r\n+                                            </Typography>\r\n+                                        </Box>\r\n+                                    </Grid>\r\n \r\n-                  <Grid item xs={12} sm={6} md={6}>\r\n-                    <Box\r\n-                      sx={{\r\n-                        padding: \"15px\",\r\n-                        borderRadius: \"6px\",\r\n-                      }}\r\n-                    >\r\n-                      <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}>\r\n-                        Patient Signature:\r\n-                      </Typography>\r\n-                      {imagesBase64?.patientConsent?.[0] ? (\r\n-                        <Box\r\n-                          sx={{\r\n-                            display: \"flex\",\r\n-                            justifyContent: \"center\",\r\n-                            border: \"1px solid #e0e0e0\",\r\n-                            borderRadius: \"6px\",\r\n-                            padding: \"10px\",\r\n-                            backgroundColor: \"#ffffff\",\r\n-                          }}\r\n-                        >\r\n-                          <img\r\n-                            src={imagesBase64.patientConsent[0] || \"/placeholder.svg\"}\r\n-                            alt=\"Patient Consent Signature\"\r\n-                            style={{\r\n-                              width: \"200px\",\r\n-                              borderRadius: \"6px\",\r\n-                            }}\r\n-                          />\r\n-                        </Box>\r\n-                      ) : (\r\n-                        <Typography\r\n-                          sx={{ color: \"#7f8c8d\", fontStyle: \"italic\", textAlign: \"center\", padding: \"20px\" }}\r\n-                        >\r\n-                          No signature available\r\n-                        </Typography>\r\n-                      )}\r\n-                    </Box>\r\n-                  </Grid>\r\n-                </Grid>\r\n-              </Paper>\r\n+                                    <Grid item xs={12} sm={6} md={6}>\r\n+                                        <Box\r\n+                                            sx={{\r\n+                                                padding: \"15px\",\r\n+                                                borderRadius: \"6px\",\r\n+                                            }}\r\n+                                        >\r\n+                                            <Typography variant=\"body1\" sx={{ fontWeight: \"500\", color: \"#34495e\", marginBottom: \"10px\" }}>\r\n+                                                Patient Signature:\r\n+                                            </Typography>\r\n+                                            {imagesBase64?.patientConsent?.[0] ? (\r\n+                                                <Box\r\n+                                                    sx={{\r\n+                                                        display: \"flex\",\r\n+                                                        justifyContent: \"center\",\r\n+                                                        border: \"1px solid #e0e0e0\",\r\n+                                                        borderRadius: \"6px\",\r\n+                                                        padding: \"10px\",\r\n+                                                        backgroundColor: \"#ffffff\",\r\n+                                                    }}\r\n+                                                >\r\n+                                                    <img\r\n+                                                        src={imagesBase64.patientConsent[0] || \"/placeholder.svg\"}\r\n+                                                        alt=\"Patient Consent Signature\"\r\n+                                                        style={{\r\n+                                                            width: \"200px\",\r\n+                                                            borderRadius: \"6px\",\r\n+                                                        }}\r\n+                                                    />\r\n+                                                </Box>\r\n+                                            ) : (\r\n+                                                <Typography\r\n+                                                    sx={{ color: \"#7f8c8d\", fontStyle: \"italic\", textAlign: \"center\", padding: \"20px\" }}\r\n+                                                >\r\n+                                                    No signature available\r\n+                                                </Typography>\r\n+                                            )}\r\n+                                        </Box>\r\n+                                    </Grid>\r\n+                                </Grid>\r\n+                            </Paper>\r\n \r\n-              {/* Side Effects */}\r\n-              <Paper\r\n-                elevation={0}\r\n-                sx={{\r\n-                  padding: \"20px\",\r\n-                  backgroundColor: \"#f8f9fa\",\r\n-                  borderRadius: \"8px\",\r\n-                  border: \"1px solid #e0e0e0\",\r\n-                }}\r\n-              >\r\n-                <Typography\r\n-                  variant=\"h6\"\r\n-                  sx={{\r\n-                    fontWeight: \"600\",\r\n-                    marginBottom: \"15px\",\r\n-                    color: \"#2c3e50\",\r\n-                    borderBottom: \"2px solid #3498db\",\r\n-                    paddingBottom: \"8px\",\r\n-                    display: \"inline-block\",\r\n-                  }}\r\n-                >\r\n-                  Patient Side Effects\r\n-                </Typography>\r\n+                            {/* Side Effects */}\r\n+                            <Paper\r\n+                                elevation={0}\r\n+                                sx={{\r\n+                                    padding: \"20px\",\r\n+                                    backgroundColor: \"#f8f9fa\",\r\n+                                    borderRadius: \"8px\",\r\n+                                    border: \"1px solid #e0e0e0\",\r\n+                                }}\r\n+                            >\r\n+                                <Typography\r\n+                                    variant=\"h6\"\r\n+                                    sx={{\r\n+                                        fontWeight: \"600\",\r\n+                                        marginBottom: \"15px\",\r\n+                                        color: \"#2c3e50\",\r\n+                                        borderBottom: \"2px solid #3498db\",\r\n+                                        paddingBottom: \"8px\",\r\n+                                        display: \"inline-block\",\r\n+                                    }}\r\n+                                >\r\n+                                    Patient Side Effects\r\n+                                </Typography>\r\n \r\n-                <Box\r\n-                  sx={{\r\n-                    padding: \"15px\",\r\n-                    borderRadius: \"6px\",\r\n-                    backgroundColor: \"#ffffff\",\r\n-                    border: \"1px solid #e0e0e0\",\r\n-                  }}\r\n-                >\r\n-                  <Typography variant=\"body2\" sx={{ color: \"#2c3e50\" }}>\r\n-                    {form?.side_effect?.details || \"No Side Effects Reported\"}\r\n-                  </Typography>\r\n-                </Box>\r\n-              </Paper>\r\n+                                <Box\r\n+                                    sx={{\r\n+                                        padding: \"15px\",\r\n+                                        borderRadius: \"6px\",\r\n+                                        backgroundColor: \"#ffffff\",\r\n+                                        border: \"1px solid #e0e0e0\",\r\n+                                    }}\r\n+                                >\r\n+                                    <Typography variant=\"body2\" sx={{ color: \"#2c3e50\" }}>\r\n+                                        {form?.side_effect?.details || \"No Side Effects Reported\"}\r\n+                                    </Typography>\r\n+                                </Box>\r\n+                            </Paper>\r\n \r\n-              {/* Footer */}\r\n-              <Box\r\n-                sx={{\r\n-                  marginTop: \"30px\",\r\n-                  textAlign: \"center\",\r\n-                  padding: \"15px\",\r\n-                  borderTop: \"1px solid #e0e0e0\",\r\n-                }}\r\n-              >\r\n-                <Typography variant=\"body2\" sx={{ color: \"#7f8c8d\" }}>\r\n-                  This document is confidential and contains private medical information.\r\n-                </Typography>\r\n-                <Typography variant=\"body2\" sx={{ color: \"#7f8c8d\", marginTop: \"5px\" }}>\r\n-                  Generated on: {new Date().toLocaleDateString()}\r\n-                </Typography>\r\n-              </Box>\r\n-            </Box>\r\n-          </CardContent>\r\n-        </Card>\r\n-      </PDFExport>\r\n-    </div>\r\n-  )\r\n+                            {/* Footer */}\r\n+                            <Box\r\n+                                sx={{\r\n+                                    marginTop: \"30px\",\r\n+                                    textAlign: \"center\",\r\n+                                    padding: \"15px\",\r\n+                                    borderTop: \"1px solid #e0e0e0\",\r\n+                                }}\r\n+                            >\r\n+                                <Typography variant=\"body2\" sx={{ color: \"#7f8c8d\" }}>\r\n+                                    This document is confidential and contains private medical information.\r\n+                                </Typography>\r\n+                                <Typography variant=\"body2\" sx={{ color: \"#7f8c8d\", marginTop: \"5px\" }}>\r\n+                                    Generated on: {new Date().toLocaleDateString()}\r\n+                                </Typography>\r\n+                            </Box>\r\n+                        </Box>\r\n+                    </CardContent>\r\n+                </Card>\r\n+            </PDFExport>\r\n+        </div>\r\n+    )\r\n }\r\n \r\n export default PatientPDF\r\n \r\n"
                },
                {
                    "date": 1744118122484,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -139,9 +139,9 @@\n                                 borderRadius: \"8px\",\r\n                             }}\r\n                         >\r\n                             <Typography\r\n-                                variant=\"h4\"\r\n+                                variant=\"h5\"\r\n                                 sx={{\r\n                                     fontWeight: \"700\",\r\n                                     color: \"#2c3e50\",\r\n                                     marginBottom: \"5px\",\r\n"
                }
            ],
            "date": 1743669397426,
            "name": "Commit-0",
            "content": "import React, { useRef } from \"react\";\r\nimport { PDFExport } from \"@progress/kendo-react-pdf\";\r\nimport { Button, Card, CardContent, Typography, Divider } from \"@mui/material\";\r\n\r\nconst PatientPDF = ({ form }) => {\r\n  const pdfExportComponent = useRef(null);\r\n\r\n  const handleExportWithComponent = () => {\r\n    if (pdfExportComponent.current) {\r\n      pdfExportComponent.current.save();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={handleExportWithComponent}\r\n        style={{ marginBottom: \"10px\" }}\r\n      >\r\n        Download PDF\r\n      </Button>\r\n      <PDFExport ref={pdfExportComponent} paperSize=\"A4\">\r\n        <Card style={{ padding: \"20px\", maxWidth: \"800px\", margin: \"auto\" }}>\r\n          <CardContent>\r\n            <Typography variant=\"h5\" gutterBottom>\r\n              Patient Report\r\n            </Typography>\r\n            \r\n            <Divider />\r\n            <Typography variant=\"h6\">Patient Information</Typography>\r\n            <Typography>Name: {form.first_name} {form.last_name}</Typography>\r\n            <Typography>DOB: {new Date(form.dob).toLocaleDateString()}</Typography>\r\n            <Typography>Address: {form.address}</Typography>\r\n            <Typography>Post Code: {form.post_code}</Typography>\r\n            <Typography>Phone: {form.phone}</Typography>\r\n            <Typography>Email: {form.email}</Typography>\r\n            <Typography>Notes: {form.notes}</Typography>\r\n            \r\n            <Divider style={{ margin: \"10px 0\" }} />\r\n            <Typography variant=\"h6\">Next of Kin</Typography>\r\n            <Typography>Name: {form.kin_details.name}</Typography>\r\n            <Typography>Address: {form.kin_details.address}</Typography>\r\n            <Typography>Phone: {form.kin_details.phone}</Typography>\r\n            <Typography>Email: {form.kin_details.email}</Typography>\r\n            \r\n            <Divider style={{ margin: \"10px 0\" }} />\r\n            <Typography variant=\"h6\">General Practitioner</Typography>\r\n            <Typography>Name: {form.general_practitioner.name}</Typography>\r\n            <Typography>Address: {form.general_practitioner.address}</Typography>\r\n            <Typography>Phone: {form.general_practitioner.phone}</Typography>\r\n            <Typography>Email: {form.general_practitioner.email}</Typography>\r\n            \r\n            <Divider style={{ margin: \"10px 0\" }} />\r\n            <Typography variant=\"h6\">Treatment Plan</Typography>\r\n            <Typography>Concerns: {form.treatment_plan.patient_concerns}</Typography>\r\n            <Typography>Goals: {form.treatment_plan.patient_goals}</Typography>\r\n            <Typography>Plan: {form.treatment_plan.advised_plan}</Typography>\r\n            <Typography>Expected Result: {form.treatment_plan.expected_result}</Typography>\r\n            <Typography>\r\n              Treatment Date: {new Date(form.treatment_plan.date).toLocaleDateString()}\r\n            </Typography>\r\n            <img src={form.treatment_plan.patient_sign} alt=\"Patient Signature\" style={{ width: \"100px\", marginTop: \"10px\" }} />\r\n            \r\n            <Divider style={{ margin: \"10px 0\" }} />\r\n            <Typography variant=\"h6\">Treatment Records</Typography>\r\n            {form.treatment_record.map((record) => (\r\n              <Typography key={record._id}>{record.description} - ${record.amount}</Typography>\r\n            ))}\r\n            \r\n            <Divider style={{ margin: \"10px 0\" }} />\r\n            <Typography variant=\"h6\">Images</Typography>\r\n            <div style={{ display: \"flex\", gap: \"10px\", marginTop: \"10px\" }}>\r\n              {form.before_images.map((img, index) => (\r\n                <img key={index} src={img} alt=\"Before\" style={{ width: \"80px\" }} />\r\n              ))}\r\n              {form.after_images.map((img, index) => (\r\n                <img key={index} src={img} alt=\"After\" style={{ width: \"80px\" }} />\r\n              ))}\r\n            </div>\r\n            \r\n            <Divider style={{ margin: \"10px 0\" }} />\r\n            <Typography variant=\"h6\">Further Treatment</Typography>\r\n            {form.further_treatment.map((treatment, index) => (\r\n              <img key={index} src={treatment.sign} alt=\"Further Treatment Signature\" style={{ width: \"100px\" }} />\r\n            ))}\r\n            \r\n            <Divider style={{ margin: \"10px 0\" }} />\r\n            <Typography variant=\"h6\">Patient Consent</Typography>\r\n            <img src={form.patient_consent.sign} alt=\"Patient Consent Signature\" style={{ width: \"100px\" }} />\r\n            \r\n            <Divider style={{ margin: \"10px 0\" }} />\r\n            <Typography variant=\"h6\">Side Effects</Typography>\r\n            <Typography>Details: {form.side_effect.details || \"N/A\"}</Typography>\r\n            \r\n            <Divider style={{ margin: \"10px 0\" }} />\r\n            <Typography variant=\"h6\">Extra Notes</Typography>\r\n            <Typography>{form.extra_notes || \"N/A\"}</Typography>\r\n          </CardContent>\r\n        </Card>\r\n      </PDFExport>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PatientPDF;\r\n"
        }
    ]
}