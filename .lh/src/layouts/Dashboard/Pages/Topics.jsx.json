{
    "sourceFile": "src/layouts/Dashboard/Pages/Topics.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1744118122085,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1744118122085,
            "name": "Commit-0",
            "content": "import { Box, Card, Chip, Grid, IconButton, Paper, Typography } from \"@mui/material\"\r\nimport DataTable from \"../../../components/DataTable\"\r\nimport { useEffect, useState } from \"react\"\r\nimport { PrimaryButton } from \"../../../components/buttons\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport ApiServices from \"../../../services/Apis\";\r\nimport moment from \"moment\";\r\nimport DeleteOutlineIcon from '@mui/icons-material/DeleteOutline';\r\nimport DriveFileRenameOutlineIcon from '@mui/icons-material/DriveFileRenameOutline';\r\nimport ConfirmationDialog from \"../../../components/confirmDialog\";\r\nimport { showPromiseToast } from \"../../../components/Toaster\";\r\nimport ModeEditIcon from '@mui/icons-material/ModeEdit';\r\nimport InputField from \"../../../components/input\";\r\nimport SimpleDialog from \"../../../components/dialog\";\r\nimport { useForm } from \"react-hook-form\";\r\n\r\n\r\nconst Topics = () => {\r\n\r\n    const navigate = useNavigate()\r\n    const [data, setData] = useState()\r\n    const [confirmationDialog, setConfirmationDialog] = useState(false)\r\n    const [selectedRow, setSelectedRow] = useState(null)\r\n    const [open, setOpen] = useState(false)\r\n    const [open2, setOpen2] = useState(false)\r\n    const {\r\n        register: register2,\r\n        handleSubmit: handleSubmit2,\r\n        setValue: setValue2,\r\n        getValues: getValues2,\r\n        reset,\r\n        formState: { errors: errors2 },\r\n\r\n    } = useForm();\r\n    const {\r\n        register: register3,\r\n        handleSubmit: handleSubmit3,\r\n        setValue: setValue3,\r\n        getValues: getValues3,\r\n        \r\n        formState: { errors: errors3 },\r\n\r\n    } = useForm();\r\n\r\n    const getData = async () => {\r\n        try {\r\n            let params = {\r\n                page: 1,\r\n                limit: 999\r\n            };\r\n\r\n            const data = await ApiServices.getTopics(params);\r\n\r\n\r\n            setData(data?.data?.topics)\r\n\r\n\r\n        } catch (error) {\r\n            console.error(\"Error fetching location:\", error);\r\n        }\r\n    };\r\n    // // Dummy data\r\n    // const data = [\r\n    //     { id: 1, firstName: \"John\", lastName: \"Doe\", age: 30, city: \"New York\" },\r\n    //     { id: 2, firstName: \"Jane\", lastName: \"Smith\", age: 25, city: \"Los Angeles\" },\r\n    //     { id: 3, firstName: \"Bob\", lastName: \"Johnson\", age: 35, city: \"Chicago\" },\r\n    //     { id: 4, firstName: \"Alice\", lastName: \"Brown\", age: 28, city: \"Houston\" },\r\n    //     { id: 5, firstName: \"Charlie\", lastName: \"Davis\", age: 42, city: \"Phoenix\" },\r\n    //     { id: 6, firstName: \"Eva\", lastName: \"Wilson\", age: 31, city: \"Philadelphia\" },\r\n    //     { id: 7, firstName: \"Frank\", lastName: \"Moore\", age: 29, city: \"San Antonio\" },\r\n    //     { id: 8, firstName: \"Grace\", lastName: \"Taylor\", age: 36, city: \"San Diego\" },\r\n    //     { id: 9, firstName: \"Henry\", lastName: \"Anderson\", age: 41, city: \"Dallas\" },\r\n    //     { id: 10, firstName: \"Ivy\", lastName: \"Thomas\", age: 27, city: \"San Jose\" },\r\n    // ]\r\n\r\n    // Column definitions with sorting\r\n    const columns = [\r\n\r\n        {\r\n            header: \"Name\",\r\n            accessorKey: \"name\",\r\n            cell: ({ row }) => {\r\n\r\n                return (\r\n                    <Box>\r\n                        {row?.original?.first_name +  row?.original?.last_name}\r\n                    </Box>\r\n                );\r\n            },\r\n        },\r\n\r\n\r\n\r\n\r\n        {\r\n            header: \"Answer\",\r\n            accessorKey: \"answer\",\r\n            cell: ({ row }) => {\r\n\r\n                return (\r\n                    <Box>\r\n                        {row?.original?.answer}\r\n                    </Box>\r\n                );\r\n            },\r\n        },\r\n        {\r\n            header: \"Actions\",\r\n            cell: ({ row }) => (\r\n\r\n                <Box variant=\"contained\" color=\"primary\" sx={{ cursor: 'pointer', display: 'flex', gap: 2 }} >\r\n\r\n\r\n                    <IconButton onClick={() => { setSelectedRow(row?.original); setConfirmationDialog(true) }}>\r\n                        <DeleteOutlineIcon sx={{ fontSize: '16px' }} />\r\n                    </IconButton>\r\n                </Box>\r\n            ),\r\n        },\r\n\r\n    ]\r\n\r\n    const HandleDelete = async () => {\r\n\r\n        try {\r\n            let obj = {\r\n                id: selectedRow?._id\r\n            };\r\n\r\n            const promise = ApiServices.DeleteTopic(obj);\r\n\r\n            // Handle the API response properly\r\n            const response = await promise;\r\n            console.log(response);\r\n\r\n            showPromiseToast(\r\n                promise,\r\n                \"Saving...\",\r\n                \"Added Successfully\",\r\n                \"Something Went Wrong\"\r\n            );\r\n\r\n\r\n\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        finally {\r\n            setOpen(false)\r\n            setOpen2(false)\r\n            getData()\r\n        }\r\n\r\n    };\r\n    const CreateTopic = async () => {\r\n\r\n        try {\r\n            let obj = {\r\n              \r\n                title:getValues2('title')\r\n\r\n            };\r\n\r\n            const promise = ApiServices.CreateTopic(obj);\r\n\r\n            // Handle the API response properly\r\n            const response = await promise;\r\n            console.log(response);\r\n           \r\n            showPromiseToast(\r\n                promise,\r\n                \"Saving...\",\r\n                \"Added Successfully\",\r\n                \"Something Went Wrong\"\r\n            );\r\n\r\n\r\n\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        finally {\r\n            setOpen(false)\r\n            setValue2('title','')\r\n            setOpen2(false)\r\n            getData()\r\n        }\r\n\r\n    };\r\n    const UpdateTopic = async () => {\r\n\r\n        try {\r\n            let obj = {\r\n                _id: selectedRow?._id,\r\n                title:getValues3('title')\r\n\r\n            };\r\n\r\n            const promise = ApiServices.UpdateTopic(obj);\r\n\r\n            // Handle the API response properly\r\n            const response = await promise;\r\n            console.log(response);\r\n           \r\n            showPromiseToast(\r\n                promise,\r\n                \"Saving...\",\r\n                \"Added Successfully\",\r\n                \"Something Went Wrong\"\r\n            );\r\n            getData()\r\n\r\n\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        finally {\r\n            setOpen(false)\r\n            setOpen2(false)\r\n            \r\n        }\r\n\r\n    };\r\n    useEffect(() => {\r\n        getData()\r\n\r\n    }, [])\r\n\r\n    return (\r\n        <div>\r\n            <SimpleDialog\r\n                open={open}\r\n                onClose={() => setOpen(false)}\r\n                title={'Update Topic'}\r\n            >\r\n                <Box component=\"form\" onSubmit={handleSubmit2(CreateTopic)}>\r\n                    <Grid container >\r\n                        <Grid item xs={12} sm={12} mt={2}>\r\n                            <InputField\r\n                                label={\"Title :\"}\r\n                                size={'small'}\r\n\r\n                                placeholder={\"Title\"}\r\n                                error={errors2?.title?.message}\r\n                                register={register2(\"title\", {\r\n                                    required:\r\n                                        'title is required'\r\n\r\n                                })}\r\n                            />\r\n                        </Grid>\r\n\r\n\r\n\r\n\r\n\r\n\r\n                        <Grid container sx={{ justifyContent: 'center' }}>\r\n                            <Grid item xs={6} sm={6} sx={{ mt: 2, display: 'flex', justifyContent: 'center', gap: '25px' }}>\r\n                                <PrimaryButton bgcolor={'black'} title=\"Submit\" type=\"submit\" />\r\n                               \r\n                            </Grid>\r\n                        </Grid>\r\n\r\n                    </Grid>\r\n                </Box>\r\n            </SimpleDialog>\r\n            <SimpleDialog\r\n                open={open2}\r\n                onClose={() => setOpen2(false)}\r\n                title={'Update Topic'}\r\n            >\r\n                <Box component=\"form\" onSubmit={handleSubmit3(UpdateTopic)}>\r\n                    <Grid container >\r\n                        <Grid item xs={12} sm={12} mt={2}>\r\n                            <InputField\r\n                                label={\"Title :\"}\r\n                                size={'small'}\r\n\r\n                                placeholder={\"Title\"}\r\n                                error={errors3?.title?.message}\r\n                                register={register3(\"title\", {\r\n                                    required:\r\n                                        'title is required'\r\n\r\n                                })}\r\n                            />\r\n                        </Grid>\r\n\r\n\r\n\r\n\r\n\r\n\r\n                        <Grid container sx={{ justifyContent: 'center' }}>\r\n                            <Grid item xs={6} sm={6} sx={{ mt: 2, display: 'flex', justifyContent: 'center', gap: '25px' }}>\r\n                                <PrimaryButton bgcolor={'black'} title=\"Submit\" type=\"submit\" />\r\n                               \r\n                            </Grid>\r\n                        </Grid>\r\n\r\n                    </Grid>\r\n                </Box>\r\n            </SimpleDialog>\r\n            <ConfirmationDialog\r\n                open={confirmationDialog}\r\n                onClose={() => setConfirmationDialog(false)}\r\n                message={\"Are you sure you want to delete?\"}\r\n                action={async () => {\r\n                    setConfirmationDialog(false);\r\n                    HandleDelete()\r\n\r\n                }}\r\n            />\r\n            <Paper sx={{ width: \"100%\", overflow: \"hidden\", boxShadow: 'none', p: 2 }}>\r\n                <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\r\n                    <Typography variant=\"h5\" sx={{ fontWeight: 500 }}>\r\n                        Topics\r\n                    </Typography>\r\n                    <PrimaryButton onClick={() => { setOpen(true)}} title=\"Create\" />\r\n                </Box>\r\n\r\n                <Grid container spacing={2}>\r\n                    {data?.map((item, index) => (\r\n                        <Grid item xs={12} sm={6} md={3} key={index}>\r\n                            <Card\r\n                                sx={{\r\n                                    p: 2,\r\n                                    borderRadius: 2,\r\n                                    boxShadow: 1,\r\n                                    bgcolor: index % 2 === 0 ? \"primary.light\" : \"secondary.light\",\r\n                                    display: 'flex',\r\n                                    justifyContent: 'space-between'\r\n                                }}\r\n                            >\r\n                                <Typography variant=\"h6\" sx={{ color: 'white' }} fontWeight={500}>\r\n                                    {item.title}\r\n                                </Typography>\r\n                                <Box>\r\n                                    <IconButton onClick={() => { setSelectedRow(item); setConfirmationDialog(true) }}>\r\n                                        <DeleteOutlineIcon sx={{ fontSize: '22px', color: 'white' }} />\r\n                                    </IconButton>\r\n                                    <IconButton onClick={() => { setValue3('title',item?.title); setSelectedRow(item); setOpen2(true) }}>\r\n                                        <ModeEditIcon sx={{ fontSize: '22px', color: 'white' }} />\r\n                                    </IconButton>\r\n                                </Box>\r\n                            </Card>\r\n                        </Grid>\r\n                    ))}\r\n\r\n                </Grid>\r\n            </Paper>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Topics\r\n"
        }
    ]
}