{
    "sourceFile": "src/layouts/Dashboard/Pages/UserDetail.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1744118122087,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1744118122087,
            "name": "Commit-0",
            "content": "import { useParams } from \"react-router-dom\"\r\nimport ApiServices from \"../../../services/Apis\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Avatar, Box, Button, Card, CardContent, Chip, Grid, IconButton, Typography } from \"@mui/material\";\r\nimport moment from \"moment\";\r\nimport NorthEastIcon from '@mui/icons-material/NorthEast';\r\nimport DataTable from \"../../../components/DataTable\";\r\n\r\n\r\nconst UserDetail = () => {\r\n    const [data, setData] = useState(null)\r\n    const [appointments, setAppointments] = useState([])\r\n    const { id } = useParams()\r\n    const [showTable, setShowTable] = useState(false)\r\n    console.log(id);\r\n\r\n    const getData = async () => {\r\n        try {\r\n            let params = {\r\n                user_id: id,\r\n\r\n            };\r\n\r\n            const data = await ApiServices.getUserDetail(params);\r\n\r\n\r\n            setData(data?.data?.userDetails)\r\n\r\n\r\n        } catch (error) {\r\n            console.error(\"Error fetching location:\", error);\r\n        }\r\n    };\r\n    const columns = [\r\n        {\r\n            header: \"Appointment Date\",\r\n            accessorKey: \"firstName\",\r\n            cell: ({ row }) => (\r\n                <Box>\r\n                    {moment(row?.original?.date).format('MM-DD-YYYY')}\r\n                </Box>\r\n            ),\r\n        },\r\n        {\r\n            header: \"Time\",\r\n            accessorKey: \"timeslot\",\r\n        },\r\n        {\r\n            header: \"Client Name\",\r\n            accessorKey: \"name\",\r\n            cell: ({ row }) => (\r\n                <Box>\r\n                    {row?.original?.first_name + \" \" + row?.original?.last_name}\r\n                </Box>\r\n            ),\r\n        },\r\n        {\r\n            header: \"Mobile No.\",\r\n            accessorKey: \"mobile\",\r\n        },\r\n        {\r\n            header: \"PIN\",\r\n            accessorKey: \"pin\",\r\n        },\r\n       \r\n    {\r\n        header: \"Actions\",\r\n        cell: ({ row }) => (\r\n  \r\n          <Box component={'div'} variant=\"contained\" color=\"primary\" sx={{ cursor: 'pointer' }} >\r\n            <IconButton onClick={() => {      navigate(`/appointment-detail/${row?.original?._id}`, { state: row?.original }) }}>\r\n              <NorthEastIcon sx={{ fontSize: '16px' }} />\r\n            </IconButton>\r\n          </Box>\r\n        ),\r\n      },\r\n\r\n    ]\r\n    const getAppointments = async () => {\r\n        try {\r\n            let params = {\r\n                user_id: id\r\n            }\r\n\r\n            const data = await ApiServices.getAppointmentsByUser(params);\r\n            console.log(data?.data?.bookings);\r\n            setShowTable(true)\r\n            setAppointments(data?.data?.bookings)\r\n\r\n\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    };\r\n    \r\n\r\n    useEffect(() => {\r\n     \r\n        getData()\r\n\r\n    }, [])\r\n\r\n\r\n    return (\r\n        <div>\r\n            <Typography variant=\"h5\" sx={{ mb: 4, fontWeight: 500 }}>\r\n                User Detail\r\n            </Typography>\r\n\r\n            <Grid container xs={12} justifyContent={'center'} spacing={3} sx={{ border: \"1px solid #ddd\", borderRadius: 2, margin: '0 auto', p: 2 }}>\r\n\r\n                <Grid item xs={12} sx={{ display: 'flex' }}>\r\n                    <Typography variant=\"body1\" sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\r\n                        <strong>Profile Pic:</strong> <Avatar\r\n                            src={data?.picture}\r\n                            alt={data?.first_name}\r\n                            sx={{\r\n                                position: \"relative\",\r\n                                width: \"50px\",\r\n                                height: \"50px\",\r\n                                borderRadius: \"50%\",\r\n                                fontSize: 24,\r\n\r\n                                color: \"white\",\r\n                                cursor: \"pointer\",\r\n                                objectFit: \"cover\",\r\n                                textTransform: \"capitalize\",\r\n                            }}\r\n\r\n                        />\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                    <Typography variant=\"body1\">\r\n                        <strong>First Name:</strong> {data?.first_name}\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                    <Typography variant=\"body1\">\r\n                        <strong>Last Name:</strong> {data?.last_name}\r\n                    </Typography>\r\n                </Grid>\r\n\r\n                <Grid item xs={6}>\r\n                    <Typography variant=\"body1\">\r\n                        <strong>Email:</strong> {data?.email}\r\n                    </Typography>\r\n                </Grid>\r\n\r\n                <Grid item xs={6}>\r\n                    <Typography variant=\"body1\">\r\n                        <strong>Phone:</strong> {data?.phone}\r\n                    </Typography>\r\n                </Grid>\r\n\r\n                <Grid item xs={6}>\r\n                    <Typography variant=\"body1\">\r\n                        <strong>Address:</strong> 123 Maple Street, Apartment 45, Downtown, Los Angeles, CA 90001\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                    <Typography variant=\"body1\">\r\n                        <strong>DOB:</strong> {moment(data?.dob).format('MM-DD-YYYY')}\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n\r\n                    <strong>Status:</strong>\r\n\r\n                    <Chip\r\n                        label={data?.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n                        color={data?.status === \"active\" ? \"success\" : \"error\"}\r\n                        sx={{ ml: 1, fontWeight: 600 }}\r\n                    />\r\n                </Grid>\r\n\r\n                <Grid item xs={6} display=\"flex\" justifyContent=\"flex-end\">\r\n                    <Button variant=\"contained\" sx={{ textTransform: 'capitalize' }} onClick={()=> {getAppointments()}} color=\"primary\">\r\n                        Appointments\r\n                    </Button>\r\n                </Grid>\r\n            </Grid>\r\n            <Box mt={5}>\r\n           {showTable  && <Typography variant=\"h5\" sx={{ mb: 4, fontWeight: 500 }}>\r\n               Appointments\r\n            </Typography>}\r\n            {showTable  && <DataTable data={appointments} columns={columns} />}\r\n            </Box>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserDetail\r\n"
        }
    ]
}